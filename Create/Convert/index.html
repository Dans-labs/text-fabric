<!doctype html><html lang=en class=no-js> <head><link href=https://fonts.gstatic.com rel=preconnect crossorigin><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, a binary format, an API, and apps for (ancient) text plus (linguistic) annotations."><link href=https://annotation.github.io/text-fabric/Create/Convert/ rel=canonical><meta name=author content="Dirk Roorda"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../images/icon/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-dans-4.4.1"><title>Convert - Text-Fabric</title><link rel=stylesheet href=../../assets/stylesheets/application.679b0f7b.css><script src=../../assets/javascripts/modernizr.74668098.js></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700|Glegoo:300,400,400i,700|Ubuntu+Mono&display=swap"><style>.body-type,body,input{font-family:"Open Sans",sans-serif}.head-type,h1,h2,h3,h4,h5{font-family:"Glegoo",serif}.code-type,code,kbd,pre{font-family:"Ubuntu Mono",monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#convert tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)" class="md-header-nav__button md-logo"> <img src=../../assets/images/DANS.gif height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-header-nav__button md-logo"> <img src=../../images/tf-small.png height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title head-type" data-md-component=title> <span class=md-header-nav__topic> Text-Fabric </span> <span class=md-header-nav__topic> Convert </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. title=Home class="md-tabs__link head-type"> Home </a> </li> <li class=md-tabs__item> <a href=../../About/Install/ title=About class="md-tabs__link head-type"> About </a> </li> <li class=md-tabs__item> <a href=../../Use/Use/ title=Use class="md-tabs__link head-type"> Use </a> </li> <li class=md-tabs__item> <a href=../../Api/App/ title=Api class="md-tabs__link head-type"> Api </a> </li> <li class=md-tabs__item> <a href=../../Writing/Arabic/ title=Writing class="md-tabs__link head-type"> Writing </a> </li> <li class=md-tabs__item> <a href=../../Model/Data-Model/ title=Model class="md-tabs__link head-type"> Model </a> </li> <li class=md-tabs__item> <a href=./ title=Create class="md-tabs__link md-tabs__link--active head-type"> Create </a> </li> <li class=md-tabs__item> <a href=../../Server/Kernel/ title=Server class="md-tabs__link head-type"> Server </a> </li> <li class=md-tabs__item> <a href=../../Code/Overview/ title=Code class="md-tabs__link head-type"> Code </a> </li> <li class=md-tabs__item> <a href=../../Implementation/Apps/ title=Implementation class="md-tabs__link head-type"> Implementation </a> </li> </ul> </div> </nav> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title head-type md-nav__title--site" for=__drawer> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-nav__button md-logo"> <img src=../../images/tf-small.png width=48 height=48> </a> Text-Fabric </label> <div class=md-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class="md-nav__link head-type"> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class="md-nav__link head-type" for=nav-2> About </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-2> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../About/Install/ title=Install class="md-nav__link head-type"> Install </a> </li> <li class=md-nav__item> <a href=../../About/Corpora/ title=Corpora class="md-nav__link head-type"> Corpora </a> </li> <li class=md-nav__item> <a href=../../About/Faq/ title=Faq class="md-nav__link head-type"> Faq </a> </li> <li class=md-nav__item> <a href=../../About/News/ title=News class="md-nav__link head-type"> News </a> </li> <li class=md-nav__item> <a href=../../About/Older/ title=Older class="md-nav__link head-type"> Older </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class="md-nav__link head-type" for=nav-3> Use </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-3> Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Use/Use/ title=Use class="md-nav__link head-type"> Use </a> </li> <li class=md-nav__item> <a href=../../Use/Browser/ title=Browser class="md-nav__link head-type"> Browser </a> </li> <li class=md-nav__item> <a href=../../Use/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Use/UseX/ title=Advanced class="md-nav__link head-type"> Advanced </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class="md-nav__link head-type" for=nav-4> Api </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-4> Api </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Api/App/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class="md-nav__link head-type" for=nav-4-2> Data flow </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-2> Data flow </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Api/Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Api/Repo/ title=Repo class="md-nav__link head-type"> Repo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3> <label class="md-nav__link head-type" for=nav-4-3> Core </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-3> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Api/Fabric/ title=TF class="md-nav__link head-type"> TF </a> </li> <li class=md-nav__item> <a href=../../Api/Features/ title="E/F - (Edge-)Features" class="md-nav__link head-type"> E/F - (Edge-)Features </a> </li> <li class=md-nav__item> <a href=../../Api/Nodes/ title="N - Nodes" class="md-nav__link head-type"> N - Nodes </a> </li> <li class=md-nav__item> <a href=../../Api/Locality/ title="L - Locality" class="md-nav__link head-type"> L - Locality </a> </li> <li class=md-nav__item> <a href=../../Api/Text/ title="T - Text" class="md-nav__link head-type"> T - Text </a> </li> <li class=md-nav__item> <a href=../../Api/Search/ title="S - Search" class="md-nav__link head-type"> S - Search </a> </li> <li class=md-nav__item> <a href=../../Api/Computed/ title="C - Computed" class="md-nav__link head-type"> C - Computed </a> </li> <li class=md-nav__item> <a href=../../Api/Misc/ title=Miscellaneous class="md-nav__link head-type"> Miscellaneous </a> </li> <li class=md-nav__item> <a href=../../Api/Lib/ title=Lib class="md-nav__link head-type"> Lib </a> </li> <li class=md-nav__item> <a href=../../Api/Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class="md-nav__link head-type" for=nav-4-4> Compose </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-4> Compose </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Api/Compose/ title=Combining class="md-nav__link head-type"> Combining </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class="md-nav__link head-type" for=nav-5> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-5> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Writing/Arabic/ title=Arabic class="md-nav__link head-type"> Arabic </a> </li> <li class=md-nav__item> <a href=../../Writing/Hebrew/ title=Hebrew class="md-nav__link head-type"> Hebrew </a> </li> <li class=md-nav__item> <a href=../../Writing/Syriac/ title=Syriac class="md-nav__link head-type"> Syriac </a> </li> <li class=md-nav__item> <a href=../../Writing/Transcription/ title=Transcription class="md-nav__link head-type"> Transcription </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class="md-nav__link head-type" for=nav-6> Model </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-6> Model </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Model/Data-Model/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Model/File-formats/ title=Format class="md-nav__link head-type"> Format </a> </li> <li class=md-nav__item> <a href=../../Model/Optimizations/ title=Tweaks class="md-nav__link head-type"> Tweaks </a> </li> <li class=md-nav__item> <a href=../../Model/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7 checked> <label class="md-nav__link head-type" for=nav-7> Create </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-7> Create </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <a href=./ title=Convert class="md-nav__link md-nav__link--active head-type"> Convert </a> </li> <li class=md-nav__item> <a href=../CreateTF/ title=Pattern class="md-nav__link head-type"> Pattern </a> </li> <li class=md-nav__item> <a href=../ExampleText/ title="Example data" class="md-nav__link head-type"> Example data </a> </li> <li class=md-nav__item> <a href=../MQL/ title=MQL class="md-nav__link head-type"> MQL </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class="md-nav__link head-type" for=nav-8> Server </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-8> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Server/Kernel/ title=Kernel class="md-nav__link head-type"> Kernel </a> </li> <li class=md-nav__item> <a href=../../Server/Web/ title=Web class="md-nav__link head-type"> Web </a> </li> <li class=md-nav__item> <a href=../../Server/Common/ title=Common class="md-nav__link head-type"> Common </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class="md-nav__link head-type" for=nav-9> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-9> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Code/Overview/ title=Overview class="md-nav__link head-type"> Overview </a> </li> <li class=md-nav__item> <a href=../../Code/Tests/ title=Tests class="md-nav__link head-type"> Tests </a> </li> <li class=md-nav__item> <a href=../../Code/Stats/ title="Stats (overall)" class="md-nav__link head-type"> Stats (overall) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsToplevel/ title="Stats (TF-toplevel)" class="md-nav__link head-type"> Stats (TF-toplevel) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCore/ title="Stats (TF-core)" class="md-nav__link head-type"> Stats (TF-core) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsSearch/ title="Stats (TF-search)" class="md-nav__link head-type"> Stats (TF-search) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsConvert/ title="Stats (TF-convert)" class="md-nav__link head-type"> Stats (TF-convert) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCompose/ title="Stats (TF-compose)" class="md-nav__link head-type"> Stats (TF-compose) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsWriting/ title="Stats (TF-writing)" class="md-nav__link head-type"> Stats (TF-writing) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsServer/ title="Stats (TF-server)" class="md-nav__link head-type"> Stats (TF-server) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApplib/ title="Stats (TF-app support)" class="md-nav__link head-type"> Stats (TF-app support) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApps/ title="Stats (TF-apps)" class="md-nav__link head-type"> Stats (TF-apps) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsTest/ title="Stats (Tests)" class="md-nav__link head-type"> Stats (Tests) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class="md-nav__link head-type" for=nav-10> Implementation </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-10> Implementation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Implementation/Apps/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class=md-nav__item> <a href=../../Implementation/Setup/ title=Setup class="md-nav__link head-type"> Setup </a> </li> <li class=md-nav__item> <a href=../../Implementation/Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Implementation/Display/ title=Display class="md-nav__link head-type"> Display </a> </li> <li class=md-nav__item> <a href=../../Implementation/Highlight/ title=Highlight class="md-nav__link head-type"> Highlight </a> </li> <li class=md-nav__item> <a href=../../Implementation/Links/ title=Links class="md-nav__link head-type"> Links </a> </li> <li class=md-nav__item> <a href=../../Implementation/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Implementation/Tables/ title=Tables class="md-nav__link head-type"> Tables </a> </li> <li class=md-nav__item> <a href=../../Implementation/Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/annotation/text-fabric/edit/master/docs/Create/Convert.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=convert>Convert<a class=headerlink href=#convert title="Permanent link">&para;</a></h1> <details class=info><summary>Data conversion to TF by walking through the source</summary><p>You can convert a dataset to TF by writing a function that walks through it.</p> <p>That is a function that triggers a sequence of actions when reading the data. These actions drive Text-Fabric to build a valid Text-Fabric graph. Many checks will be performed.</p> </details> <details class=hint><summary>to and from MQL</summary><p>If your source is MQL, you are even better off: Text-Fabric has a <a href=../MQL/ >module</a> to import from MQL and to export to MQL.</p> </details> <details class=abstract><summary>cv.walk()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>tf.fabric</span> <span class=kn>import</span> <span class=n>Fabric</span>
<span class=kn>from</span> <span class=nn>tf.convert.walker</span> <span class=kn>import</span> <span class=n>CV</span>

<span class=n>TF</span> <span class=o>=</span> <span class=n>Fabric</span><span class=p>(</span><span class=n>locations</span><span class=o>=</span><span class=n>OUT_DIR</span><span class=p>)</span>
<span class=n>cv</span> <span class=o>=</span> <span class=n>CV</span><span class=p>(</span><span class=n>TF</span><span class=p>)</span>

<span class=k>def</span> <span class=nf>director</span><span class=p>(</span><span class=n>cv</span><span class=p>):</span>
  <span class=c1># your code to unwrap your source data and trigger </span>
  <span class=c1># the generation of TF nodes, edges and features</span>

<span class=n>slotType</span> <span class=o>=</span> <span class=s1>&#39;word&#39;</span>  <span class=c1># or whatever you choose</span>
<span class=n>otext</span> <span class=o>=</span> <span class=p>{</span>  <span class=c1># dictionary of config data for sections and text formats</span>
    <span class=o>...</span>
<span class=p>}</span>
<span class=n>generic</span> <span class=o>=</span> <span class=p>{</span>  <span class=c1># dictionary of metadata meant for all features</span>
    <span class=o>...</span>
<span class=p>}</span>
<span class=n>intFeatures</span> <span class=o>=</span> <span class=p>{</span>  <span class=c1># set of integer valued feature names</span>
    <span class=o>...</span>
<span class=p>}</span>
<span class=n>featureMeta</span> <span class=o>=</span> <span class=p>{</span>  <span class=c1># per feature dicts with metadata</span>
   <span class=o>...</span>
<span class=p>}</span>

<span class=n>good</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>walk</span><span class=p>(</span>
    <span class=n>director</span><span class=p>,</span>
    <span class=n>slotType</span><span class=p>,</span>
    <span class=n>otext</span><span class=o>=</span><span class=n>otext</span><span class=p>,</span>
    <span class=n>generic</span><span class=o>=</span><span class=n>generic</span><span class=p>,</span>
    <span class=n>intFeatures</span><span class=o>=</span><span class=n>intFeatures</span><span class=p>,</span>
    <span class=n>featureMeta</span><span class=o>=</span><span class=n>featureMeta</span><span class=p>,</span>
    <span class=n>warn</span><span class=o>=</span><span class=bp>True</span><span class=p>,</span>
    <span class=n>force</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span>
    <span class=n>silent</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span>
<span class=p>)</span>

<span class=k>if</span> <span class=n>good</span><span class=p>:</span>
  <span class=o>...</span> <span class=n>load</span> <span class=n>the</span> <span class=n>new</span> <span class=n>TF</span> <span class=n>data</span> <span class=o>...</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p><code>cv.walk</code> takes your <code>director</code> function which should unravel the source. You have to program the <code>director</code>, which takes one argument: <code>cv</code>. From the <code>cv</code> you can use a few standard actions that instruct Text-Fabric to build a graph.</p> <p>This function will check whether the metadata makes sense and is minimally complete.</p> <p>During node creation the section structure will be watched, and you will be warned if irregularities occur.</p> <p>After the creation of the feature data, some extra checks will be performed to see whether the metadata matches the data and vice versa.</p> </details> <details class=hint><summary>Destination directory</summary><p>The new feature data will be written to the output directory of the underlying TF object. In fact, the rules are exactly the same as for <code>TF.save()</code>.</p> </details> <details class=info><summary>slotType</summary><p>The node type that acts as the type of the slots in the data set.</p> </details> <details class=info><summary>oText</summary><p>The configuration information to be stored in the <code>otext</code> feature: * section types * section features * text formats</p> <p>Must be a dict.</p> </details> <details class=info><summary>generic</summary><p>Metadata that will be written into the header of all generated TF features.</p> <p>Must be a dict.</p> <details><summary>hint</summary><p>You can make changes to this later on, dynamically in your director.</p> </details> </details> <details class=info><summary>intFeatures</summary><p>The set of features that have integer values only.</p> <p>Must be an iterable.</p> <details><summary>hint</summary><p>You can make changes to this later on, dynamically in your director.</p> </details> </details> <details class=info><summary>featureMeta</summary><p>For each node or edge feature descriptive metadata can be supplied.</p> <p>Must be a dict of dicts.</p> <details><summary>hint</summary><p>You can make changes to this later on, dynamically in your director.</p> </details> </details> <details class=info open=open><summary>warn=True</summary><p>This regulates the response to warnings:</p> <p><code>warn=True</code> (default): stop after warnings (as if they are errors);</p> <p><code>warn=False</code> continue after warnings but do show them;</p> <p><code>warn=None</code> suppress all warnings.</p> </details> <details class="- info"><summary>silent=False</summary><p>By this you can suppress informational messages: <code>silent=True</code>.</p> </details> <details class=info open=open><summary>force=False</summary><p>This forces the process to continue after errors. Your TF set might not be valid. Yet this can be useful during testing, when you know that not everything is OK, but you want to check some results. Especially when dealing with large datasets, you might want to test with little pieces. But then you get a kind of non-fatal errors that stand in the way of testing. For those cases: <code>force=True</code>.</p> </details> <details class=info open=open><summary>generateTf=True</summary><p>You can pass <code>False</code> here to suppress the actual writing of TF data. In that way you can dry-run the director to check for errors and warnings</p> </details> <details class=info><summary>director</summary><p>An ordinary function that takes one argument, the <code>cv</code> object, and should not deliver anything.</p> <p>Writing this function is the main job to do when you want to convert a data source to TF.</p> <p>When you walk through the input data source, you'll encounter things that have to become slots, non-slot nodes, edges and features in the new data set.</p> <p>You issue these things by means of an <em>action method</em> from <code>cv</code>, such as <code>cv.slot()</code> or <code>cv.node(nodeType)</code>.</p> <p>When your action creates slots or non slot nodes, Text-Fabric will return you a reference to that node, that you can use later for more actions related to that node.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>curPara</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>node</span><span class=p>(</span><span class=s1>&#39;para&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>To add features to nodes, use a <code>cv.feature()</code> action. It will apply to the last node added, or you can pass it a node as argument.</p> <p>To add features to edges, issue a <code>cv.edge()</code> action. It will require two node arguments: the <em>from</em> node and the <em>to</em> node.</p> <p>There is always a set of current <em>embedder nodes</em>. When you create a slot node</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>curWord</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>slot</span><span class=p>()</span>
</pre></div> </td></tr></table> <p>then TF will link all current embedder nodes to the resulting slot.</p> <p>There are actions to add nodes to the set of embedder nodes, to remove them from it, and to add them again. </p> <p>??? "hint" Metadata When the director runs, you have already specified all your feature metadata, including the value types.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre>1
2
3
4
5
6
7
8</pre></div></td><td class=code><div class=codehilite><pre><span></span>But if some of that information is dependent on what you encounter in the
data, you can do two things:

(A) Run a preliminary pass over the data and gather the required information,
before running the director.

(B) Update the metadata later on
by issuing `cv.meta()` actions from within your director, see below.
</pre></div> </td></tr></table> </details> </details> <details class=explanation open=open><summary><code>cv</code> action methods</summary><p>The <code>cv</code> class contains methods that are responsible for particular <em>actions</em> that steer the graph building.</p> <details class=abstract><summary>cv.slot()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>n</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>slot</span><span class=p>()</span>
</pre></div> </td></tr></table> <p>Make a slot node and return the handle to it in <code>n</code>.</p> <p>No further information is needed. Remember that you can add features to the node by later <code>cv.feature(n, key=value, ...)</code> calls.</p> </details> <details class=abstract><summary>cv.node()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>n</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>node</span><span class=p>(</span><span class=n>nodeType</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Make a non-slot node and return the handle to it in <code>n</code>. You have to pass its <em>node type</em>, i.e. a string. Think of <code>sentence</code>, <code>paragraph</code>, <code>phrase</code>, <code>word</code>, <code>sign</code>, whatever. Non slot nodes will be automatically added to the set of embedders.</p> <p>Remember that you can add features to the node by later <code>cv.feature(n, key=value, ...)</code> calls.</p> </details> <details class=abstract><summary>cv.terminate()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>cv</span><span class=o>.</span><span class=n>terminate</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
</pre></div> </td></tr></table> <p><strong>terminate</strong> a node.</p> <p>The node <code>n</code> will be removed from the set of current embedders. This <code>n</code> must be the result of a previous <code>cv.slot()</code> or <code>cv.node()</code> action.</p> </details> <details class=abstract><summary>cv.resume()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>cv</span><span class=o>.</span><span class=n>resume</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
</pre></div> </td></tr></table> <p><strong>resume</strong> a node.</p> <p>If you resume a non-slot node, you add it again to the set of embedders. No new node will be created.</p> <p>If you resume a slot node, it will be added to the set of current embedders. No new slot will be created.</p> </details> <details class=abstract><summary>cv.feature()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>cv</span><span class=o>.</span><span class=n>feature</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>,</span> <span class=o>...</span> <span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Add <strong>node features</strong>.</p> <p>The features are passed as a list of keyword arguments.</p> <p>These features are added to node <code>n</code>. This <code>n</code> must be the result of a previous <code>cv.slot()</code> or <code>cv.node()</code> action.</p> <p><strong>If a feature value is <code>None</code> it will not be added!</strong></p> <p>The features are passed as a list of keyword arguments.</p> </details> <details class=abstract><summary>cv.edge()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>cv</span><span class=o>.</span><span class=n>edge</span><span class=p>(</span><span class=n>nf</span><span class=p>,</span> <span class=n>nt</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>,</span> <span class=o>...</span> <span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Add <strong>edge features</strong>.</p> <p>You need to pass two nodes, <code>nf</code> (<em>from</em>) and <code>nt</code> (<em>to</em>). Together these specify an edge, and the features will be applied to this edge.</p> <p>You may pass values that are <code>None</code>, and a corresponding edge will be created. If for all pairs <code>nf</code>, <code>nt</code> the value is <code>None</code>, an edge without values will be created. For every <code>nf</code>, such a feature essentially specifies a set of nodes <code>{ nt }</code>.</p> <p>The features are passed as a list of keyword arguments.</p> </details> <details class=abstract><summary>cv.meta()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>cv</span><span class=o>.</span><span class=n>meta</span><span class=p>(</span><span class=n>feature</span><span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>,</span> <span class=o>...</span> <span class=p>,</span> <span class=n>name</span><span class=o>=</span><span class=n>value</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Add, modify, delete metadata fields of features.</p> <p><code>feature</code> is the feature name.</p> <p>If a <code>value</code> is <code>None</code>, that <code>name</code> will be deleted from the metadata fields.</p> <p>A bare <code>cv.meta(feature)</code> will remove the feature from the metadata.</p> <p>If you modify the field <code>valueType</code> of a feature, that feature will be added or removed from the set of <code>intFeatures</code>. It will be checked whether you specify either <code>int</code> or <code>str</code>.</p> </details> <details class=abstract><summary>cv.occurs()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>occurs</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>occurs</span><span class=p>(</span><span class=n>featureName</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Returns True if the feature with name <code>featureName</code> occurs in the resulting data, else False. If you have assigned None values to a feature, that will count, i.e. that feature occurs in the data.</p> <p>If you add feature values conditionally, it might happen that some features will not be used at all. For example, if your conversion produces errors, you might add the error information to the result in the form of error features.</p> <p>Later on, when the errors have been weeded out, these features will not occur any more in the result, but then TF will complain that such is feature is declared but not used. At the end of your director you can remove unused features conditionally, using this function.</p> </details> <details class=abstract><summary>cv.linked()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>ss</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>linked</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Returns the slots <code>ss</code> to which a node is currently linked.</p> <p>If you construct non-slot nodes without linking them to slots, they will be removed when TF validates the collective result of the action methods.</p> <p>If you want to prevent that, you can insert an extra slot, but in order to do so, you have to detect that a node is still unlinked.</p> <p>This action is precisely meant for that.</p> </details> <details class=abstract><summary>cv.active()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>isActive</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>active</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Returns whether the node <code>n</code> is currently active, i.e. in the set of embedders. </p> <p>If you construct your nodes in a very dynamic way, it might be hard to keep track for each node whether it has been created, terminated, or resumed, in other words, whether it is active or not.</p> <p>This action is provides a direct and precise way to know whether a node is active.</p> </details> <details class=abstract><summary>cv.activeTypes()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>nTypes</span> <span class=o>=</span> <span class=n>cv</span><span class=o>.</span><span class=n>activeTypes</span><span class=p>()</span>
</pre></div> </td></tr></table> <p>Returns the node types of the currently active nodes, i.e. the embedders.</p> </details> <details class=abstract><summary>cv.get()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>cv</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>feature</span><span class=p>,</span> <span class=n>n</span><span class=p>)</span>
<span class=n>cv</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>feature</span><span class=p>,</span> <span class=n>nf</span><span class=p>,</span> <span class=n>nt</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Retrieve feature values.</p> <p><code>feature</code> is the name of the feature.</p> <p>For node features, <code>n</code> is the node which carries the value.</p> <p>For edge features, <code>nf, nt</code> is the pair of from-to nodes which carries the value.</p> </details> <details class=hint open=open><summary>Example</summary><p>Follow the <a href=https://nbviewer.jupyter.org/github/annotation/banks/blob/master/programs/convert.ipynb>conversion tutorial</a></p> <p>Or study a more involved example for <a href=https://github.com/Nino-cunei/oldbabylonian/blob/master/programs/tfFromATF.py>Old Babylonian</a></p> </details> </details> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../../Model/Search/ title=Search class="md-flex md-footer-nav__link md-footer-nav__link--prev head-type" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> Search </span> </div> </a> <a href=../CreateTF/ title=Pattern class="md-flex md-footer-nav__link md-footer-nav__link--next head-type" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> Pattern </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-disclaimer> The content of this site is produced under responsibility of project <b>annotation/text-fabric</b> and is subject to change. </div> <div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> customised by <a href=https://github.com/Dans-labs>Dans-labs</a> </div> </div> <div class=md-footer-dans> <div>DANS is an institute of KNAW and NWO</div> <div> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)"><img class=md-footer-dans__img src=../../assets/images/DANS.gif height=50></a> <a target=_blank href=https://www.knaw.nl/en><img src=../../assets/images/knaw.png height=50></a> <a target=_blank href=https://www.nwo.nl/en><img src=../../assets/images/nwo.png height=50></a> </div> <div><i>Driven by data</i></div> </div> <link rel=stylesheet href=../../assets/fonts/font-awesome.css> <ul class=md-footer-social> <li class=md-footer-social__li> <a href=http://eepurl.com/dvnr8D class="md-footer-social__link fa fa-envelope-square"> <span class=md-footer-social__desc>Newsletter</span> </a> </li> <li class=md-footer-social__li> <a href=https://twitter.com/DANSKNAW class="md-footer-social__link fa fa-twitter-square"> <span class=md-footer-social__desc>Twitter</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.youtube.com/user/DANSDataArchiving class="md-footer-social__link fa fa-youtube-square"> <span class=md-footer-social__desc>YouTube</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.linkedin.com/company/dans class="md-footer-social__link fa fa-linkedin-square"> <span class=md-footer-social__desc>LinkedIn</span> </a> </li> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.5bceb883.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> </body> </html>