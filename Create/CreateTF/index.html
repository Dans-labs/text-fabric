



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, and a binary format for (ancient) text plus (linguistic) annotations.">
      
      
      
        <meta name="author" content="Dirk Roorda">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/icon/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.1">
    
    
      
        <title>Make TF - Text-Fabric</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#create-a-tf-dataset" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Text-Fabric" class="md-header-nav__button md-logo">
          
            <img src="../../images/tficon-small.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Text-Fabric
              </span>
              <span class="md-header-nav__topic">
                Make TF
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/tficon-small.png" width="48" height="48">
      
    </span>
    Text-Fabric
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../News/" title="News" class="md-nav__link">
      News
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Corpora/" title="Corpora" class="md-nav__link">
      Corpora
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Faq/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Stats/" title="Stats (overall)" class="md-nav__link">
      Stats (overall)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsBase/" title="Stats (TF-base)" class="md-nav__link">
      Stats (TF-base)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsSearch/" title="Stats (TF-search)" class="md-nav__link">
      Stats (TF-search)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsApps/" title="Stats (TF-apps)" class="md-nav__link">
      Stats (TF-apps)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsServer/" title="Stats (TF-server)" class="md-nav__link">
      Stats (TF-server)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Model
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Model
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Data-Model/" title="Data" class="md-nav__link">
      Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/File-formats/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Optimizations/" title="Tweaks" class="md-nav__link">
      Tweaks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Search/" title="Search" class="md-nav__link">
      Search
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Api
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Api
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/General/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Bhsa/" title="Hebrew Bible" class="md-nav__link">
      Hebrew Bible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Peshitta/" title="Peshitta" class="md-nav__link">
      Peshitta
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Syrnt/" title="Syriac New Testament" class="md-nav__link">
      Syriac New Testament
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Cunei/" title="Cuneiform Tablets" class="md-nav__link">
      Cuneiform Tablets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Transcription/" title="Auxiliary" class="md-nav__link">
      Auxiliary
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Kernel/" title="Kernel" class="md-nav__link">
      Kernel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Common/" title="Common" class="md-nav__link">
      Common
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Create
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Create
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Make TF
      </label>
    
    <a href="./" title="Make TF" class="md-nav__link md-nav__link--active">
      Make TF
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#analysis" title="Analysis" class="md-nav__link">
    Analysis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-types" title="Node types" class="md-nav__link">
    Node types
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-define-slots" title="Step 1: define slots" class="md-nav__link">
    Step 1: define slots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-add-higher-level-nodes" title="Step 2: add higher level nodes" class="md-nav__link">
    Step 2: add higher level nodes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#containment" title="Containment" class="md-nav__link">
    Containment
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-3-map-nodes-to-sets-of-words" title="Step 3: map nodes to sets of words" class="md-nav__link">
    Step 3: map nodes to sets of words
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" title="Features" class="md-nav__link">
    Features
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-4-the-actual-text" title="Step 4: the actual text" class="md-nav__link">
    Step 4: the actual text
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-more-features" title="Step 5: more features" class="md-nav__link">
    Step 5: more features
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata" title="Metadata" class="md-nav__link">
    Metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-6-sectioning-metadata" title="Step 6: sectioning metadata" class="md-nav__link">
    Step 6: sectioning metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-text-formats" title="Step 7: text formats" class="md-nav__link">
    Step 7: text formats
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-out-tf" title="Writing out TF" class="md-nav__link">
    Writing out TF
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-8-invoke-tfsave" title="Step 8: invoke TF.save()" class="md-nav__link">
    Step 8: invoke TF.save()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-time-usage" title="First time usage" class="md-nav__link">
    First time usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enriching-your-corpus" title="Enriching your corpus" class="md-nav__link">
    Enriching your corpus
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-9-add-the-new-feature" title="Step 9: add the new feature" class="md-nav__link">
    Step 9: add the new feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-10-use-the-new-feature" title="Step 10: use the new feature" class="md-nav__link">
    Step 10: use the new feature
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ExampleText/" title="Example data" class="md-nav__link">
      Example data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#analysis" title="Analysis" class="md-nav__link">
    Analysis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-types" title="Node types" class="md-nav__link">
    Node types
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-define-slots" title="Step 1: define slots" class="md-nav__link">
    Step 1: define slots
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-add-higher-level-nodes" title="Step 2: add higher level nodes" class="md-nav__link">
    Step 2: add higher level nodes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#containment" title="Containment" class="md-nav__link">
    Containment
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-3-map-nodes-to-sets-of-words" title="Step 3: map nodes to sets of words" class="md-nav__link">
    Step 3: map nodes to sets of words
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" title="Features" class="md-nav__link">
    Features
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-4-the-actual-text" title="Step 4: the actual text" class="md-nav__link">
    Step 4: the actual text
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-more-features" title="Step 5: more features" class="md-nav__link">
    Step 5: more features
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata" title="Metadata" class="md-nav__link">
    Metadata
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-6-sectioning-metadata" title="Step 6: sectioning metadata" class="md-nav__link">
    Step 6: sectioning metadata
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-text-formats" title="Step 7: text formats" class="md-nav__link">
    Step 7: text formats
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-out-tf" title="Writing out TF" class="md-nav__link">
    Writing out TF
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-8-invoke-tfsave" title="Step 8: invoke TF.save()" class="md-nav__link">
    Step 8: invoke TF.save()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#first-time-usage" title="First time usage" class="md-nav__link">
    First time usage
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enriching-your-corpus" title="Enriching your corpus" class="md-nav__link">
    Enriching your corpus
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-9-add-the-new-feature" title="Step 9: add the new feature" class="md-nav__link">
    Step 9: add the new feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-10-use-the-new-feature" title="Step 10: use the new feature" class="md-nav__link">
    Step 10: use the new feature
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dans-labs/text-fabric/edit/master/docs/Create/CreateTF.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="create-a-tf-dataset">Create a TF dataset<a class="headerlink" href="#create-a-tf-dataset" title="Permanent link">&para;</a></h1>
<p>We describe a conversion of an <a href="../ExampleText">example text</a> to Text-Fabric.</p>
<p>This is not meant as a recipe, but as a description of the pieces of information
that have to be assembled from the source text, and how to compose that into a
Text-Fabric resource, which is a set of features.</p>
<p>How you turn this insight into an executable program is dependent on how the
source text is encoded and organized.</p>
<p>Have a look at the following examples:</p>
<ul>
<li>the book of John in the Greek New Testament from XML-TEI to TF:
  <a href="https://github.com/pthu/pilot">pilot</a>;</li>
<li>the Syriac New Testament:
  <a href="https://github.com/ETCBC/linksyr/tree/master/programs/tfgen">linksyr</a>;</li>
<li>the Greek New Testament:
  <a href="https://github.com/Dans-labs/text-fabric-data/blob/master/programs/tfFromSblgnt.ipynb">tfFromSblgnt</a>;</li>
<li>Sanskrit writings:
  <a href="https://github.com/Dans-labs/text-fabric-data/blob/master/programs/tfFromSanskrit.ipynb">tfFromSanskrit</a>;</li>
<li>Sanskrit writings:
  <a href="https://github.com/Dans-labs/text-fabric-data/blob/master/programs/tfFromSumerianTEI.ipynb">tfFromSumerianTEI</a>.</li>
</ul>
<h2 id="analysis">Analysis<a class="headerlink" href="#analysis" title="Permanent link">&para;</a></h2>
<p>The text is a string with a little bit of structure. Some of that structure
gives us our node types, and other bits give us the features.</p>
<h2 id="node-types">Node types<a class="headerlink" href="#node-types" title="Permanent link">&para;</a></h2>
<p>The text is divided into main sections, subsections, paragraphs, and sentences.
The sentences are divided into words by white-space and/or punctuation.</p>
<h3 id="step-1-define-slots">Step 1: define slots<a class="headerlink" href="#step-1-define-slots" title="Permanent link">&para;</a></h3>
<p>Make a copy of the text, strip out all headings and split the string on
white-space. We get a sequence of "words". These words may contain punctuation or
other non-alphabetical signs. We do not care for the moment.</p>
<p>The indexes in this sequence, from 1 till the number of "words", are our slots.
Let's say we have <em>S</em> of them.</p>
<p>We start constructing a mapping from numbers to node types, called <code>otype</code>.</p>
<p>We assign to numbers 1, ... ,<em>S</em> the string <code>word</code>.</p>
<p>That means, we have now <em>S</em> nodes, all of type <code>word</code>.</p>
<h3 id="step-2-add-higher-level-nodes">Step 2: add higher level nodes<a class="headerlink" href="#step-2-add-higher-level-nodes" title="Permanent link">&para;</a></h3>
<p>For each level of <em>section</em>, <em>subsection</em> and <em>paragraph</em>, make new nodes. Nodes
are numbers, and we start making new nodes directly after <em>S</em>.</p>
<p>We have 4 main sections, so we extend the <code>otype</code> mapping as follows:</p>
<ul>
<li><em>S+1</em> ~ <code>section</code></li>
<li><em>S+2</em> ~ <code>section</code></li>
<li><em>S+3</em> ~ <code>section</code></li>
<li><em>S+4</em> ~ <code>section</code></li>
</ul>
<p>Likewise, we have 11 subsections, so we continue extending:</p>
<ul>
<li><em>S+5</em> ~ <code>subsection</code></li>
<li><em>S+6</em> ~ <code>subsection</code></li>
<li>...</li>
<li><em>S+16</em> ~ <code>subsection</code></li>
</ul>
<p>We do the same for <code>paragraph</code>.</p>
<p>And after that, we break the paragraphs up into sentences (split on <code>.</code>), and we
add so many nodes of type <code>sentence</code>.</p>
<p>The mapping <code>otype</code> is called a <em>feature</em> of nodes. Any mapping that assigns
values to nodes, is called a (node-)feature.</p>
<h2 id="containment">Containment<a class="headerlink" href="#containment" title="Permanent link">&para;</a></h2>
<p>We also have to record which words belong to which nodes. This information takes
the shape of a mapping of nodes to sets of nodes. Or, with a slight twist, we
have to lists pairs of nodes <code>(n, w)</code> such that the word <code>w</code> "belongs" to the
node <code>n</code>.</p>
<p>This is in fact a set of edges (pairs of nodes are edges), and a set of edges is
an <em>edge feature</em>. In general it is possible to assign values to pairs of nodes,
but for our containment information we just assign the empty value to every pair
we have in our set.</p>
<p>The edge feature that records the containment of words in nodes, is called
<code>oslots</code>.</p>
<h3 id="step-3-map-nodes-to-sets-of-words">Step 3: map nodes to sets of words<a class="headerlink" href="#step-3-map-nodes-to-sets-of-words" title="Permanent link">&para;</a></h3>
<p>For each of the higher level nodes <code>n</code> (the ones beyond <em>S</em>) we have to
lookup/remember/compute which words <code>w</code> belong to it, and put that in the
<code>oslots</code> mapping:</p>
<ul>
<li><em>S+1</em> ~ { 1, 2, 3, ... x, ..., y }</li>
<li><em>S+2</em> ~ { y+1, y+2, ... } ...</li>
<li><em>S+5</em> ~ { 1, 2, 3, ... x }</li>
<li><em>S+6</em> ~ { x+1, x+2, ...}</li>
<li>...</li>
</ul>
<h2 id="features">Features<a class="headerlink" href="#features" title="Permanent link">&para;</a></h2>
<p>Now we have two features, a node feature <code>otype</code> and an edge feature <code>oslots</code>.
This is merely the skeleton of our text, the <em>warp</em> so to speak. It contains the
textual positions, and the information what the meaningful chunks are.</p>
<p>Now it is time to weave the information in.</p>
<h3 id="step-4-the-actual-text">Step 4: the actual text<a class="headerlink" href="#step-4-the-actual-text" title="Permanent link">&para;</a></h3>
<p>Remember the words with punctuation attached? We can split every word into three
parts:</p>
<ul>
<li>text: the alphabetical characters in between</li>
<li>prefix: the non-alphabetical leading characters</li>
<li>suffix: the non-alphabetical trailing characters</li>
</ul>
<p>We can make three node features, <code>prefix</code>, <code>text</code>, and <code>suffix</code>. Remember that
node features are mappings from numbers to values.</p>
<p>Here we go:</p>
<ul>
<li><code>prefix[1]</code> is the prefix of word 1</li>
<li><code>suffix[1]</code> is the suffix of word 1</li>
<li><code>text[1]</code> is the text of word 1</li>
<li>...</li>
</ul>
<p>And so for all words.</p>
<h3 id="step-5-more-features">Step 5: more features<a class="headerlink" href="#step-5-more-features" title="Permanent link">&para;</a></h3>
<p>For the sections and subsections we can make a feature <code>heading</code>, in which we
store the headings of those sections.</p>
<ul>
<li><code>heading[S+1]</code> is <code>Introduction</code></li>
<li><code>heading[S+5]</code> is <code>Basic concepts</code></li>
<li><code>heading[S+16]</code> is <code>Identity</code></li>
<li>...</li>
</ul>
<p>For paragraphs we can figure out their sequence number within the subsection,
and store that in a feature <code>number</code>:</p>
<ul>
<li><code>number[p]</code> is 1 if <code>p</code> is the node corresponding to the first paragraph in a
    subsection.</li>
</ul>
<p>If you want absolute paragraph numbers, you can just add a feature for that:</p>
<ul>
<li><code>abs_number[p]</code> is 23 if <code>p</code> is the node corresponding to the 23th paragraph
    in the corpus.</li>
</ul>
<h2 id="metadata">Metadata<a class="headerlink" href="#metadata" title="Permanent link">&para;</a></h2>
<p>You can supply metadata to all node features and edge features. Metadata must be
given as a dictionary, where the keys are the names of the features in your
dataset, and the values are themselves key-value pairs, where the values are
just strings.</p>
<p>You can mention where the source data comes from, who did the conversion, and
you can give a description of the intention of this feature and the shape of its
values.</p>
<p>Later, when you save the whole dataset as TF, Text-Fabric will insert a
<code>datecreated</code> key-value.</p>
<p>You can also supply metadata for <code>''</code> (the empty key). These key-values will be
added to all other features. Here you can put stuff that pertains to the dataset
as a whole, such as information about decisions that have been taken.</p>
<p>You should also provide some special metadata to the key <code>otext</code>. This feature
has no data, only metadata. It is not a node feature, not an edge feature, but a
<em>config</em> feature. <code>otext</code> is responsible for sectioning and text representation.</p>
<p>If you specify <code>otext</code> well, the <a href="../Api#text">T-API</a> can make use of it, so that
you have convenient, generic functions to get at your sections and to serialize
your text in different formats.</p>
<h3 id="step-6-sectioning-metadata">Step 6: sectioning metadata<a class="headerlink" href="#step-6-sectioning-metadata" title="Permanent link">&para;</a></h3>
<ul>
<li><code>sectionTypes: 'section,subsection,paragraph'</code></li>
<li><code>sectionFeatures: 'title,title,number'</code></li>
</ul>
<p>This tells Text-Fabric that node type <code>section</code> corresponds to section level 1,
<code>subsection</code> to level 2, and <code>paragraph</code> to level 3. Moreover, Text-Fabric knows
that the heading of sections at level 1 and 2 are in the feature <code>title</code>, and
that the heading at level 3 is in the feature <code>number</code>.</p>
<h3 id="step-7-text-formats">Step 7: text formats<a class="headerlink" href="#step-7-text-formats" title="Permanent link">&para;</a></h3>
<ul>
<li><code>fmt:text-orig-plain: '{prefix}{text}{suffix}'</code></li>
<li><code>fmt:text-orig-bare: '{text} '</code></li>
<li><code>fmt:text-orig-angle: ' &lt;{text}&gt; '</code></li>
</ul>
<p>Here you have provided a bunch of text representation formats to Text-Fabric.
The names of those formats are up to you, and the values as well.</p>
<p>If you have a list of word nodes, say <code>ws</code>, then a user of your corpus can ask
Text-Fabric:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;text-orig-plain&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>This will spit out the full textual representation of those words, including
the non-alphabetical stuff in their prefixes and suffixes.</p>
<p>The second format, <code>text-orig-bare</code>, will leave prefix and suffix out.</p>
<p>And if for whatever reason you need to wrap each word in angle brackets, you can
achieve that with <code>text-orig-angle</code>.</p>
<p>As an example of how text formats come in handy, have a look at the text formats
that have been designed for Hebrew:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>fmt:lex-orig-full: &#39;{g_lex_utf8} &#39;
fmt:lex-orig-plain: &#39;{lex_utf8} &#39;
fmt:lex-trans-full: &#39;{g_lex} &#39;
fmt:lex-trans-plain: &#39;{lex0} &#39;
fmt:text-orig-full: &#39;{qere_utf8/g_word_utf8}{qere_trailer_utf8/trailer_utf8}&#39;
fmt:text-orig-full-ketiv: &#39;{g_word_utf8}{trailer_utf8}&#39;
fmt:text-orig-plain: &#39;{g_cons_utf8}{trailer_utf8}&#39;
fmt:text-trans-full: &#39;{qere/g_word}{qere_trailer/trailer}&#39;
fmt:text-trans-full-ketiv: &#39;{g_word}{trailer}&#39;
fmt:text-trans-plain: &#39;{g_cons}{trailer}&#39;
</pre></div>
</td></tr></table>

<p>Note that the actual text-formats are not baked in into TF, but are supplied by
you, the corpus designer.</p>
<h2 id="writing-out-tf">Writing out TF<a class="headerlink" href="#writing-out-tf" title="Permanent link">&para;</a></h2>
<p>Once you have assembled your features and metadata as data structures in memory,
you can use <a href="../Api#saving-features"><code>TF.save()</code></a> to write out your data as a bunch
of Text-Fabric files.</p>
<h3 id="step-8-invoke-tfsave">Step 8: invoke TF.save()<a class="headerlink" href="#step-8-invoke-tfsave" title="Permanent link">&para;</a></h3>
<p>The call to make is</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">nodeFeatures</span><span class="o">=</span><span class="p">{},</span> <span class="n">edgeFeatures</span><span class="o">=</span><span class="p">{},</span> <span class="n">metaData</span><span class="o">=</span><span class="p">{},</span> <span class="n">module</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>Here you supply for <code>nodeFeatures</code> a dictionary keyed by your node feature
names and valued by the feature data of those features.</p>
<p>Likewise for the edge features.</p>
<p>And the metadata you have composed goes into the <code>metaData</code> parameter.</p>
<p>Finally, the <code>module</code> parameter dictates where on your system the TF-files will
be written.</p>
<h2 id="first-time-usage">First time usage<a class="headerlink" href="#first-time-usage" title="Permanent link">&para;</a></h2>
<p>When you start using your new dataset in Text-Fabric, you'll notice that there
is some upfront computation going on. Text-Fabric computes derived data,
especially about the relationships between nodes based on the slots they occupy.
All that information comes from <code>oslots</code>. The <code>oslots</code> information is very
terse, and using it directly would result in a hefty performance penalty.
Likewise, all feature data will be read from the textual <code>.tf</code> files,
represented in memory as a dictionary, and then that dictionary will be
serialized and gzipped into a <code>.tfx</code> file in a hidden directory <code>.tf</code>. These
<code>.tfx</code> files load an order of magnitude faster than the original <code>.tf</code> files.
Text-Fabric uses the timestamps of the files to determine whether the <code>.tfx</code>
files are outdated and need to be regenerated again.</p>
<p>This whole machinery is invisible to you, the user, except for the delay at
first time use.</p>
<h2 id="enriching-your-corpus">Enriching your corpus<a class="headerlink" href="#enriching-your-corpus" title="Permanent link">&para;</a></h2>
<p>Maybe a linguistic friend of yours has a tool to determine the part of speech of
each word in the text.</p>
<p>Using TF itself it is not that hard to create a new feature <code>pos</code>, that maps
each word node to the part of speech of that word.</p>
<p>See for example how Cody Kingham
<a href="https://github.com/ETCBC/lingo/blob/master/heads/Heads2TF.ipynb">adds</a>
the notion of linguistic head to the BHSA
datasource of the Hebrew Bible.</p>
<h3 id="step-9-add-the-new-feature">Step 9: add the new feature<a class="headerlink" href="#step-9-add-the-new-feature" title="Permanent link">&para;</a></h3>
<p>Once you have the feature <code>pos</code>, provide a bit of metadata, and call</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
  <span class="n">nodeFeatures</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">posData</span><span class="p">},</span>
  <span class="n">metaData</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;pos&#39;</span><span class="p">:</span> <span class="n">posMetaData</span><span class="p">},</span>
  <span class="n">module</span><span class="o">=</span><span class="s1">&#39;linguistics&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>

<p>You get a TF module consisting of one feature <code>pos.tf</code> in the <code>linguistics</code>
directory.</p>
<p>Maybe you have more linguistic features to add. You do not have to create those
features alongside the original corpus. It is perfectly possible to leave the
corpus alone in its own GitHub repo, and write your new features in another
repo.</p>
<p>Users can just obtain the corpus and your linguistic module separately. When
they call their Text-Fabric, they can point it to both locations, and
Text-Fabric treats it as one dataset.</p>
<h3 id="step-10-use-the-new-feature">Step 10: use the new feature<a class="headerlink" href="#step-10-use-the-new-feature" title="Permanent link">&para;</a></h3>
<p>The call to <a href="../Api#importing-and-calling-text-fabric"><code>TF=Fabric()</code></a> looks like this</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span> <span class="o">=</span> <span class="n">Fabric</span><span class="p">(</span><span class="n">locations</span><span class="o">=</span><span class="p">[</span><span class="n">corpusLocation</span><span class="p">,</span> <span class="n">moduleLocation</span><span class="p">])</span>
</pre></div>
</td></tr></table>

<p>All feature files found at these locations are loadable in your session.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../Server/Common/" title="Common" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Common
              </span>
            </div>
          </a>
        
        
          <a href="../ExampleText/" title="Example data" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Example data
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>