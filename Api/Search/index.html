<!doctype html><html lang=en class=no-js> <head><link href=https://fonts.gstatic.com rel=preconnect crossorigin><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, a binary format, an API, and apps for (ancient) text plus (linguistic) annotations."><link href=https://annotation.github.io/text-fabric/Api/Search/ rel=canonical><meta name=author content="Dirk Roorda"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../images/icon/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-dans-4.4.1"><title>S - Search - Text-Fabric</title><link rel=stylesheet href=../../assets/stylesheets/application.27a306a7.css><script src=../../assets/javascripts/modernizr.74668098.js></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700|Glegoo:300,400,400i,700|Ubuntu+Mono&display=swap"><style>.body-type,body,input{font-family:"Open Sans",sans-serif}.head-type,h1,h2,h3,h4,h5{font-family:"Glegoo",serif}.code-type,code,kbd,pre{font-family:"Ubuntu Mono",monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#search tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)" class="md-header-nav__button md-logo"> <img src=../../assets/images/DANS.gif height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-header-nav__button md-logo"> <img src=../../images/tf-small.png height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title head-type" data-md-component=title> <span class=md-header-nav__topic> Text-Fabric </span> <span class=md-header-nav__topic> S - Search </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. title=Home class="md-tabs__link head-type"> Home </a> </li> <li class=md-tabs__item> <a href=../../About/Install/ title=About class="md-tabs__link head-type"> About </a> </li> <li class=md-tabs__item> <a href=../../Use/Use/ title=Use class="md-tabs__link head-type"> Use </a> </li> <li class=md-tabs__item> <a href=../App/ title=Api class="md-tabs__link md-tabs__link--active head-type"> Api </a> </li> <li class=md-tabs__item> <a href=../../Writing/Arabic/ title=Writing class="md-tabs__link head-type"> Writing </a> </li> <li class=md-tabs__item> <a href=../../Model/Data-Model/ title=Model class="md-tabs__link head-type"> Model </a> </li> <li class=md-tabs__item> <a href=../../Create/Convert/ title=Create class="md-tabs__link head-type"> Create </a> </li> <li class=md-tabs__item> <a href=../../Server/Kernel/ title=Server class="md-tabs__link head-type"> Server </a> </li> <li class=md-tabs__item> <a href=../../Code/Overview/ title=Code class="md-tabs__link head-type"> Code </a> </li> <li class=md-tabs__item> <a href=../../Implementation/Apps/ title=Implementation class="md-tabs__link head-type"> Implementation </a> </li> </ul> </div> </nav> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title head-type md-nav__title--site" for=__drawer> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-nav__button md-logo"> <img src=../../images/tf-small.png width=48 height=48> </a> Text-Fabric </label> <div class=md-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class="md-nav__link head-type"> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class="md-nav__link head-type" for=nav-2> About </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-2> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../About/Install/ title=Install class="md-nav__link head-type"> Install </a> </li> <li class=md-nav__item> <a href=../../About/Corpora/ title=Corpora class="md-nav__link head-type"> Corpora </a> </li> <li class=md-nav__item> <a href=../../About/Faq/ title=Faq class="md-nav__link head-type"> Faq </a> </li> <li class=md-nav__item> <a href=../../About/News/ title=News class="md-nav__link head-type"> News </a> </li> <li class=md-nav__item> <a href=../../About/Older/ title=Older class="md-nav__link head-type"> Older </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class="md-nav__link head-type" for=nav-3> Use </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-3> Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Use/Use/ title=Use class="md-nav__link head-type"> Use </a> </li> <li class=md-nav__item> <a href=../../Use/Browser/ title=Browser class="md-nav__link head-type"> Browser </a> </li> <li class=md-nav__item> <a href=../../Use/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Use/UseX/ title=Advanced class="md-nav__link head-type"> Advanced </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class="md-nav__link head-type" for=nav-4> Api </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-4> Api </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../App/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class="md-nav__link head-type" for=nav-4-2> Data flow </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-2> Data flow </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../Repo/ title=Repo class="md-nav__link head-type"> Repo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3 checked> <label class="md-nav__link head-type" for=nav-4-3> Core </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-3> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Fabric/ title=TF class="md-nav__link head-type"> TF </a> </li> <li class=md-nav__item> <a href=../Features/ title="E/F - (Edge-)Features" class="md-nav__link head-type"> E/F - (Edge-)Features </a> </li> <li class=md-nav__item> <a href=../Nodes/ title="N - Nodes" class="md-nav__link head-type"> N - Nodes </a> </li> <li class=md-nav__item> <a href=../Locality/ title="L - Locality" class="md-nav__link head-type"> L - Locality </a> </li> <li class=md-nav__item> <a href=../Text/ title="T - Text" class="md-nav__link head-type"> T - Text </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active head-type" for=__toc> S - Search </label> <a href=./ title="S - Search" class="md-nav__link md-nav__link--active head-type"> S - Search </a> <nav class="md-nav md-nav--secondary"> <label class="md-nav__title head-type" for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#search-api title="Search API" class="md-nav__link head-type"> Search API </a> </li> <li class=md-nav__item> <a href=#search-results title="Search results" class="md-nav__link head-type"> Search results </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Computed/ title="C - Computed" class="md-nav__link head-type"> C - Computed </a> </li> <li class=md-nav__item> <a href=../Misc/ title=Miscellaneous class="md-nav__link head-type"> Miscellaneous </a> </li> <li class=md-nav__item> <a href=../Lib/ title=Lib class="md-nav__link head-type"> Lib </a> </li> <li class=md-nav__item> <a href=../Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class="md-nav__link head-type" for=nav-4-4> Compose </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-4> Compose </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Compose/ title=Combining class="md-nav__link head-type"> Combining </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class="md-nav__link head-type" for=nav-5> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-5> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Writing/Arabic/ title=Arabic class="md-nav__link head-type"> Arabic </a> </li> <li class=md-nav__item> <a href=../../Writing/Hebrew/ title=Hebrew class="md-nav__link head-type"> Hebrew </a> </li> <li class=md-nav__item> <a href=../../Writing/Syriac/ title=Syriac class="md-nav__link head-type"> Syriac </a> </li> <li class=md-nav__item> <a href=../../Writing/Transcription/ title=Transcription class="md-nav__link head-type"> Transcription </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class="md-nav__link head-type" for=nav-6> Model </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-6> Model </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Model/Data-Model/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Model/File-formats/ title=Format class="md-nav__link head-type"> Format </a> </li> <li class=md-nav__item> <a href=../../Model/Optimizations/ title=Tweaks class="md-nav__link head-type"> Tweaks </a> </li> <li class=md-nav__item> <a href=../../Model/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class="md-nav__link head-type" for=nav-7> Create </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-7> Create </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Create/Convert/ title=Convert class="md-nav__link head-type"> Convert </a> </li> <li class=md-nav__item> <a href=../../Create/CreateTF/ title=Pattern class="md-nav__link head-type"> Pattern </a> </li> <li class=md-nav__item> <a href=../../Create/ExampleText/ title="Example data" class="md-nav__link head-type"> Example data </a> </li> <li class=md-nav__item> <a href=../../Create/MQL/ title=MQL class="md-nav__link head-type"> MQL </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class="md-nav__link head-type" for=nav-8> Server </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-8> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Server/Kernel/ title=Kernel class="md-nav__link head-type"> Kernel </a> </li> <li class=md-nav__item> <a href=../../Server/Web/ title=Web class="md-nav__link head-type"> Web </a> </li> <li class=md-nav__item> <a href=../../Server/Common/ title=Common class="md-nav__link head-type"> Common </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class="md-nav__link head-type" for=nav-9> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-9> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Code/Overview/ title=Overview class="md-nav__link head-type"> Overview </a> </li> <li class=md-nav__item> <a href=../../Code/Tests/ title=Tests class="md-nav__link head-type"> Tests </a> </li> <li class=md-nav__item> <a href=../../Code/Stats/ title="Stats (overall)" class="md-nav__link head-type"> Stats (overall) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsToplevel/ title="Stats (TF-toplevel)" class="md-nav__link head-type"> Stats (TF-toplevel) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCore/ title="Stats (TF-core)" class="md-nav__link head-type"> Stats (TF-core) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsSearch/ title="Stats (TF-search)" class="md-nav__link head-type"> Stats (TF-search) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsConvert/ title="Stats (TF-convert)" class="md-nav__link head-type"> Stats (TF-convert) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCompose/ title="Stats (TF-compose)" class="md-nav__link head-type"> Stats (TF-compose) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsWriting/ title="Stats (TF-writing)" class="md-nav__link head-type"> Stats (TF-writing) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsServer/ title="Stats (TF-server)" class="md-nav__link head-type"> Stats (TF-server) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApplib/ title="Stats (TF-app support)" class="md-nav__link head-type"> Stats (TF-app support) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApps/ title="Stats (TF-apps)" class="md-nav__link head-type"> Stats (TF-apps) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsTest/ title="Stats (Tests)" class="md-nav__link head-type"> Stats (Tests) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class="md-nav__link head-type" for=nav-10> Implementation </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-10> Implementation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Implementation/Apps/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class=md-nav__item> <a href=../../Implementation/Setup/ title=Setup class="md-nav__link head-type"> Setup </a> </li> <li class=md-nav__item> <a href=../../Implementation/Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Implementation/Display/ title=Display class="md-nav__link head-type"> Display </a> </li> <li class=md-nav__item> <a href=../../Implementation/Highlight/ title=Highlight class="md-nav__link head-type"> Highlight </a> </li> <li class=md-nav__item> <a href=../../Implementation/Links/ title=Links class="md-nav__link head-type"> Links </a> </li> <li class=md-nav__item> <a href=../../Implementation/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Implementation/Tables/ title=Tables class="md-nav__link head-type"> Tables </a> </li> <li class=md-nav__item> <a href=../../Implementation/Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class="md-nav__title head-type" for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#search-api title="Search API" class="md-nav__link head-type"> Search API </a> </li> <li class=md-nav__item> <a href=#search-results title="Search results" class="md-nav__link head-type"> Search results </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/annotation/text-fabric/edit/master/docs/Api/Search.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=search>Search<a class=headerlink href=#search title="Permanent link">&para;</a></h1> <p>For a description of Text-Fabric search, go to <a href=../../Use/Search/ >Search</a></p> <details class=info open=open><summary>S</summary><p>The Search API is exposed as <code>S</code> or <code>Search</code>.</p> <p>It's main method, <code>search</code>, takes a <a href=../../Use/Search/#search-templates>search template</a> as argument. A template consists of elements that specify nodes with conditions and relations between them. The results of a search are instantiations of the search template. More precisely, each instantiation is a tuple of nodes that instantiate the elements in the template, in such a way that the relational pattern expressed in the template holds between the nodes of the result tuple.</p> </details> <h2 id=search-api>Search API<a class=headerlink href=#search-api title="Permanent link">&para;</a></h2> <p>The API for searching is a bit richer than the <code>search()</code> functions. Here is the whole interface.</p> <details class=abstract><summary>S.relationsLegend()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>relationsLegend</span><span class=p>()</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Gives dynamic help about the basic relations that you can use in your search template. It includes the edge features that are available in your dataset.</p> </details> </details> <details class=abstract><summary>S.search()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=n>query</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>shallow</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span> <span class=n>sets</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>withContext</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Searches for combinations of nodes that together match a search template. This method returns a <em>generator</em> which yields the results one by one. One result is a tuple of nodes, where each node corresponds to an <em>atom</em>-line in your <a href=../../Use/Search/#search-template-reference>search template</a>.</p> </details> <details class=info><summary>query</summary><p>The query is a search template, i.e. a string that conforms to the rules described above.</p> </details> <details class=info><summary>shallow</summary><p>If <code>True</code> or <code>1</code>, the result is a set of things that match the top-level element of the <code>query</code>.</p> <p>If <code>2</code> or a bigger number <em>n</em>, return the set of truncated result tuples: only the first <em>n</em> members of each tuple is retained.</p> <p>If <code>False</code> or <code>0</code>, a sorted list of all result tuples will be returned.</p> </details> <details class=info><summary>sets</summary><p>If not <code>None</code>, it should be a dictionary of sets, keyed by a names. In <code>query</code> you can refer to those names to invoke those sets.</p> </details> <details class=info><summary>limit</summary><p>If <code>limit</code> is a number, it will fetch only that many results.</p> </details> <details class=hint><summary>TF as Database</summary><p>By means of <code>S.search(query)</code> you can use one <code>TF</code> instance as a database that multiple clients can use without the need for each client to call the costly <code>load</code> methods. You have to come up with a process that runs TF, has all features loaded, and that can respond to queries from other processes. We call such a process a <strong>TF kernel</strong>.</p> <p>Web servers can use such a daemonized TF to build efficient controllers.</p> <p>A TF kernel and web server are included in the Text-Fabric code base. See <a href=../../Server/Kernel/ >kernel</a> and <a href=../../Server/Web/ >web</a>.</p> </details> <details class=note><summary>Generator versus tuple</summary><p>If <code>limit</code> is specified, the result is not a generator but a tuple of results.</p> </details> <details class=explanation><summary>More info on the search plan</summary><p>Searching is complex. The search template must be parsed, interpreted, and translated into a search plan. The following methods expose parts of the search process, and may provide you with useful information in case the search does not deliver what you expect.</p> </details> <details class=hint><summary>see the plan</summary><p>the method <code>S.showPlan()</code> below shows you at a glance the correspondence between the nodes in each result tuple and your search template.</p> </details> </details> <details class=abstract><summary>S.study()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>study</span><span class=p>(</span><span class=n>searchTemplate</span><span class=p>,</span> <span class=n>strategy</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>silent</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span> <span class=n>shallow</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span> <span class=n>sets</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Your search template will be checked, studied, the search space will be narrowed down, and a plan for retrieving the results will be set up.</p> <p>If your query has quantifiers, the asscociated search templates will be constructed and executed. These searches will be reported clearly.</p> </details> <details class=info><summary>searchTemplate</summary><p>The search template is a string that conforms to the rules described above.</p> </details> <details class=danger><summary>strategy</summary><p>In order to tame the performance of search, the strategy by which results are fetched matters a lot. The search strategy is an implementation detail, but we bring it to the surface nevertheless.</p> <p>To see the names of the available strategies, just call <code>S.study('', strategy='x')</code> and you will get a list of options reported to choose from.</p> <p>Feel free to experiment. To see what the strategies do, see the <a href=https://github.com/annotation/text-fabric/blob/master/tf/search/search.py>code</a>.</p> </details> <details class=info><summary>silent</summary><p>If you want to suppress most of the output, say <code>silent=True</code>.</p> </details> <details class=info><summary>shallow, sets</summary><p>As in <code>S.search()</code>.</p> </details> </details> <details class=abstract><summary>S.showPlan()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>showPlan</span><span class=p>(</span><span class=n>details</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Search results are tuples of nodes and the plan shows which part of the tuple corresponds to which part of the search template.</p> </details> <details class=info><summary>details</summary><p>If you say <code>details=True</code>, you also get an overview of the search space and a description of how the results will be retrieved.</p> </details> <details class=note><summary>after S.study()</summary><p>This function is only meaningful after a call to <code>S.study()</code>.</p> </details> </details> <details class=abstract><summary>S.tweakPerformance()</summary><details class=explanation><summary>Theory</summary><p>Before the search engine retrieves result tuples of nodes, there is a process to narrow down the search space.</p> <p>See <a href=../../Model/Search/#spinning-thin-yarns>search design</a> and remember that we use the term <em>yarn</em> for the sets of candidate nodes from which we stitch our results together.</p> <p><em>Edge spinning</em> is the process of transferring constraints on one node via edges to constraints on another node. The one node has a yarn, i.e. a set of candidate nodes, and the node at the other side of the edge has a yarn.</p> <p>If the first yarn is small, and candidates in the first yarn must be related to candidates in the second yarn, then we might be able to reduce the second yarn by computing the relation for the nodes in the small yarn and seeing which nodes you get in the second yarn. The relation corresponds to the edge, hence the term edge spinning.</p> <p>The success of edge spinning depends mainly on two factors:</p> <details class=info><summary>Size difference</summary><p>Edge spinning works best if there is a big difference in size between the candidate sets for the nodes at both sides of an edge.</p> </details> <details class=info><summary>Spread</summary><p>The spread of a relation is the number of different edges that can start from the same node or end at the same node.</p> <p>For example, the spread of the <code>equality</code> operator is just 1, but the spread of the <code>inequality</code> operator is virtually as big as the relevant yarn.</p> <p>If there are constraints on a node in one yarn, and if there is an edge between that yarn and another one, and if the spread is big, not much of the constraint can be transferred to the other yarn.</p> </details> <details class=example open=open><summary>Example</summary><p>Suppose both yarns are words, the first yarn has been constrained to verbs, and the equality relation holds must hold between the yarns. Then in all results the node from the second yarn is also a verb. So we can constrain the second yarn to verbs too.</p> <p>But if the relation is inequality, we cannot impose any additional restriction on nodes in the second yarn. All nodes in the second yarn are unequal to at least one verb.</p> </details> <p>If there is a big size difference between the two yarns, and the spread is small, a the bigger yarn will be restricted considerably.</p> <details class=info><summary>Estimating the spread</summary><p>We estimate the spreads of edges over and over again, in a series of iterations where we reduce yarns.</p> <p>An exhaustive computation would be too expensive, so we take a sample of a limited amount of relation computations. </p> </details> </details> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>tweakPerformance</span><span class=p>(</span><span class=n>yarnRatio</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>tryLimitFrom</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>tryLimitTo</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Tweaks parameters that influence the performance of the search engine.</p> <p>If you do not pass a parameter, its value will not be changed.</p> <p>If you pass <code>None</code>, its value will be reset to the default value.</p> <p>Or you can pass a value of your choosing.</p> <details class=info><summary>yarnRatio</summary><p>The <code>yarnRatio</code> is the minimal factor between the sizes of the smallest and the biggest set of candidates of the nodes at both ends of the edge. And that divided by the spread of the relation as estimated by a sample.</p> <details class=example open=open><summary>Example</summary><p>Suppose we set the yarnRatio to 1.5. Then, if we have yarns of 100,000 and 10,000 members, with a relation between them with spread 5, then 100,000 / 10,000 / 5 = 2. This is higher than the yarnRatio of 1.5, so the search engine decides that edge spinning is worth it.</p> <p>The reasoning is that the 10,000 nodes in the smallest yarn are expected to reach only 10,000 * 5 nodes in the other yarn by the relation, and so we can achieve a significant reduction.</p> </details> <p>If you have a very slow query, and you think that a bit more edge spinning helps, decrease the yarnRatio towards 0.</p> <p>If you find that a lot of queries spend too much time in edge spinning, increase the yarnRatio.</p> </details> <details class=info><summary>tryLimitFrom, tryLimitTo</summary><p>In order to determine the spreads of the relations, TF takes random samples and extrapolates the results. It takes some nodes from the set at the <em>from</em> side of an edge, and some nodes at the <em>to</em> side of the same edge, and computes in how many cases the relation holds. That is a measure for the spread.</p> <p>The parameters <code>tryLimitFrom</code> and <code>tryLimitTo</code> dictate how big these samples are. The bigger, the better the estimation of the spread. But also the more work it is.</p> <p>If you find that your queries take consistently a tad too much time, consider lowering these parameters to 10.</p> <p>If you find that the times your queries take varies a lot, increase these values to 10000.</p> </details> </details> <h2 id=search-results>Search results<a class=headerlink href=#search-results title="Permanent link">&para;</a></h2> <details class=info><summary>Preparation versus result fetching</summary><p>The method <code>S.search()</code> above combines the interpretation of a given template, the setting up of a plan, the constraining of the search space and the fetching of results.</p> <p>Here are a few methods that do actual result fetching. They must be called after a previous <code>S.search()</code> or <code>S.study()</code>.</p> </details> <details class=abstract><summary>S.count()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=n>progress</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>limit</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info><summary>Description</summary><p>Counts the results, with progress messages, optionally up to a limit.</p> </details> <details class=info><summary>progress</summary><p>Every so often it shows a progress message. The frequency is <code>progress</code> results, default every 100.</p> </details> <details class=info><summary>limit</summary><p>Fetch results up to a given <code>limit</code>, default 1000. Setting <code>limit</code> to 0 or a negative value means no limit: all results will be counted.</p> </details> <details class=note><summary>why needed</summary><p>You typically need this in cases where result fetching turns out to be (very) slow.</p> </details> <details class=caution><summary>generator versus list</summary><p><code>len(S.results())</code> does not work, because <code>S.results()</code> is a generator that delivers its results as they come.</p> </details> </details> <details class=abstract><summary>S.fetch()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>fetch</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Finally, you can retrieve the results. The result of <code>fetch()</code> is not a list of all results, but a <em>generator</em>. It will retrieve results as long as they are requested and their are still results.</p> </details> <details class=info><summary>limit</summary><p>Tries to get that many results and collects them in a tuple. So if limit is not <code>None</code>, the result is a tuple with a known length.</p> </details> <details class=example><summary>Iterating over the <code>fetch()</code> generator</summary><p>You typically fetch results by saying:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
<span class=k>for</span> <span class=n>r</span> <span class=ow>in</span> <span class=n>S</span><span class=o>.</span><span class=n>results</span><span class=p>():</span>
    <span class=n>do_something</span><span class=p>(</span><span class=n>r</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
    <span class=n>do_something_else</span><span class=p>(</span><span class=n>r</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
</pre></div> </td></tr></table> <p>Alternatively, you can set the <code>limit</code> parameter, to ask for just so many results. They will be fetched, and when they are all collected, returned as a tuple.</p> </details> <details class=example><summary>Fetching a limited amount of results</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>fetch</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>gives you the first bunch of results quickly.</p> </details> </details> <details class=abstract><summary>S.glean()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>S</span><span class=o>.</span><span class=n>glean</span><span class=p>(</span><span class=n>r</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>A search result is just a tuple of nodes that correspond to your template, as indicated by <code>showPlan()</code>. Nodes give you access to all information that the corpus has about it.</p> <p>The <code>glean()</code> function is here to just give you a first impression quickly. </p> </details> <details class=info><summary>r</summary><p>Pass a raw result tuple <code>r</code>, and you get a string indicating where it occurs, in terms of sections, and what text is associated with the results.</p> </details> <details class=example><summary>Inspecting results</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=k>for</span> <span class=n>result</span> <span class=ow>in</span> <span class=n>S</span><span class=o>.</span><span class=n>fetch</span><span class=p>(</span><span class=n>limit</span><span class=o>=</span><span class=mi>10</span><span class=p>):</span>
    <span class=k>print</span><span class=p>(</span><span class=n>S</span><span class=o>.</span><span class=n>glean</span><span class=p>(</span><span class=n>result</span><span class=p>))</span>
</pre></div> </td></tr></table> <p>is a handy way to get an impression of the first bunch of results.</p> </details> <details class=hint><summary>Universal</summary><p>This function works on all tuples of nodes, whether they have been obtained by search or not.</p> </details> <details class=hint><summary>More ways of showing results</summary><p>If you work in one of the <a href=../../About/Corpora/ >corpora</a> for which there is a TF app, you will be provided with more powerful methods <code>show()</code> and <code>table()</code> to display your results.</p> </details> </details> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../Text/ title="T - Text" class="md-flex md-footer-nav__link md-footer-nav__link--prev head-type" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> T - Text </span> </div> </a> <a href=../Computed/ title="C - Computed" class="md-flex md-footer-nav__link md-footer-nav__link--next head-type" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> C - Computed </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-disclaimer> The content of this site is produced under responsibility of project <b>annotation/text-fabric</b> and is subject to change. </div> <div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> customised by <a href=https://github.com/Dans-labs>Dans-labs</a> </div> </div> <div class=md-footer-dans> <div>DANS is an institute of KNAW and NWO</div> <div> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)"><img class=md-footer-dans__img src=../../assets/images/DANS.gif height=50></a> <a target=_blank href=https://www.knaw.nl/en><img src=../../assets/images/knaw.png height=50></a> <a target=_blank href=https://www.nwo.nl/en><img src=../../assets/images/nwo.png height=50></a> </div> <div><i>Driven by data</i></div> </div> <link rel=stylesheet href=../../assets/fonts/font-awesome.css> <ul class=md-footer-social> <li class=md-footer-social__li> <a href=http://eepurl.com/dvnr8D class="md-footer-social__link fa fa-envelope-square"> <span class=md-footer-social__desc>Newsletter</span> </a> </li> <li class=md-footer-social__li> <a href=https://twitter.com/DANSKNAW class="md-footer-social__link fa fa-twitter-square"> <span class=md-footer-social__desc>Twitter</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.youtube.com/user/DANSDataArchiving class="md-footer-social__link fa fa-youtube-square"> <span class=md-footer-social__desc>YouTube</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.linkedin.com/company/dans class="md-footer-social__link fa fa-linkedin-square"> <span class=md-footer-social__desc>LinkedIn</span> </a> </li> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.f780ca69.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> </body> </html>