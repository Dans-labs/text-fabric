



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, and a binary format for (ancient) text plus (linguistic) annotations.">
      
      
      
        <meta name="author" content="Dirk Roorda">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>Text-Fabric - Text-Fabric</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#text-fabric-api" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Text-Fabric" class="md-header-nav__button md-logo">
          
            <img src="../../images/tf-small.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              Text-Fabric
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/tf-small.png" width="48" height="48">
      
    </span>
    Text-Fabric
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../News/" title="News" class="md-nav__link">
      News
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Api
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Api
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Text-Fabric
      </label>
    
    <a href="./" title="Text-Fabric" class="md-nav__link md-nav__link--active">
      Text-Fabric
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#loading" title="Loading" class="md-nav__link">
    Loading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#navigating-nodes" title="Navigating nodes" class="md-nav__link">
    Navigating nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#locality" title="Locality" class="md-nav__link">
    Locality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text" title="Text" class="md-nav__link">
    Text
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sections" title="Sections" class="md-nav__link">
    Sections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#book-names-and-languages" title="Book names and languages" class="md-nav__link">
    Book names and languages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text-representation" title="Text representation" class="md-nav__link">
    Text representation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching" title="Searching" class="md-nav__link">
    Searching
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-templates" title="Search templates" class="md-nav__link">
    Search templates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#relational-operators" title="Relational operators" class="md-nav__link">
    Relational operators
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-results" title="Search results" class="md-nav__link">
    Search results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-features" title="Node features" class="md-nav__link">
    Node features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge-features" title="Edge features" class="md-nav__link">
    Edge features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messaging" title="Messaging" class="md-nav__link">
    Messaging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-features" title="Saving features" class="md-nav__link">
    Saving features
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clearing-the-cache" title="Clearing the cache" class="md-nav__link">
    Clearing the cache
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mql" title="MQL" class="md-nav__link">
    MQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computed-data" title="Computed data" class="md-nav__link">
    Computed data
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Bhsa/" title="Hebrew Bible" class="md-nav__link">
      Hebrew Bible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Cunei/" title="Cuneiform Tablets" class="md-nav__link">
      Cuneiform Tablets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Lib/" title="Auxiliary" class="md-nav__link">
      Auxiliary
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Model
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Model
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Data-Model/" title="Data" class="md-nav__link">
      Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/File-formats/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Optimizations/" title="Tweaks" class="md-nav__link">
      Tweaks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Create
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Create
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Create/CreateTF/" title="Make TF" class="md-nav__link">
      Make TF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Create/ExampleText/" title="Example data" class="md-nav__link">
      Example data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Details
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Details
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Search/" title="Search" class="md-nav__link">
      Search
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#loading" title="Loading" class="md-nav__link">
    Loading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#navigating-nodes" title="Navigating nodes" class="md-nav__link">
    Navigating nodes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#locality" title="Locality" class="md-nav__link">
    Locality
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#text" title="Text" class="md-nav__link">
    Text
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sections" title="Sections" class="md-nav__link">
    Sections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#book-names-and-languages" title="Book names and languages" class="md-nav__link">
    Book names and languages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#text-representation" title="Text representation" class="md-nav__link">
    Text representation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching" title="Searching" class="md-nav__link">
    Searching
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#search-templates" title="Search templates" class="md-nav__link">
    Search templates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#relational-operators" title="Relational operators" class="md-nav__link">
    Relational operators
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#search-results" title="Search results" class="md-nav__link">
    Search results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#node-features" title="Node features" class="md-nav__link">
    Node features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#edge-features" title="Edge features" class="md-nav__link">
    Edge features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messaging" title="Messaging" class="md-nav__link">
    Messaging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-features" title="Saving features" class="md-nav__link">
    Saving features
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#clearing-the-cache" title="Clearing the cache" class="md-nav__link">
    Clearing the cache
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mql" title="MQL" class="md-nav__link">
    MQL
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#computed-data" title="Computed data" class="md-nav__link">
    Computed data
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dans-labs/text-fabric/edit/master/docs/Api/General.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="text-fabric-api">Text-Fabric API<a class="headerlink" href="#text-fabric-api" title="Permanent link">&para;</a></h1>
<details class="note"><summary>Tutorial</summary><p>The tutorials for the
<a href="http://nbviewer.jupyter.org/github/etcbc/bhsa/blob/master/tutorial/start.ipynb">Hebrew Bible</a>
and the
<a href="http://nbviewer.jupyter.org/github/nino-cunei/tutorials/blob/master/start.ipynb">Uruk Cuneiform Tablets</a>
put the Text-Fabric API on show for two distinguished (and vastly distinct) corpora.</p></details><details class="note" open="open"><summary>Generic API</summary><p>This is the API of Text-Fabric in general.
Text-Fabric has no baked in knowledge of particular corpora.</p><p>However, Text-Fabric comes with several additions that make working
with specific corpora easier.</p><ul><li>Hebrew Bible: <a href="../Bhsa">BHSA</a></li><li>Proto-cuneiform tablets from Uruk: <a href="../Cunei">Cunei</a></li></ul></details><h2 id="loading">Loading<a class="headerlink" href="#loading" title="Permanent link">&para;</a></h2>
<details class="abstract"><summary>TF=Fabric()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">tf.fabric</span> <span class="kn">import</span> <span class="n">Fabric</span>
<span class="n">TF</span> <span class="o">=</span> <span class="n">Fabric</span><span class="p">(</span><span class="n">locations</span><span class="o">=</span><span class="n">directories</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="n">subdirectories</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Text-Fabric is initialized for a corpus. It will search a set of directories
and catalog all <code>.tf</code> files it finds there.
These are the features you can subsequently load.</p><p>Here <code>directories</code> and <code>subdirectories</code> are strings with directory names
separated by newlines, or iterables of directories.</p></details><details class="info"><summary>locations, modules</summary><p>The directories specified in <code>locations</code> will be searched for <code>modules</code>, which
are paths that will be appended to the paths in <code>locations</code>.</p><p>All <code>.tf</code> files (non-recursively) in any <code>module</code> will be added to the feature
set to be loaded in this session. The order in <code>modules</code> is important, because
if a feature occurs in multiple modules, the last one will be chosen. In this
way you can easily override certain features in one module by features in an
other module of your choice.</p></details><details class="note"><summary>otext@ in modules</summary><p>If modules contain features with a name starting with <code>otext@</code>, then the format
definitions in these features will be added to the format definitions in the
regular <code>otext</code> feature (which is a WARP feature). In this way, modules that
define new features for text representation, also can add new formats to the
Text-API.</p></details><details class="hint"><summary>Defaults</summary><p>The <code>locations</code> list has a few defaults:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>~/Downloads/text-fabric-data
~/text-fabric-data
~/github/text-fabric-data
</pre></div>
</td></tr></table>
<p>So if you have stored your main Text-Fabric dataset in
<code>text-fabric-data</code> in one of these directories
you do not have to pass a location to Fabric.</p><p>The <code>modules</code> list defaults to <code>['']</code>. So if you leave it out, Text-Fabric will
just search the paths specified in <code>locations</code>.</p></details><details class="info"><summary>silent</summary><p>If <code>silent=True</code> is passed, banners and normal progress messages are suppressed.</p></details></details><details class="abstract"><summary>TF.explore()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="n">TF</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">features</span>
</pre></div>
</td></tr></table>
<p>or</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">explore</span><span class="p">(</span><span class="n">silent</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">TF</span><span class="o">.</span><span class="n">featureSets</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>This will give you a dictionary of all available features by kind. The kinds
are: <em>nodes</em>, <em>edges</em>, <em>configs</em>, <em>computeds</em>.</p></details><details class="info"><summary>silent</summary><p>With <code>silent=False</code> a message containing the total numbers of features is issued.</p></details><details class="info"><summary>show</summary><p>The resulting dictionary is delivered in <code>TF.featureSets</code>, but if you say
<code>show=True</code>, the dictionary is returned as function result.</p></details></details><details class="abstract"><summary>api=TF.load()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">api</span> <span class="o">=</span> <span class="n">TF</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Reads the features indicated by <code>features</code> and loads them in memory
ready to be used in the rest of the program.</p></details><details class="info"><summary>features</summary><p><code>features</code> is a string containing space separated feature names, or an
iterable of feature names. The feature names are just the names of <code>.tf</code> files
without directory information and without extension.</p></details><details class="info"><summary>add</summary><p>If later on you want load more features, you can either:</p><ul><li>add the features to the original <code>load()</code> statement and just run it again</li><li>make a new statement: <code>TF.load(newfeatures, add=True)</code>. The new features will
    be added to the same api, so you do not have to to call
    <code>api.makeAvailableIn(globals())</code> again after this!</li></ul></details><details class="info"><summary>silent</summary><p>The features will be loaded rather silently, most messages will be suppressed.
Time consuming operations will always be announced, so that you know what
Text-Fabric is doing. If <code>silent=True</code> is passed, all informational messages
will be suppressed. This is handy I you want to load data as part of other
methods, on-the-fly.</p></details></details><details class="abstract"><summary>api.makeAvailableIn(globals())</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">api</span><span class="o">.</span><span class="n">makeAvailableIn</span><span class="p">(</span><span class="nb">globals</span><span class="p">())</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>This method will export every member of the API (such as <code>N</code>, <code>F</code>, <code>E</code>, <code>L</code>, <code>T</code>,
<code>info</code>) to the global namespace. From now on, we will omit the <code>api.</code> in our
documentation.</p></details><details class="explanation"><summary>Contents of the API</summary><p>After having loaded the features by <code>api = TF.load(...)</code>, the <code>api</code> harbours
your Text-Fabric API. You can access node feature <code>mydata</code> by <code>api.F.mydata.v(node)</code>, edge
feature <code>mylink</code> by <code>api.E.mylink.f(node)</code>, and so on.</p><p>If you are working with a single data source in your program, it is a bit
tedious to write the initial <code>api.</code> all the time.
By this methodd you can avoid that.</p></details><details class="hint"><summary>Longer names</summary><p>There are also longer names which can be used as aliases to the single capital
letters. This might or might not improve the readability of your program.</p><table><thead><tr><th>short name</th><th>long name</th></tr></thead><tbody><tr><td><code>N</code></td><td><code>Nodes</code></td></tr><tr><td><code>F</code></td><td><code>Feature</code></td></tr><tr><td><code>Fs</code></td><td><code>FeatureString</code></td></tr><tr><td><code>Fall</code></td><td><code>AllFeatures</code></td></tr><tr><td><code>E</code></td><td><code>Edge</code></td></tr><tr><td><code>Es</code></td><td><code>EdgeString</code></td></tr><tr><td><code>Eall</code></td><td><code>AllEdges</code></td></tr><tr><td><code>C</code></td><td><code>Computed</code></td></tr><tr><td><code>Cs</code></td><td><code>ComputedString</code></td></tr><tr><td><code>Call</code></td><td><code>AllComputeds</code></td></tr><tr><td><code>L</code></td><td><code>Locality</code></td></tr><tr><td><code>T</code></td><td><code>Text</code></td></tr><tr><td><code>S</code></td><td><code>Search</code></td></tr></tbody></table></details></details><details class="abstract"><summary>ignored</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">api</span><span class="o">.</span><span class="n">ignored</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>If you want to know which features were found but ignored (because the feature
is also present in another, later, location), you can use this attribute
to inspect the ignored features and their locations.</p></details></details><details class="abstract"><summary>loadLog()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">api</span><span class="o">.</span><span class="n">loadlog</span><span class="p">()</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>After loading you can view all messages using this method.
It also shows the messages that have been suppressed due to <code>silent=True</code>.</p></details></details><h2 id="navigating-nodes">Navigating nodes<a class="headerlink" href="#navigating-nodes" title="Permanent link">&para;</a></h2>
<details class="abstract"><summary>N()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">N</span><span class="p">():</span>
    <span class="n">action</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>The result of <code>N()</code> is a generator that walks through all nodes in the
<em>canonical order</em> (see below).
Iterating over <code>N()</code> delivers you all words and structural elements of
your corpus in a very natural order.</p></details><details class="explanation"><summary>Walking nodes</summary><p>Most processing boils down to walking through the nodes by visiting node sets in
a suitable order. Occasionally, during the walk you might want to visit
embedding or embedded nodes to glean some feature information from them.</p></details><details class="hint"><summary>More ways of walking</summary><p>Later, under <em>Features</em> there is another convenient way to walk through
nodes.</p></details></details><details class="explanation"><summary>canonical order</summary><p>The canonical order is a way to sort the nodes in your corpus in such a way
that you can enumerate all nodes in the order you encounter them if you
walk through your corpus.</p><p>Briefly this means:</p><ul><li>embedder nodes come before the nodes that lie embedded in them;</li><li>earlier stuff comes before later stuff,</li><li>if a verse coincides with a sentence, the verse comes before the sentence,
    because verses generally contain sentences and not the other way round;</li><li>if two objects are intersecting, but none embeds the other, the one with the
    smallest slot that does not occur in the other, comes first.</li></ul><details class="example"><summary>first things first, big things first</summary><p>That means, roughly, that you start with a
book node (Genesis), then a chapter node (Genesis 1), then a verse node, Genesis
1:1, then a sentence node, then a clause node, a phrase node, and the first word
node. Then follow all word nodes in the first phrase, then the phrase node of
the second phrase, followed by the word nodes in that phrase. When ever you
enter a higher structure, you will first get the node corresponding to that
structure, and after that the nodes corresponding to the building blocks of that
structure.</p></details><p>This concept follows the intuition that slot sets with smaller elements come
before slot set with bigger elements, and embedding slot sets come before
embedded slot sets. Hence, if you enumerate a set of nodes that happens to
constitute a tree hierarchy based on slot set embedding, and you enumerate those
nodes in the slot set order, you will walk the tree in pre-order.</p><p>This order is a modification of the one as described in (Doedens 1994, 3.6.3).
<img alt="fabric" src="../../images/DoedensLO.png" /></p><blockquote><p>Doedens, Crist-Jan (1994), <em>Text Databases. One Database Model and Several
Retrieval Languages</em>, number 14 in Language and Computers, Editions Rodopi,
Amsterdam, Netherlands and Atlanta, USA. ISBN: 90-5183-729-1,
<a href="http://books.google.nl/books?id=9ggOBRz1dO4C">http://books.google.nl/books?id=9ggOBRz1dO4C</a>. The order as defined by
Doedens corresponds to walking trees in post-order.</p></blockquote><p>For a lot of processing, it is handy to have a the stack of embedding elements
available when working with an element. That is the advantage of pre-order over
post-order. It is very much like SAX parsing in the XML world.</p></details><details class="abstract"><summary>sortNodes()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">sortNodes</span><span class="p">(</span><span class="n">nodeSet</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>delivers an iterable of nodes as a tuple sorted by the <em>canonical ordering</em>.</p></details><details class="info"><summary>nodeSet</summary><p>An iterable of nodes to be sorted.</p></details></details><details class="abstract"><summary>sortKey</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">nodeList</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">sortKey</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>A function that provides for each node the key to be used to sort nodes in the
canonical ordering. That means that the following two pieces of code do the same
thing:</p><p><code>sortNodes(nodeSet)</code> and <code>sorted(nodeSet, key=sortKey)</code>.</p></details><details class="example"><summary>Sorting tuples of nodes</summary><p>Handy to sort things that are not nodes themselves, but data structures with
nodes in it, e.g. search results: if <code>results</code> is a list of tuples of nodes, we
could sort them in canonical order like this:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">sorted</span><span class="p">(</span><span class="n">nodeSet</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">sortKey</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</td></tr></table>
</details></details><h2 id="locality">Locality<a class="headerlink" href="#locality" title="Permanent link">&para;</a></h2>
<details class="explanation"><summary>Local navigation</summary><p>Here are the methods by which you can navigate easily from a node to its
neighbours: parents and children, previous and next siblings.</p></details><details class="info" open="open"><summary>L</summary><p>The Locality API is exposed as <code>L</code> or <code>Locality</code>.</p></details><details class="hint"><summary>otype parameter</summary><p>In all of the following <code>L</code>-functions, if the <code>otype</code> parameter is passed, the result is filtered and
only nodes with <code>otype=nodeType</code> are retained.</p></details><details class="caution"><summary>Results of the <code>L.</code> functions are tuples, not single nodes</summary><p>Even if an <code>L</code>-function returns a single node, it is packed in a <em>tuple</em>.
  So to get the node itself, you have to dereference the tuple:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">u</span><span class="p">(</span><span class="n">node</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</td></tr></table>
</details><details class="abstract"><summary>L.u()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">u</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">otype</span><span class="o">=</span><span class="n">nodeType</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Produces an ordered tuple of nodes <strong>upward</strong>, i.e. embedder nodes.</p></details><details class="info"><summary>node</summary><p>The node whose embedder nodes will be delivered.
The result never includes <code>node</code> itself.</p></details></details><details class="abstract"><summary>L.d()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">d</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">otype</span><span class="o">=</span><span class="n">nodeType</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Produces an ordered tuple of nodes <strong>downward</strong>, i.e. embedded nodes.</p></details><details class="info"><summary>node</summary><p>The node whose embedded nodes will be delivered.
The result never includes <code>node</code> itself.</p></details></details><details class="abstract"><summary>L.n()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">n</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">otype</span><span class="o">=</span><span class="n">nodeType</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Produces an ordered tuple of adjacent <strong>next</strong> nodes.</p></details><details class="info"><summary>node</summary><p>The node whose right adjacent nodes will be delivered;
i.e. the nodes whose first slot immediately follow the last slot 
of <code>node</code>.
The result never includes <code>node</code> itself.</p></details></details><details class="abstract"><summary>L.p()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">p</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">otype</span><span class="o">=</span><span class="n">nodeType</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Produces an ordered tuple of adjacent <strong>previous</strong> nodes from <code>node</code>, i.e. nodes
whose last slot just precedes the first slot of <code>node</code>.</p></details><details class="info" open="open"><summary>Description</summary><p>Produces an ordered tuple of adjacent <strong>previous</strong> nodes.</p></details><details class="info"><summary>node</summary><p>The node whose lefy adjacent nodes will be delivered;
i.e. the nodes whose last slot immediately precede the first slot 
of <code>node</code>.</p></details></details><details class="explanation"><summary>Locality and levels</summary><p>Here is something that is very important to be aware of when using <code>sortNodes</code>
and the <code>L.d(n)</code> and <code>L.u(n)</code> methods.</p><p>When we order nodes and report on which nodes embed which other nodes, we do not
only take into account the sets of slots the nodes occupy, but also their
<em>level</em>. See <a href="#levels">levels</a> and <a href="#levels-of-node-types">text</a>.</p><p>Both the <code>L.d(n)</code> and <code>L.u(n)</code> work as follows:</p><ul><li><code>L.d(n)</code> returns nodes such that embedding nodes come before embedded nodes
    words)</li><li><code>L.u(n)</code> returns nodes such that embedded nodes come before embedding nodes
    books)</li></ul><p><strong>N.B.:</strong> Suppose you have node types <code>verse</code> and <code>sentence</code>, and usually a
verse has multiple sentences, but not vice versa. Then you expect that</p><ul><li><code>L.d(verseNode)</code> will contain sentence nodes,</li><li><code>L.d(sentenceNode)</code> will <strong>not</strong> contain verse nodes.</li></ul><p>But if there is a verse with exactly one sentence, and both have exactly the
same words, then that is a case where:</p><ul><li><code>L.d(verseNode)</code> will contain one sentence node,</li><li><code>L.d(sentenceNode)</code> will contain <strong>one</strong> verse node.</li></ul></details><h2 id="text">Text<a class="headerlink" href="#text" title="Permanent link">&para;</a></h2>
<details class="info"><summary>Overview</summary><p>Here are the functions that enable you to get the actual text in the dataset.
There are several things to accomplish here, such as</p><ul><li>getting text given book, chapter, and verse;</li><li>given a node, produce the book, chapter and verse indicators in which the node
    is contained;</li><li>handle multilingual book names;</li><li>switch between various text representations.</li></ul><p>The details of the Text API are dependent on the <em>warp</em> feature <code>otext</code>, which
is a config feature.</p></details><details class="info" open="open"><summary>T</summary><p>The Text API is exposed as <code>T</code> or <code>Text</code>.</p></details><h3 id="sections">Sections<a class="headerlink" href="#sections" title="Permanent link">&para;</a></h3>
<details class="explanation"><summary>Section levels</summary><p>In <code>otext</code> the main section levels (usually <code>book</code>, <code>chapter</code>, <code>verse</code>) can be
defined. It loads the features it needs (so you do not have to specify those
features, unless you want to use them via <code>F</code>). And finally, it makes some
functions available by which you can make handy use of that information.</p><details class="note"><summary>Section levels are generic</summary><p>In this documentation, we call the main section level <code>book</code>, the second level
<code>chapter</code>, and the third level <code>verse</code>. Text-Fabric, however, is completely
agnostic about how these levels are called. It is prepared to distinguish three
section levels, but how they are called, must be configured in the dataset. The
task of the <code>otext</code> feature is to declare which node type and feature correspond
with which section level. Text-Fabric assumes that the first section level may
have multilingual headings, but that section levels two and three have single
language headings (numbers of some kind).</p></details><details class="note"><summary>String versus number</summary><p>Chapter and verse numbers will be considered to be strings or
integers, depending on whether your dataset has declared the corresponding
feature <em>valueType</em> as <code>str</code> or as <code>int</code>.</p><p>Conceivably, other works might have chapter and verse numbers
like <code>XIV</code>, '3A', '4.5', and in those cases these numbers are obviously not
<code>int</code>s.</p></details><details class="note"><summary>otext is optional</summary><p>If <code>otext</code> is missing, the Text API will not be build. If it exists, but
does not specify sections, that part of the Text API will not be built. Likewise
for text representations.</p></details><details class="caution"><summary>levels of node types</summary><p>Usually, Text-Fabric computes the hierarchy of node types correctly, in the
sense that node types that act as containers have a lower level than node types
that act as containees. So books have the lowest level, words the highest. See
<a href="#levels">levels</a>. However, if this level assignment turns out to be wrong for
your dataset, you can configure the right order in the <em>otext</em> feature, by means
of a key <code>levels</code> with value a comma separated list of levels. Example:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>@levels=tablet,face,column,line,case,cluster,quad,comment,sign
</pre></div>
</td></tr></table>
</details></details><details class="abstract"><summary>T.sectionFromNode()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">sectionFromNode</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">lastSlot</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Returns the book/chapter/verse indications that correspond to the reference
node, which is the first or last slot belonging <code>n</code>, dependent on <code>lastSlot</code>.
The result is a tuple, consisting of the book name (in language <code>lang</code>), the
chapter number, and the verse number.</p></details><details class="info"><summary>node</summary><p>The node from which we obtain a section specification.</p></details><details class="info"><summary>lastSlot</summary><p>Whether the reference node will be the last slot contained by the <code>node</code> argument
or the first node.</p></details><details class="info"><summary>lang</summary><p>The language to be used for the section parts, as far as they are language dependent.</p></details><details class="note"><summary>crossing verse boundaries</summary><p>Sometimes a sentence or clause in a verse continue into the next verse.
In those cases, this function will return a different results for
<code>lastSlot=False</code> and <code>lastSlot=True</code>.</p></details><details class="caution"><summary>nodes outside sections</summary><p>Nodes that lie outside any book, chapter, verse will get a <code>None</code> in the
corresponding members of the returned tuple.</p></details></details><details class="abstract"><summary>T.nodeFromSection()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">nodeFromSection</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Given a <code>section</code> tuple, return the node of it.</p></details><details class="info"><summary>section</summary><p><code>section</code> consists of a book name (in language <code>lang</code>),
and a chapter number and a verse
number (both as strings or number depending on the value type of the
corresponding feature). The verse number may be left out, the result is then a
chapter node. Both verse and chapter numbers may be left out, the result is then
a book node. If all three are present, de result is a verse node.</p></details><details class="info"><summary>lang</summary><p>The language assumed for the section parts, as far as they are language dependent.</p></details></details><h3 id="book-names-and-languages">Book names and languages<a class="headerlink" href="#book-names-and-languages" title="Permanent link">&para;</a></h3>
<details class="explanation"><summary>Book names and nodes</summary><p>The names of the books may be available in multiple languages. The book names
are stored in node features with names of the form <code>book@</code><em>la</em>, where <em>la</em> is
the <a href="https://nl.wikipedia.org/wiki/ISO_639">ISO 639</a> two-letter code for that
language. Text-Fabric will always load these features.</p></details><details class="abstract"><summary>T.languages</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">languages</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>A dictionary of the languages that are available for book names.</p></details></details><details class="abstract"><summary>T.bookName()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">bookName</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>gives the name of the book in which a node occurs.</p></details><details class="info"><summary>node</summary><p>The node in question.</p></details><details class="info"><summary>lang</summary><p>The <code>lang</code> parameter is a two letter language code. The default is <code>en</code>
(English).</p><p>If there is no feature data for the language chosen, the value of the ordinary
<code>book</code> feature of the dataset will be returned.</p></details><details class="note"><summary>Works for all nodes</summary><p><code>n</code> may or may not be a book node. If not, <code>bookName()</code> retrieves the
embedding book node first.</p></details></details><details class="abstract"><summary>T.bookNode()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">bookNode</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;en&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>gives the node of the book identified by its name</p></details><details class="info"><summary>name</summary><p>The name of the book.</p></details><details class="info"><summary>lang</summary><p>The language in which the book name is supplied by the <code>name</code> parameter.</p><p>If <code>lang</code> can not be found, the value of the ordinary <code>book</code> feature of the
dataset will be used.</p><p>If <code>name</code> cannot be found in the specified language, <code>None</code> will be returned.</p></details><details class="caution"><summary>Function name follows configured section level</summary><p>If your dataset has configured section level one under an other name,
say <code>tablet</code>, then these two methods follow that name. Instead of <code>T.bookName()</code>
and <code>T.bookNode()</code> we have then <code>T.tabletName()</code> and <code>T.tabletNode()</code>.</p></details></details><h3 id="text-representation">Text representation<a class="headerlink" href="#text-representation" title="Permanent link">&para;</a></h3>
<details class="explanation"><summary>Text formats</summary><p>Text can be represented in multiple ways. We provide a number of formats with
structured names.</p><p>A format name is a string of keywords separated by <code>-</code>:</p><p><em>what</em><code>-</code><em>how</em><code>-</code><em>fullness</em><code>-</code><em>modifier</em></p><p>For Hebrew any combination of the follwoing could be useful formats:</p><table><thead><tr><th>keyword</th><th>value</th><th>meaning</th></tr></thead><tbody><tr><td><em>what</em></td><td><code>text</code></td><td>words as they belong to the text</td></tr><tr><td><em>what</em></td><td><code>lex</code></td><td>lexemes of the words</td></tr><tr><td><em>how</em></td><td><code>orig</code></td><td>in the original script (Hebrew, Greek, Syriac) (all Unicode)</td></tr><tr><td><em>how</em></td><td><code>trans</code></td><td>in (latin) transliteration</td></tr><tr><td><em>how</em></td><td><code>phono</code></td><td>in phonetic/phonological transcription</td></tr><tr><td><em>fullness</em></td><td><code>full</code></td><td>complete with accents and all diacritical marks</td></tr><tr><td><em>fullness</em></td><td><code>plain</code></td><td>with accents and diacritical marks stripped, in Hebrew only the consonants are left</td></tr><tr><td><em>modifier</em></td><td><code>ketiv</code></td><td>(Hebrew): where there is ketiv/qere, follow ketiv instead of qere (default);</td></tr></tbody></table><p>The default format is <code>text-orig-full</code>, we assume that every TF dataset defines
this format.</p><p>Remember that the formats are defined in the <code>otext</code> warp config feature of your
set, not by Text-Fabric.</p><details class="note"><summary>Freedom of names for formats</summary><p>There is complete freedom of choosing names for text formats.
They do not have to complied with the above-mentioned scheme.</p></details></details><details class="abstract"><summary>T.formats</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">formats</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Show the text representation formats that have been defined in your dataset.</p></details></details><details class="abstract"><summary>T.text()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">nodes</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Gives the text that corresponds to a bunch of nodes.</p></details><details class="info"><summary>nodes</summary><p><code>nodes</code> can be an arbitrary iterable of nodes.
No attempt will be made to sort the nodes.
If you need order, it is
better to order the nodes before you feed them to <code>T.text()</code>.</p></details><details class="info"><summary>fmt</summary><p>The format of text-representation is given with <code>fmt</code>, with default <code>text-orig-full</code>.
If the <code>fmt</code>
cannot be found, the default is taken.
If the default format is not defined in the
<code>otext</code> feature of the dataset,
the node numbers will be output instead.</p><p>This function does not give error messages, because that could easily overwhelm
the output stream, especially in a notebook.</p></details><details class="note"><summary>Non slot nodes allowed</summary><p>In most cases, the nodes fed to <code>T.text()</code> are slots, and the formats are
templates that use features that are defined for slots.</p><p>But nothing prevents you to define a format for non-slot nodes, and use features
defined for a non-slot node type.</p><p>If, for example, your slot type is <em>glyph</em>, and you want a format that renders
lexemes, which are not defined for glyphs but for words, you can just define a
format in terms of word features.</p><p>It is your responsibility to take care to use the formats for node types for
which they make sense.</p></details><details class="caution"><summary>Escape whitespace in formats</summary><p>When defining formats in <code>otext.tf</code>, if you need a newline or tab in the format,
specify it as <code>\n</code> and <code>\t</code>.</p></details></details><h2 id="searching">Searching<a class="headerlink" href="#searching" title="Permanent link">&para;</a></h2>
<details class="info"><summary>What is Text-Fabric Search?</summary><p>You can query for graph like structures in your data set. The structure you are
interested in has to be written as a <em>search template</em>, offered to <code>S.search()</code>
which returns the matching results as tuples of nodes.</p></details><details class="info" open="open"><summary>S</summary><p>The Search API is exposed as <code>S</code> or <code>Search</code>.</p></details><h3 id="search-templates">Search templates<a class="headerlink" href="#search-templates" title="Permanent link">&para;</a></h3>
<details class="info"><summary>Search primer</summary><p>A search template consists of a bunch of lines, possibly indented, that specify
objects to look for. Here is a simple example:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        word pos=verb gender=feminine number=plural
        word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>
<p>This template looks for word combinations within a sentence within chapter 2 of
either Genesis or Exodus, where one of the words is a verb and the other is a
noun. Both have a feminine inflection, but the verb is plural and the noun is
singular.</p><p>The indentation signifies embedding, i.e. containment. The two words are
contained in the same sentence, the sentence is contained in the chapter, the
chapter in the book.</p><p>The conditions you specify on book, chapter, word are all conditions in terms of
<a href="../Api#node-features">node features</a>. You can use all features in the corpus for
this.</p><p>The order of the two words is immaterial. If there are cases where the verb
follows the noun, they will be included in the results.</p><p>Also, the words do not have to be adjacent. If there are cases with words
intervening between the noun and the verb, they will be included in the results.</p><p>Speaking of results: the <code>S.search()</code> function returns its results as tuples of
nodes:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<p>With these nodes in hand, you can programmatically gather all information about
the results that the corpus provides.</p><p>If the order between the verb and the noun is important, you can specify that as
an additional constraint. You can give the words a name, and state a relational
condition. Here we state that the noun precedes the verb.</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        vb:word pos=verb gender=feminine number=plural
        nn:word pos=noun gender=feminine number=singular
nn &lt; vb
</pre></div>
</td></tr></table>
<p>This can be written a bit more economically as:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        word pos=verb gender=feminine number=plural
        &gt; word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>
<p>If you insist that the noun immediately precedes the verb, you can use a
different relational operator:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        word pos=verb gender=feminine number=plural
        :&gt; word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>
<p>There are more kinds of relational operators.</p><p>If the noun must be the first word in the sentence, you can specify it as</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      s:sentence
        w:word pos=noun gender=feminine number=singular
        &lt;: word pos=verb gender=feminine number=plural
s =: w
</pre></div>
</td></tr></table>
<p>or a bit more economically:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        =: word pos=noun gender=feminine number=singular
        &lt;: word pos=verb gender=feminine number=plural
</pre></div>
</td></tr></table>
<p>If the verb must be the last word in the sentence, you can specify it as</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      s:sentence
        word pos=noun gender=feminine number=singular
        &lt;: w:word pos=verb gender=feminine number=plural
s := w
</pre></div>
</td></tr></table>
<p>or a bit more economically:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      s:sentence
        word pos=noun gender=feminine number=singular
        &lt;: word pos=verb gender=feminine number=plural
        :=
</pre></div>
</td></tr></table>
<p>You can also use the <a href="../Api#edge-features">edge features</a> in the corpus as
relational operators as well.</p><p>Suppose we have an edge feature <code>sub</code> between clauses, such that if main clause
<em>m</em> has subordinate clauses <em>s1</em>, <em>s2</em> and <em>s3</em>, then</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>E.sub.f(m) = (s1, s2, s3)
</pre></div>
</td></tr></table>
<p>You can use this relation in search. Suppose we want to find the noun verb pair
in subordinate clauses only. We can use this template:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      m:clause
        s:clause
          word pos=verb gender=feminine number=plural
          :&gt; word pos=noun gender=feminine number=singular
m -sub&gt; s
</pre></div>
</td></tr></table>
<p>or a bit more economically:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
  chapter number=2
    clause
      -sub&gt; clause
        word    pos=verb gender=feminine number=plural
        :&gt; word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>
<p>Read <code>m -sub&gt; s</code> as: there is a <code>sub</code>-arrow from <code>m</code> to <code>s</code>.</p><p>Edge features may have values.
For example, the
<a href="https://github.com/ETCBC/parallels">crossref feature</a>
is a set of edges between parallel verses, with the levels of confidence
as values. This number is an integer between 0 and 100.
We can ask for parallel verses in an unqualified way:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref&gt; verse
</pre></div>
</td></tr></table>
<p>But we can also ask for the cases with a specific confidence:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref=90&gt; verse
</pre></div>
</td></tr></table>
<p>or cases with a high confidence:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref&gt;95&gt; verse
</pre></div>
</td></tr></table>
<p>or cases with a low confidence:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref&lt;80&gt; verse
</pre></div>
</td></tr></table>
<p>All feature conditions that you can assert on node features, you can also
assert for edge features. If an edge feature is integer valued, such as <code>crossref</code>
you can use comparisons; if it is string valued, you can use regular expressions.
In both cases you can also use the other constructs, such as</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref=66|77&gt; verse
</pre></div>
</td></tr></table>
<p>To get a more specific introduction to search, consult the search tutorials for
<a href="https://github.com/ETCBC/bhsa/blob/master/tutorial/search.ipynb">Hebrew</a> and
<a href="https://github.com/Nino-cunei/tutorials/blob/master/search.ipynb">Cuneiform</a>.</p></details><details class="info"><summary>Search template reference</summary><details class="info"><summary>General</summary><p>We have these kinds of lines in a template:</p><ul><li><em>comment</em> lines<ul><li>If a line starts with <code>#</code> it is ignored.</li><li>You cannot comment out parts of lines, only whole lines.</li></ul></li><li><em>atom</em> lines<ul><li>(simple): <strong>indent name:otype features</strong><ul><li><code>vb:word pos=verb gender=feminine</code></li><li>The indent is significant. Indent is counted as the number of white space
    characters, where tabs count for just 1. <strong>Avoid tabs!</strong>.</li><li>The <strong>name:</strong> part is optional.</li></ul></li><li>(with relop): <strong>indent op name:otype features</strong><ul><li><code>&lt;: word pos=verb gender=feminine</code></li><li>The relation operator specifies an extra constraint between a preceding atom
    and this atom.</li><li>The preceding atom may be the parent, provided we are at its first child, or
    it may the preceding sibling.</li><li>You can leave out the <strong>name:otype features</strong> bit. In that case, the
    relation holds between the preceding atom and its parent.</li></ul></li></ul></li><li><em>feature</em> lines: <strong>features</strong><ul><li>Indent is not significant. Continuation of feature constraints after a
    preceding atom line or other feature line. This way you can divide lengthy
    feature constraints over multiple lines.</li></ul></li><li><em>relation</em> lines: <strong>name operator name</strong><ul><li><code>s := w</code></li><li><code>m -sub&gt; s</code></li><li><code>m &lt;sub- s</code></li><li>Indents and spacing are ignored.</li><li>There must be white-space around the operator.</li><li>Operators that come from edge features may be enriched with values.
    See below.</li></ul></li><li><em>white-space or empty</em> lines<ul><li>Everywhere allowed.</li><li>Always ignored.</li></ul></li></ul></details><details class="info"><summary>Features</summary><p>The <strong>features</strong> above is a specification of what features with which values to
search for. This specification must be written as a white-space separated list
of <strong>feature specs</strong>.</p><p>A <strong>feature spec</strong> has the form <em>name</em> <em>valueSpec</em>, with no space between the <em>name</em>
and the <em>valueSpec</em>.
The <em>valueSpec</em> may have the following forms:</p><table><thead><tr><th>form</th><th>meaning</th></tr></thead><tbody><tr><td></td><td>feature <em>name</em> may have any value except <code>None</code></td></tr><tr><td><code>!</code></td><td>feature <em>name</em> must have value <code>None</code> (synonymous for: <em>name</em> has no value)</td></tr><tr><td><code>=</code><em>values</em></td><td>feature <em>name</em> has one of the values specified</td></tr><tr><td><code>&gt;</code><em>value</em></td><td>feature <em>name</em> must be greater than <em>value</em></td></tr><tr><td><code>&lt;</code><em>value</em></td><td>feature <em>name</em> must be less than <em>value</em></td></tr><tr><td><code>~</code><em>regular expression</em></td><td>feature <em>name</em> has a value and it matches <em>regular expression</em></td></tr></tbody></table><p>All these forms are also valid as <code>-</code><em>name</em> <em>form</em><code>&gt;</code> and <code>&lt;</code><em>name</em> <em>form</em><code>-</code>, in which case
they specify value constraints on edge features.
This is only meaningful if the edge feature is declared to have values (most edge features
do not have values).</p><p><strong>Additional constraints</strong></p><ul><li>There may be no space around the <code>=</code>, nor the <code>~</code>.</li><li><em>name</em> must be a feature name that exists in the dataset. If it references a
    feature that is not yet loaded, the feature will be loaded automatically.</li><li><em>values</em> must be a <code>|</code> separated list of feature values, no quotes. No spaces
    around the <code>|</code>. If you need a space or <code>|</code> or <code>\</code> in a value, escape it by a
    <code>\</code>. Escape tabs and newlines as <code>\t</code> and <code>\n</code>.</li><li>When comparing values with <code>&lt;</code> and <code>&gt;</code>:<ul><li><em>value</em> must be an integer (negative values allowed);</li><li>You can do numeric comparisons only on number-valued features, not on
    string-valued features.</li></ul></li><li><em>regular expression</em> must be a string that conforms to the Python
    <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax">regular axpression syntax</a><ul><li>If that syntax prescribes a<code>\</code>, you have to write it twice: <code>\</code> <code>\</code>.</li><li>If you need a space in your regular expression, you have to escape it with a
    <code>\</code>.</li><li>You can do regular expressions only on string-valued features, not on
    number-valued features.</li></ul></li></ul></details></details><h4 id="relational-operators">Relational operators<a class="headerlink" href="#relational-operators" title="Permanent link">&para;</a></h4>
<details class="info"><summary>Operator lines</summary><details class="info"><summary>Node comparison</summary><ul><li><code>=</code>: is equal (meaning the same node, a clause and a verse that occupy the
    same slots are still unequal)
    <img alt="op" src="../../images/Spatial/Spatial.001.png" /></li><li><code>#</code>: is unequal (meaning a different node, a clause and a verse that occupy
    the same slots are still unequal)
    <img alt="op" src="../../images/Spatial/Spatial.002.png" /></li><li><code>&lt;</code> <code>&gt;</code>: before and after (in the <em>canonical ordering</em>)
    <img alt="op" src="../../images/Spatial/Spatial.003.png" /></li></ul></details><details class="info"><summary>Slot comparison</summary><ul><li><code>==</code>: occupy the same slots (identical slot sets)
    <img alt="op" src="../../images/Spatial/Spatial.004.png" /></li><li><code>&amp;&amp;</code>: overlap (the intersection of both slot sets is not empty)
    <img alt="op" src="../../images/Spatial/Spatial.006.png" /></li><li><code>##</code>: occupy different slots (but they may overlap, the set of slots of the
    two are different as sets)
    <img alt="op" src="../../images/Spatial/Spatial.005.png" /></li><li><code>||</code>: occupy disjoint slots (no slot occupied by the one is also occupied by
    the other)
    <img alt="op" src="../../images/Spatial/Spatial.007.png" /></li><li><code>[[ ]]</code>: embeds and contains (slot set inclusion, in both directions)
    <img alt="op" src="../../images/Spatial/Spatial.008.png" /></li><li><code>&lt;&lt;</code> <code>&gt;&gt;</code>: before and after (with respect to the slots occupied: left ends
    before right starts and vice versa)
    <img alt="op" src="../../images/Spatial/Spatial.009.png" /></li><li><code>&lt;:</code> <code>:&gt;</code>: <em>adjacent</em> before and after (with respect to the slots occupied:
    left ends immediately before right starts and vice versa)
    <img alt="op" src="../../images/Spatial/Spatial.013.png" /></li><li><code>=:</code> left and right start at the same slot
    <img alt="op" src="../../images/Spatial/Spatial.010.png" /></li><li><code>:=</code> left and right end at the same slot
    <img alt="op" src="../../images/Spatial/Spatial.011.png" /></li><li><code>::</code> left and right start and end at the same slot
    <img alt="op" src="../../images/Spatial/Spatial.012.png" /></li></ul></details><details class="info"><summary>Nearness comparison</summary><p>Some of the adjacency relations can actually be weakened. Instead of requiring
that one slot is equal to an other slot, you can require that they are <em>k-near</em>,
i.e. they are at most <em>k</em> apart. Here are the relationships where you can do
that. Instead of typing the letter <code>k</code>, provide the actual number you want.</p><ul><li><code>&lt;k:</code> <code>:k&gt;</code>: <code>k</code>-<em>adjacent</em> before and after (with respect to the slots
    occupied: left ends <code>k</code>-near where right starts and vice versa)
    <img alt="op" src="../../images/Spatial/Spatial.017.png" /></li><li><code>=k:</code> left and right start at <code>k</code>-near slots
    <img alt="op" src="../../images/Spatial/Spatial.014.png" /></li><li><code>:k=</code> left and right end at <code>k</code>-near slots
    <img alt="op" src="../../images/Spatial/Spatial.015.png" /></li><li><code>:k:</code> left and right start and end at <code>k</code>-near slots
    <img alt="op" src="../../images/Spatial/Spatial.016.png" /></li></ul></details><details class="info"><summary>Based on edge features</summary><ul><li><p><code>-</code><em>name</em><code>&gt;</code> <code>&lt;</code><em>name</em><code>-</code>: connected by the edge feature <em>name</em></p><ul><li>in both directions;</li><li>these forms work for edges that do and do not have values;</li></ul><p><img alt="op" src="../../images/Spatial/Spatial.018.png" />
<em>   <code>-</code></em>name<em> </em>valueSpec<em><code>&gt;</code> <code>&lt;</code></em>name<em> </em>valueSpec<em><code>-</code>: connected by the edge feature </em>name*</p><ul><li>in both directions;</li><li>these forms work only for edges that do have values.</li></ul><p><img alt="op" src="../../images/Spatial/Spatial.019.png" /></p></li></ul></details></details><details class="abstract"><summary>S.relationsLegend</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">relationsLegend</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Gives dynamic help about the basic relations that you can use in your search
template. It includes the edge features that are available in your dataset.</p></details></details><details class="abstract"><summary>S.search()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchTemplate</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Searches for combinations of nodes that together match a search template.
This method returns a <em>generator</em> which yields the results one by one. One result
is a tuple of nodes, where each node corresponds to an <em>atom</em>-line in your
<a href="#search-template-introduction">search template</a>.</p></details><details class="info"><summary>searchTemplate</summary><p>The search template is a string that conforms to the rules described above.</p></details><details class="info"><summary>limit</summary><p>If <code>limit</code> is a number, it will fetch only that many results.</p></details><details class="note"><summary>Generator versus tuple</summary><p>If <code>limit</code> is specified, the result is not a generator but a tuple of results.</p></details><details class="explanation"><summary>More info on the search plan</summary><p>Searching is complex. The search template must be parsed, interpreted, and
translated into a search plan. The following methods expose parts of the search
process, and may provide you with useful information in case the search does not
deliver what you expect.</p></details><details class="hint"><summary>see the plan</summary><p>the method <code>S.showPlan()</code> below shows you at a glance the correspondence
between the nodes in each result tuple and your search template.</p></details></details><details class="abstract"><summary>S.study()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">study</span><span class="p">(</span><span class="n">searchTemplate</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Your search template will be checked, studied, the search
space will be narrowed down, and a plan for retrieving the results will be set
up.</p></details><details class="info"><summary>searchTemplate</summary><p>The search template is a string that conforms to the rules described above.</p></details><details class="danger"><summary>strategy</summary><p>In order to tame the performance of search, the strategy by which results are fetched
matters a lot.
The search strategy is an implementation detail, but we bring
it to the surface nevertheless.</p><p>To see the names of the available strategies, just call
<code>S.study('', strategy='x')</code> and you will get a list of options reported to
choose from.</p><p>Feel free to experiment. To see what the strategies do,
see the <a href="https://github.com/Dans-labs/text-fabric/blob/master/tf/search.py">code</a>.</p></details><details class="info"><summary>silent</summary><p>If you want to suppress most of the output, say <code>silent=True</code>.</p></details></details><details class="abstract"><summary>S.showPlan()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">showPlan</span><span class="p">(</span><span class="n">details</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Search results are tuples of nodes and the plan shows which part of the tuple
corresponds to which part of the search template.</p></details><details class="info"><summary>details</summary><p>If you say <code>details=True</code>, you also get an overview of the search space and a
description of how the results will be retrieved.</p></details><details class="note"><summary>after S.study()</summary><p>This function is only meaningful after a call to <code>S.study()</code>.</p></details></details><h3 id="search-results">Search results<a class="headerlink" href="#search-results" title="Permanent link">&para;</a></h3>
<details class="info"><summary>Preparation versus result fetching</summary><p>The method <code>S.search()</code> above combines the interpretation of a given
template, the setting up of a plan, the constraining of the search space
and the fetching of results.</p><p>Here are a few methods that do actual result fetching.
They must be called after a previous <code>S.search()</code> or <code>S.study()</code>.</p></details><details class="abstract"><summary>S.count()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">progress</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info"><summary>Description</summary><p>Counts the results, with progress messages, optionally up to a limit.</p></details><details class="info"><summary>progress</summary><p>Every so often it shows a progress message.
The frequency is <code>progress</code> results, default every 100.</p></details><details class="info"><summary>limit</summary><p>Fetch results up to a given <code>limit</code>, default 1000.
Setting <code>limit</code> to 0 or a negative value means no limit: all results will be
counted.</p></details><details class="note"><summary>why needed</summary><p>You typically need this in cases where result fetching turns out to
be (very) slow.</p></details><details class="caution"><summary>generator versus list</summary><p><code>len(S.results())</code> does not work, because <code>S.results()</code> is a generator
that delivers its results as they come.</p></details></details><details class="abstract"><summary>S.fetch()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Finally, you can retrieve the results. The result of <code>fetch()</code> is not a list of
all results, but a <em>generator</em>. It will retrieve results as long as they are
requested and their are still results.</p></details><details class="info"><summary>limit</summary><p>Tries to get that many results and collects them in a tuple.
So if limit is not <code>None</code>, the result is a tuple with a known length.</p></details><details class="example"><summary>Iterating over the <code>fetch()</code> generator</summary><p>You typically fetch results by saying:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">S</span><span class="o">.</span><span class="n">results</span><span class="p">():</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">do_something_else</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</td></tr></table>
<p>Alternatively, you can set the <code>limit</code> parameter, to ask for just so many
results. They will be fetched, and when they are all collected, returned as a
tuple.</p></details><details class="example"><summary>Fetching a limited amount of results</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<p>gives you the first bunch of results quickly.</p></details></details><details class="abstract"><summary>S.glean()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">S</span><span class="o">.</span><span class="n">glean</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>A search result is just a tuple of nodes that correspond to your template, as
indicated by <code>showPlan()</code>. Nodes give you access to all information that the
corpus has about it.</p><p>The <code>glean()</code> function is here to just give you a first impression quickly.  </p></details><details class="info"><summary>r</summary><p>Pass a raw result tuple <code>r</code>, and you get a string indicating where it occurs,
in terms of sections, 
and what text is associated with the results.</p></details><details class="example"><summary>Inspecting results</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">S</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">glean</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</pre></div>
</td></tr></table>
<p>is a handy way to get an impression of the first bunch of results.</p></details><details class="hint"><summary>Universal</summary><p>This function works on all tuples of nodes, whether they have been
obtained by search or not.</p></details><details class="hint"><summary>More ways of showing results</summary><p>If you work in one of the corpora for which the TF-API has been extended,
you will be provided with more powerful methods <code>show()</code> and <code>table()</code>
to display your results. See <a href="../Cunei">Cunei</a> and <a href="../Bhsa">Bhsa</a>.</p></details></details><h2 id="node-features">Node features<a class="headerlink" href="#node-features" title="Permanent link">&para;</a></h2>
<details class="info" open="open"><summary>Node Features</summary></details><details class="info" open="open"><summary>F</summary><p>The node features API is exposed as <code>F</code> (<code>Fs</code>) or <code>Feature</code> (<code>FeatureString</code>).</p></details><details class="abstract"><summary>Fall() aka AllFeatures()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Fall</span><span class="p">()</span>
<span class="n">AllFeatures</span><span class="p">()</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary></details><p>Returns a sorted list of all usable, loaded node feature names.</p></details><details class="abstract"><summary>F.<em>feature</em> aka Feature.<em>feature</em></summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">F</span><span class="o">.</span><span class="n">part_of_speech</span>
<span class="n">Feature</span><span class="o">.</span><span class="n">part_of_speech</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Returns a sub-api for retrieving data that is stored in node features.
In this example, we assume there is a feature called
<code>part_of_speech</code>.</p></details><details class="caution"><summary>Tricky feature names</summary><p>If the feature name is not
a valid python identifier, you can not use this function,
you should use <code>Fs</code> instead.</p></details></details><details class="abstract"><summary>Fs(feature) aka FeatureString(feature)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Fs</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<span class="n">FeatureString</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<span class="n">Fs</span><span class="p">(</span><span class="s1">&#39;part-of-speech&#39;</span><span class="p">)</span>
<span class="n">FeatureString</span><span class="p">(</span><span class="s1">&#39;part-of-speech&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Returns a sub-api for retrieving data that is stored in node features.</p></details><details class="info"><summary>feature</summary><p>In this example, in line 1 and 2, the feature name is contained in
the variable <code>feature</code>.</p><p>In lines 3 and 4, 
we assume there is a feature called
<code>part-of-speech</code>.
Note that this is not a valid name in Python, yet we
can work with features with such names.</p></details><details class="explanation"><summary>Both methods have identical results</summary><p>Suppose we have just issued <code>feature = 'pos'.
Then the result of</code>Fs(feature)<code>and</code>F.pos` is identical.</p><p>In most cases <code>F</code> works just fine, but <code>Fs</code> is needed in two cases:</p><ul><li>if we need to work with a feature whose name is not a valid
  Python name;</li><li>if we determine the feature we work with dynamically, at run time.</li></ul></details><details class="note"><summary>Simple forms</summary><p>In the sequel we'll give examples based on the simple form only.</p></details></details><details class="abstract"><summary>F.<em>feature</em>.v(node)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">F</span><span class="o">.</span><span class="n">part_of_speech</span><span class="o">.</span><span class="n">v</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Get the value of a <em>feature</em>, such as <code>part_of_speech</code> for a node.</p></details><details class="info"><summary>node</summary><p>The node whose value for the feature is being retrieved.</p></details></details><details class="abstract"><summary>F.<em>feature</em>.s(value)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">F</span><span class="o">.</span><span class="n">part_of_speech</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="n">F</span><span class="o">.</span><span class="n">part_of_speech</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="s1">&#39;noun&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Returns a generator of all nodes in the canonical order with a given value for a given feature.
This is an other way to walk through nodes than using <code>N()</code>.</p></details><details class="info"><summary>value</summary><p>The test value: all nodes with this value are yielded, the others pass through.</p></details><details class="example"><summary>nouns</summary><p>The second line gives you all nodes which are nouns according to the corpus.</p></details></details><details class="abstract"><summary>F.`<em>feature</em>.freqList()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">F</span><span class="o">.</span><span class="n">part_of_speech</span><span class="o">.</span><span class="n">freqList</span><span class="p">(</span><span class="n">nodeTypes</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Inspect the values of <em>feature</em> (in this example: <code>part_of_speech</code>)
and see how often they occur. The result is a
list of pairs <code>(value, frequency)</code>, ordered by <code>frequency</code>, highest frequencies
first.</p></details><details class="info"><summary>nodeTypes</summary><p>If you pass a set of nodeTypes, only the values for nodes within those
types will be counted.</p></details></details><details class="abstract"><summary>F.otype</summary><p><code>otype</code> is a special node feature and has additional capabilities.</p><details class="info" open="open"><summary>Description</summary><ul><li><code>F.otype.slotType</code> is the node type that can fill the slots (usually: <code>word</code>)</li><li><code>F.otype.maxSlot</code> is the largest slot number</li><li><code>F.otype.maxNode</code> is the largest node number</li><li><code>F.otype.all</code> is a list of all <em>otypes</em> from big to small (from books through
    clauses to words)</li><li><code>F.otype.sInterval(otype)</code> is like <code>F.otype.s(otype)</code>, but instead of
    returning you a range to iterate over, it will give you the starting and
    ending nodes of <code>otype</code>. This makes use of the fact that the data is so
    organized that all node types have single ranges of nodes as members.</li></ul></details></details><h2 id="edge-features">Edge features<a class="headerlink" href="#edge-features" title="Permanent link">&para;</a></h2>
<details class="info" open="open"><summary>Edge Features</summary></details><details class="info" open="open"><summary>E</summary><p>The edge features API is exposed as <code>E</code> (<code>Es</code>) or <code>Edge</code> (<code>EdgeString</code>).</p></details><details class="abstract"><summary>Eall() aka AllEdges()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Eall</span><span class="p">()</span>
<span class="n">AllEdges</span><span class="p">()</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary></details><p>Returns a sorted list of all usable, loaded edge feature names.</p></details><details class="abstract"><summary>E.<em>feature</em> aka Edge.<em>feature</em></summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">E</span><span class="o">.</span><span class="n">head</span>
<span class="n">Feature</span><span class="o">.</span><span class="n">head</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Returns a sub-api for retrieving data that is stored in edge features.
In this example, we assume there is a feature called
<code>head</code>.</p></details><details class="caution"><summary>Tricky feature names</summary><p>If the feature name is not
a valid python identifier, you can not use this function,
you should use <code>Es</code> instead.</p></details></details><details class="abstract"><summary>Es(feature) aka EdgeString(feature)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Es</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<span class="n">EdgeString</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
<span class="n">Es</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>
<span class="n">EdgeString</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Returns a sub-api for retrieving data that is stored in edge features.</p></details><details class="info"><summary>feature</summary><p>In this example, in line 1 and 2, the feature name is contained in
the variable <code>feature</code>.</p><p>In lines 3 and 4, 
we assume there is a feature called
<code>head</code>.</p></details><details class="explanation"><summary>Both methods have identical results</summary><p>Suppose we have just issued <code>feature = 'head'.
Then the result of</code>Es(feature)<code>and</code>E.pos` is identical.</p><p>In most cases <code>E</code> works just fine, but <code>Es</code> is needed in two cases:</p><ul><li>if we need to work with a feature whose name is not a valid
  Python name;</li><li>if we determine the feature we work with dynamically, at run time.</li></ul></details><details class="note"><summary>Simple forms</summary><p>In the sequel we'll give examples based on the simple form only.</p></details></details><details class="abstract"><summary>E.<em>feature</em>.f(node)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">E</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Get the nodes reached by <em>feature</em>-edges <strong>from</strong> a certain node.
These edges must be specified in <em>feature</em>, in this case <code>head</code>.
The result is an ordered tuple
(again, in the <em>canonical order</em>. The members of the
result are just nodes, if <code>head</code> describes edges without values. Otherwise
the members are pairs (tuples) of a node and a value.</p><p>If there are no edges from the node, the empty tuple is returned, rather than <code>None</code>.</p></details><details class="info"><summary>node</summary><p>The node <strong>from</strong> which the edges in question start.</p></details></details><details class="abstract"><summary>E.<em>feature</em>.t(node)</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">E</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Get the nodes reached by <em>feature</em>-edges <strong>to</strong> a certain node.
These edges must be specified in <em>feature</em>, in this case <code>head</code>.
The result is an ordered tuple
(again, in the <em>canonical order</em>. The members of the
result are just nodes, if <code>feature</code> describes edges without values. Otherwise
the members are pairs (tuples) of a node and a value.</p><p>If there are no edges to <code>n</code>, the empty tuple is returned, rather than <code>None</code>.</p></details><details class="info"><summary>node</summary><p>The node <strong>to</strong> which the edges in question go.</p></details></details><details class="abstract"><summary>E.<em>feature</em>.freqList()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">E</span><span class="o">.</span><span class="n">op</span><span class="o">.</span><span class="n">freqList</span><span class="p">(</span><span class="n">nodeTypesFrom</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">nodeTypesTo</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>If the edge feature has no values, simply return the number of node pairs
between an edge of this kind exists.</p><p>If the edge feature does have values, we 
inspect them
and see how often they occur. The result is a
list of pairs <code>(value, frequency)</code>, ordered by <code>frequency</code>, highest frequencies
first.</p></details><details class="info"><summary>nodeTypesFrom</summary><p>If not <code>None</code>,
only the values for edges that start from a node with type
within <code>nodeTypesFrom</code>
will be counted.</p></details><details class="info"><summary>nodeTypesTo</summary><p>If not <code>None</code>,
only the values for edges that go to a node with type
within <code>nodeTypesTo</code>
will be counted.</p></details></details><details class="abstract"><summary>E.oslots</summary><p><code>oslots</code> is a special edge feature and is mainly used to construct other parts
of the API. It has less capabilities, and you will rarely need it. It does not
have <code>.f</code> and <code>.t</code> methods, but an <code>.s</code> method instead.</p><details class="info" open="open"><summary>Description</summary><p><code>E.oslots.s(node)</code>
Gives the sorted list of slot numbers linked to a node,
or put otherwise: the slots that <strong>support</strong> that node.</p></details><details class="info"><summary>node</summary><p>The node whose slots are being delivered.</p></details></details><h2 id="messaging">Messaging<a class="headerlink" href="#messaging" title="Permanent link">&para;</a></h2>
<details class="info"><summary>Timed messages</summary><p>Error and informational messages can be issued, with a time indication.</p></details><details class="abstract"><summary>info(), error()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">tm</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Sends a message to standard output, possibly with time and newline.
<em> if <code>info()</code> is being used, the message is sent to <code>stdout</code>;
</em> if <code>error()</code> is being used, the message is sent to <code>stderr</code>;</p><p>In a Jupyter notebook, the standard error is displayed with
a reddish background colour.</p></details><details class="info"><summary>tm</summary><p>If <code>True</code>, an indicator of the elapsed time will be prepended to the message.</p></details><details class="info"><summary>nl</summary><p>If <code>True</code> a newline will be appended.</p></details></details><details class="abstract"><summary>indent()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">indent</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">reset</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Changes the level of indentation of messages and possibly resets the time.</p></details><details class="info"><summary>level</summary><p>The level of indentation, an integer.  Subsequent
<code>info()</code> and <code>error()</code> will display their messages with this indent.</p></details><details class="info"><summary>reset</summary><p>If <code>True</code>, the elapsed time to will be reset to 0 at the given level.
Timers at different levels are independent of each other.</p></details></details><h2 id="saving-features">Saving features<a class="headerlink" href="#saving-features" title="Permanent link">&para;</a></h2>
<details class="abstract"><summary>TF.save()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">nodeFeatures</span><span class="o">=</span><span class="p">{},</span> <span class="n">edgeFeatures</span><span class="o">=</span><span class="p">{},</span> <span class="n">metaData</span><span class="o">=</span><span class="p">{},</span> <span class="n">module</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>If you have collected feature data in dictionaries, keyed by the
names of the features, and valued by their feature data,
then you can save that data to <code>.tf</code> feature files on disk.</p><p>It is this easy to export new data as features:
collect the data and metadata of
the features and 
feed it in an orderly way to <code>TF.save()</code> and there you go.</p></details><details class="info"><summary>nodeFeatures</summary><p>The data of a node feature is a dictionary with nodes as keys (integers!) and
strings or numbers as (feature) values.</p></details><details class="info"><summary>edgeFeatures</summary><p>The data of an edge feature is a dictionary with nodes as keys, and sets or
dictionaries as values. These sets should be sets of nodes (integers!), and
these dictionaries should have nodes as keys and strings or numbers as values.</p></details><details class="info"><summary>metadata</summary><p>Every feature will receive metadata from <code>metaData</code>, which is a dictionary
mapping a feature name to its metadata.</p><details class="note"><summary>value types</summary><p>The type of the values should conform to <code>@valueType</code> (<code>int</code> or <code>str</code>), which
must be stated in the metadata.</p></details><details class="note"><summary>edge values</summary><p>If you save an edge feature, and there are values in that edge feature, you have
to say so, by specifying <code>edgeValues = True</code> in the metadata for that feature.</p></details><details class="note"><summary>generic metadata</summary></details><p><code>metaData</code> may also contain fields under
  the empty name. These fields will be added to all features in <code>nodeFeatures</code> and
  <code>edgeFeatures</code>.</p><details class="note"><summary>config features</summary><p>If you need to write the <em>config</em> feature <code>otext</code>,
which is a metadata-only feature, just
add the metadata under key <code>otext</code> in <code>metaData</code> and make sure
that <code>otext</code> is not a key in <code>nodeFeatures</code> nor in
<code>edgeFeatures</code>.
These fields will be written into the separate config feature <code>otext</code>,
with no data associated.</p></details></details><details class="note"><summary>save location</summary><p>The (meta)data will be written to the very last module in the list of locations
that you specified when calling <code>Fabric()</code> or to what you passed as <code>module</code> in
the same location. If that module does not exist, it will be created in the last
<code>location</code>. If both <code>locations</code> and <code>modules</code> are empty, writing will take place
in the current directory.</p></details></details><h3 id="clearing-the-cache">Clearing the cache<a class="headerlink" href="#clearing-the-cache" title="Permanent link">&para;</a></h3>
<details class="abstract"><summary>TF.clearCache()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">clearCache</span><span class="p">()</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Text-Fabric precomputes data for you, so that it can be loaded faster. If the
original data is updated, Text-Fabric detects it, and will recompute that data.</p><p>But there are cases, when the algorithms of Text-Fabric have changed, without
any changes in the data, where you might want to clear the cache of precomputed
results.</p><p>Calling this function just does it, and it is equivalent with manually removing
all <code>.tfx</code> files inside the hidden <code>.tf</code> directory inside your dataset.</p></details><details class="hint"><summary>No need to load</summary><p>It is not needed to execute a <code>TF.load()</code> first.</p></details></details><h2 id="mql">MQL<a class="headerlink" href="#mql" title="Permanent link">&para;</a></h2>
<details class="info"><summary>Data interchange with MQL</summary><p>You can interchange with MQL data. Text-Fabric can read and write MQL dumps. An
MQL dump is a text file, like an SQL dump. It contains the instructions to
create and fill a complete database.</p></details><details class="abstract"><summary>TF.exportMQL()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">exportMQL</span><span class="p">(</span><span class="n">dbName</span><span class="p">,</span> <span class="n">dirName</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Exports the complete TF dataset into single MQL database.</p></details><details class="info"><summary>dirName, dbName</summary><p>The exported file will be written to <code>dirName/dbName.mql</code>. If <code>dirName</code> starts
with <code>~</code>, the <code>~</code> will be expanded to your home directory. Likewise, <code>..</code> will
be expanded to the parent of the current directory, and <code>.</code> to the current
directory, both only at the start of <code>dirName</code>.</p></details><details class="explanation"><summary>Correspondence TF and MQL</summary><p>The resulting MQL database has the following properties with respect to the
Text-Fabric dataset it comes from:</p><ul><li>the TF <em>slots</em> correspond exactly with the MQL <em>monads</em> and have the same
    numbers; provided the monad numbers in the MQL dump are consecutive. In MQL
    this is not obligatory. Even if there gaps in the monads sequence, we will
    fill the holes during conversion, so the slots are tightly consecutive;</li><li>the TF <em>nodes</em> correspond exactly with the MQL <em>objects</em> and have the same
    numbers</li></ul></details><details class="note"><summary>Node features in MQL</summary><p>The values of TF features are of two types, <code>int</code> and <code>str</code>, and they translate
to corresponding MQL types <code>integer</code> and <code>string</code>. The actual values do not
undergo any transformation.</p><p>That means that in MQL queries, you use quotes if the feature is a string feature.
Only if the feature is a number feature, you may omit the quotes:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[word sp=&#39;verb&#39;]
[verse chapter=1 and verse=1]
</pre></div>
</td></tr></table>
</details><details class="note"><summary>Enumeration types</summary><p>It is attractive to use eumeration types for the values of a feature, whereever
possible, because then you can query those features in MQL with <code>IN</code> and without
quotes:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>[chapter book IN (Genesis, Exodus)]
</pre></div>
</td></tr></table>
<p>We will generate enumerations for eligible features.</p><p>Integer values can already be queried like this, even if they are not part of an
enumeration. So we restrict ourselves to node features with string values. We
put the following extra restrictions:</p><ul><li>the number of distinct values is less than 1000</li><li>all values must be legal C names, in practice: starting with a letter,
    followed by letters, digits, or <code>_</code>. The letters can only be plain ASCII
    letters, uppercase and lowercase.</li></ul><p>Features that comply with these restrictions will get an enumeration type.
Currently, we provide no ways to configure this in more detail.</p><details class="note"><summary>Merged enumeration types</summary><p>Instead of creating separate enumeration types for individual features,
we collect all enumerated values for all those features into one
big enumeration type.</p><p>The reason is that MQL considers equal values in different types as
distinct values. If we had separate types, we could never compare
values for different features.</p></details></details><details class="caution"><summary>Values of edge features are ignored</summary><p>There is no place for edge values in
MQL. There is only one concept of feature in MQL: object features,
which are node features.
But TF edges without values can be seen as node features: nodes are
mapped onto sets of nodes to which the edges go. And that notion is supported by
MQL:
edge features are translated into MQL features of type <code>LIST OF id_d</code>,
i.e. lists of object identifiers.</p></details><details class="caution"><summary>Legal names in MQL</summary><p>MQL names for databases, object types and features must be valid C identifiers
(yes, the computer language C). The requirements are:</p><ul><li>start with a letter (ASCII, upper-case or lower-case)</li><li>follow by any sequence of ASCII upper/lower-case letters or digits or
    underscores (<code>_</code>)</li><li>avoid being a reserved word in the C language</li></ul><p>So, we have to change names coming from TF if they are invalid in MQL. We do
that by replacing illegal characters by <code>_</code>, and, if the result does not start
with a letter, we prepend an <code>x</code>. We do not check whether the name is a reserved
C word.</p><p>With these provisos:</p><ul><li>the given <code>dbName</code> correspond to the MQL <em>database name</em></li><li>the TF <em>otypes</em> correspond to the MQL <em>objects</em></li><li>the TF <em>features</em> correspond to the MQL <em>features</em></li></ul></details><details class="hint"><summary>File size</summary><p>The MQL export is usually quite massive (500 MB for the Hebrew Bible).
It can be compressed greatly, especially by the program <code>bzip2</code>.</p></details><details class="caution"><summary>Exisiting database</summary><p>If you try to import an MQL file in Emdros, and there exists already a file or
directory with the same name as the MQL database, your import will fail
spectacularly. So do not do that. A good way to prevent it is:</p><ul><li>export the MQL to outside your <code>text-fabric-data</code> directory, e.g. to
    <code>~/Downloads</code>;</li><li>before importing the MQL file, delete the previous copy;</li></ul><details class="example"><summary>Delete existing copy</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">cd</span> ~/Downloads
rm dataset <span class="p">;</span> mql -b <span class="m">3</span> &lt; dataset.mql
</pre></div>
</td></tr></table>
</details></details></details><details class="abstract"><summary>TF.importMQL()</summary><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">TF</span><span class="o">.</span><span class="n">importMQL</span><span class="p">(</span><span class="n">mqlFile</span><span class="p">,</span> <span class="n">slotType</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">otext</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<details class="info" open="open"><summary>Description</summary><p>Converts an MQL database dump to a Text-Fabric dataset.</p></details><details class="hint"><summary>Destination directory</summary><p>It is recommended to call this <code>importMQL</code> on a TF instance called with</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">locations</span><span class="o">=</span><span class="n">targetDir</span><span class="p">,</span> <span class="n">modules</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
</pre></div>
</td></tr></table>
<p>Then the resulting features will be written in the targetDir.</p><p>In fact, the rules are exactly the same as for <code>TF.save()</code>.</p></details><details class="info"><summary>slotType</summary><p>You have to tell which object type in the MQL file acts as the slot type,
because TF cannot see that on its own.</p></details><details class="info"><summary>otext</summary><p>You can pass the information about sections and text formats as the parameter
<code>otext</code>. This info will end up in the <code>otext.tf</code> feature. Pass it as a
dictionary of keys and values, like so:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">otext</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;fmt:text-trans-plain&#39;</span><span class="p">:</span> <span class="s1">&#39;{glyphs}{trailer}&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sectionFeatures&#39;</span><span class="p">:</span> <span class="s1">&#39;book,chapter,verse&#39;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>
</details><details class="info"><summary>meta</summary><p>Likewise, you can add a dictionary of keys and values that will added to the
metadata of all features. Handy to add provenance data here:</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">meta</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;DLC&#39;</span><span class="p">,</span>
    <span class="n">datasetName</span><span class="o">=</span><span class="s1">&#39;Digital Language Corpus&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s2">&quot;That &#39;s me&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>
</details></details><h2 id="computed-data">Computed data<a class="headerlink" href="#computed-data" title="Permanent link">&para;</a></h2>
<details class="explanation"><summary>Pre-computing</summary><p>In order to make the API work, Text-Fabric prepares some data and saves it in
quick-load format. Most of this data are the features, but there is some extra
data needed for the special functions of the WARP features and the L-API.</p><p>Normally, you do not use this data, but since it is there, it might be valuable,
so we have made it accessible in the <code>C</code>-api, which we document here.</p></details><details class="abstract"><summary>C.levels.data</summary><details class="info" open="open"><summary>Description</summary><p>A sorted list of object types plus basic information about them.</p><p>Each entry in the list has the shape</p><table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>    <span class="p">(</span><span class="n">otype</span><span class="p">,</span> <span class="n">averageSlots</span><span class="p">,</span> <span class="n">minNode</span><span class="p">,</span> <span class="n">maxNode</span><span class="p">)</span>
</pre></div>
</td></tr></table>
<p>where <code>otype</code> is the name of the node type, <code>averageSlots</code> the average size of
objects in this type, measured in slots (usually words). <code>minNode</code> is the first
node of this type, <code>maxNode</code> the last, and the nodes of this node type are
exactly the nodes between these two values (including).</p></details><details class="explanation"><summary>Level computation and customization</summary><p>All node types have a level, defined by the average amount of slots object of
that type usually occupy. The bigger the average object, the lower the levels.
Books have the lowest level, words the highest level.</p><p>However, this can be overruled. Suppose you have a node type <em>phrase</em> and above
it a node type <em>cluster</em>, i.e. phrases are contained in clusters, but not vice
versa. If all phrases are contained in clusters, and some clusters have more
than one phrase, the automatic level ranking of node types works out well in
this case. But if clusters only have very small phrases, and the big phrases do
not occur in clusters, then the algorithm may assign a lower rank to clusters
than to phrases.</p><p>In general, it is too expensive to try to compute the levels in a sophisticated
way. In order to remedy cases where the algorithm assigns wrong levels, you can
add a <code>@levels</code> key to the <code>otext</code> config feature. See
<a href="#levels-of-node-types">text</a>.</p></details></details><details class="abstract"><summary>C.order.data</summary><details class="info" open="open"><summary>Description</summary><p>An <strong>array</strong> of all nodes in the correct order. This is the
order in which <code>N()</code> alias <code>Node()</code> traverses all nodes.</p></details><details class="explanation"><summary>Rationale</summary><p>To order all nodes in the <a href="#sorting-nodes">canonical ordering</a> is quite a bit of
work, and we need this ordering all the time.</p></details></details><details class="abstract"><summary>C.rank.data</summary><details class="info" open="open"><summary>Description</summary><p>An <strong>array</strong> of all indices of all nodes in the canonical order
array. It can be viewed as its inverse.</p></details><details class="explanation"><summary>Order arbitrary node sets</summary><p>I we want to order a set of nodes in the canonical ordering, we need to know
which position each node takes in the canonical order, in other words, at what
index we find it in the <a href="#order"><code>C.order.data</code></a> array.</p></details></details><details class="abstract"><summary>C.levUp.data and C.levDown.data</summary><details class="info" open="open"><summary>Description</summary><p>These tables feed the <code>L.d()</code> and <code>L.u()</code> functions.</p></details><details class="caution"><summary>Use with care</summary><p>They consist of a fair amount of megabytes, so they are heavily optimized.
It is not advisable to use them directly, it is far better to use the <code>L</code> functions.</p><p>Only when every bit of performance waste has to be squeezed out, this raw data
might be a deal.</p></details></details><details class="abstract"><summary>C.boundary.data</summary><details class="info" open="open"><summary>Description</summary><p>These tables feed the <code>L.n()</code> and <code>L.p()</code> functions.
It is a tuple consisting of <code>firstSlots</code> and <code>lastSlots</code>.
They are indexes for the first slot
and last slot of nodes.</p></details><details class="explanation"><summary>Slot index</summary><p>For each slot, <code>firstSlot</code> gives all nodes (except
slots) that start at that slot, and <code>lastSlot</code> gives all nodes (except slots)
that end at that slot.
Both <code>firstSlot</code> and <code>lastSlot</code> are tuples, and the
information for node <code>n</code> can be found at position <code>n-MaxSlot-1</code>.</p></details></details><details class="abstract"><summary>C.sections.data</summary><details class="info" open="open"><summary>Description</summary><p>Let us assume for the sake of clarity, that the node type of section level 1 is
<code>book</code>, that of level 2 is <code>chapter</code>, and that of level 3 is <code>verse</code>. And
suppose that we have features, named <code>bookHeading</code>, <code>chapterHeading</code>, and
<code>verseHeading</code> that give the names or numbers of these.</p><details class="caution"><summary>Custom names</summary><p>Note that the terms <code>book</code>, <code>chapter</code>, <code>verse</code> are not baked into Text-Fabric.
It is the corpus data, especially the <code>otext</code> config feature that
spells out the names of the sections.</p></details><p>Then <code>C.section.data</code> is a tuple of two mappings , let us call them <code>chapters</code>
and <code>verses</code>.</p><p><code>chapters</code> is a mapping, keyed by <code>book</code> <strong>nodes</strong>, and then by
by chapter <strong>headings</strong>, giving the corresponding
chapter <strong>node</strong>s as values.</p><p><code>verses</code> is a mapping, keyed by <code>book</code> <strong>nodes</strong>, and then
by chapter <strong>headings</strong>, and then by verse <strong>headings</strong>,
giving the corresponding verse <strong>node</strong>s as values.</p></details><details class="explanation"><summary>Supporting the <code>T</code>-Api</summary><p>The <code>T</code>-api is good in mapping nodes unto sections, such as books, chapters,
verses and back. It knows how many chapters each book has, and how many verses
each chapter.</p><p>The <code>T</code> api is meant to make your life easier when you have to find passage
labels by nodes or vice versa. That is why you probably never need to consult
the underlying data. But you can! That data is stored in</p></details></details><h1 id="miscellaneous">Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permanent link">&para;</a></h1>
<details class="abstract"><summary>TF.version</summary><details class="info" open="open"><summary>Description</summary><p>Contains the version number of the Text-Fabric
library.</p></details></details><details class="abstract"><summary>TF.banner</summary><details class="info" open="open"><summary>Description</summary><p>Contains the name and the version of the Text-Fabric
library.</p></details></details>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../News/" title="News" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                News
              </span>
            </div>
          </a>
        
        
          <a href="../Bhsa/" title="Hebrew Bible" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Hebrew Bible
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>