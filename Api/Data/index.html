<!doctype html><html lang=en class=no-js> <head><link href=https://fonts.gstatic.com rel=preconnect crossorigin><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, a binary format, an API, and apps for (ancient) text plus (linguistic) annotations."><link href=https://annotation.github.io/text-fabric/Api/Data/ rel=canonical><meta name=author content="Dirk Roorda"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../images/icon/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-dans-4.4.1"><title>Data - Text-Fabric</title><link rel=stylesheet href=../../assets/stylesheets/application.27a306a7.css><script src=../../assets/javascripts/modernizr.74668098.js></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700|Glegoo:300,400,400i,700|Ubuntu+Mono&display=swap"><style>.body-type,body,input{font-family:"Open Sans",sans-serif}.head-type,h1,h2,h3,h4,h5{font-family:"Glegoo",serif}.code-type,code,kbd,pre{font-family:"Ubuntu Mono",monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#adding-data-modules tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)" class="md-header-nav__button md-logo"> <img src=../../assets/images/DANS.gif height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-header-nav__button md-logo"> <img src=../../images/tf-small.png height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title head-type" data-md-component=title> <span class=md-header-nav__topic> Text-Fabric </span> <span class=md-header-nav__topic> Data </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. title=Home class="md-tabs__link head-type"> Home </a> </li> <li class=md-tabs__item> <a href=../../About/Install/ title=About class="md-tabs__link head-type"> About </a> </li> <li class=md-tabs__item> <a href=../../Use/Use/ title=Use class="md-tabs__link head-type"> Use </a> </li> <li class=md-tabs__item> <a href=../App/ title=Api class="md-tabs__link md-tabs__link--active head-type"> Api </a> </li> <li class=md-tabs__item> <a href=../../Writing/Arabic/ title=Writing class="md-tabs__link head-type"> Writing </a> </li> <li class=md-tabs__item> <a href=../../Model/Data-Model/ title=Model class="md-tabs__link head-type"> Model </a> </li> <li class=md-tabs__item> <a href=../../Create/Convert/ title=Create class="md-tabs__link head-type"> Create </a> </li> <li class=md-tabs__item> <a href=../../Server/Kernel/ title=Server class="md-tabs__link head-type"> Server </a> </li> <li class=md-tabs__item> <a href=../../Code/Overview/ title=Code class="md-tabs__link head-type"> Code </a> </li> <li class=md-tabs__item> <a href=../../Implementation/Apps/ title=Implementation class="md-tabs__link head-type"> Implementation </a> </li> </ul> </div> </nav> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title head-type md-nav__title--site" for=__drawer> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-nav__button md-logo"> <img src=../../images/tf-small.png width=48 height=48> </a> Text-Fabric </label> <div class=md-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class="md-nav__link head-type"> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class="md-nav__link head-type" for=nav-2> About </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-2> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../About/Install/ title=Install class="md-nav__link head-type"> Install </a> </li> <li class=md-nav__item> <a href=../../About/Corpora/ title=Corpora class="md-nav__link head-type"> Corpora </a> </li> <li class=md-nav__item> <a href=../../About/Faq/ title=Faq class="md-nav__link head-type"> Faq </a> </li> <li class=md-nav__item> <a href=../../About/News/ title=News class="md-nav__link head-type"> News </a> </li> <li class=md-nav__item> <a href=../../About/Older/ title=Older class="md-nav__link head-type"> Older </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class="md-nav__link head-type" for=nav-3> Use </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-3> Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Use/Use/ title=Use class="md-nav__link head-type"> Use </a> </li> <li class=md-nav__item> <a href=../../Use/Browser/ title=Browser class="md-nav__link head-type"> Browser </a> </li> <li class=md-nav__item> <a href=../../Use/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Use/UseX/ title=Advanced class="md-nav__link head-type"> Advanced </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class="md-nav__link head-type" for=nav-4> Api </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-4> Api </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../App/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2 checked> <label class="md-nav__link head-type" for=nav-4-2> Data flow </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-2> Data flow </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active head-type" for=__toc> Data </label> <a href=./ title=Data class="md-nav__link md-nav__link--active head-type"> Data </a> <nav class="md-nav md-nav--secondary"> <label class="md-nav__title head-type" for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#assumptions title=Assumptions class="md-nav__link head-type"> Assumptions </a> </li> <li class=md-nav__item> <a href=#step-by-step title="Step by step" class="md-nav__link head-type"> Step by step </a> </li> <li class=md-nav__item> <a href=#use-data title="Use data" class="md-nav__link head-type"> Use data </a> </li> <li class=md-nav__item> <a href=#exercise title=Exercise class="md-nav__link head-type"> Exercise </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Repo/ title=Repo class="md-nav__link head-type"> Repo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3> <label class="md-nav__link head-type" for=nav-4-3> Core </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-3> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Fabric/ title=TF class="md-nav__link head-type"> TF </a> </li> <li class=md-nav__item> <a href=../Features/ title="E/F - (Edge-)Features" class="md-nav__link head-type"> E/F - (Edge-)Features </a> </li> <li class=md-nav__item> <a href=../Nodes/ title="N - Nodes" class="md-nav__link head-type"> N - Nodes </a> </li> <li class=md-nav__item> <a href=../Locality/ title="L - Locality" class="md-nav__link head-type"> L - Locality </a> </li> <li class=md-nav__item> <a href=../Text/ title="T - Text" class="md-nav__link head-type"> T - Text </a> </li> <li class=md-nav__item> <a href=../Search/ title="S - Search" class="md-nav__link head-type"> S - Search </a> </li> <li class=md-nav__item> <a href=../Computed/ title="C - Computed" class="md-nav__link head-type"> C - Computed </a> </li> <li class=md-nav__item> <a href=../Misc/ title=Miscellaneous class="md-nav__link head-type"> Miscellaneous </a> </li> <li class=md-nav__item> <a href=../Lib/ title=Lib class="md-nav__link head-type"> Lib </a> </li> <li class=md-nav__item> <a href=../Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class="md-nav__link head-type" for=nav-4-4> Compose </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-4> Compose </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Compose/ title=Combining class="md-nav__link head-type"> Combining </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class="md-nav__link head-type" for=nav-5> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-5> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Writing/Arabic/ title=Arabic class="md-nav__link head-type"> Arabic </a> </li> <li class=md-nav__item> <a href=../../Writing/Hebrew/ title=Hebrew class="md-nav__link head-type"> Hebrew </a> </li> <li class=md-nav__item> <a href=../../Writing/Syriac/ title=Syriac class="md-nav__link head-type"> Syriac </a> </li> <li class=md-nav__item> <a href=../../Writing/Transcription/ title=Transcription class="md-nav__link head-type"> Transcription </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class="md-nav__link head-type" for=nav-6> Model </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-6> Model </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Model/Data-Model/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Model/File-formats/ title=Format class="md-nav__link head-type"> Format </a> </li> <li class=md-nav__item> <a href=../../Model/Optimizations/ title=Tweaks class="md-nav__link head-type"> Tweaks </a> </li> <li class=md-nav__item> <a href=../../Model/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class="md-nav__link head-type" for=nav-7> Create </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-7> Create </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Create/Convert/ title=Convert class="md-nav__link head-type"> Convert </a> </li> <li class=md-nav__item> <a href=../../Create/CreateTF/ title=Pattern class="md-nav__link head-type"> Pattern </a> </li> <li class=md-nav__item> <a href=../../Create/ExampleText/ title="Example data" class="md-nav__link head-type"> Example data </a> </li> <li class=md-nav__item> <a href=../../Create/MQL/ title=MQL class="md-nav__link head-type"> MQL </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class="md-nav__link head-type" for=nav-8> Server </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-8> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Server/Kernel/ title=Kernel class="md-nav__link head-type"> Kernel </a> </li> <li class=md-nav__item> <a href=../../Server/Web/ title=Web class="md-nav__link head-type"> Web </a> </li> <li class=md-nav__item> <a href=../../Server/Common/ title=Common class="md-nav__link head-type"> Common </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class="md-nav__link head-type" for=nav-9> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-9> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Code/Overview/ title=Overview class="md-nav__link head-type"> Overview </a> </li> <li class=md-nav__item> <a href=../../Code/Tests/ title=Tests class="md-nav__link head-type"> Tests </a> </li> <li class=md-nav__item> <a href=../../Code/Stats/ title="Stats (overall)" class="md-nav__link head-type"> Stats (overall) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsToplevel/ title="Stats (TF-toplevel)" class="md-nav__link head-type"> Stats (TF-toplevel) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCore/ title="Stats (TF-core)" class="md-nav__link head-type"> Stats (TF-core) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsSearch/ title="Stats (TF-search)" class="md-nav__link head-type"> Stats (TF-search) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsConvert/ title="Stats (TF-convert)" class="md-nav__link head-type"> Stats (TF-convert) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCompose/ title="Stats (TF-compose)" class="md-nav__link head-type"> Stats (TF-compose) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsWriting/ title="Stats (TF-writing)" class="md-nav__link head-type"> Stats (TF-writing) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsServer/ title="Stats (TF-server)" class="md-nav__link head-type"> Stats (TF-server) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApplib/ title="Stats (TF-app support)" class="md-nav__link head-type"> Stats (TF-app support) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApps/ title="Stats (TF-apps)" class="md-nav__link head-type"> Stats (TF-apps) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsTest/ title="Stats (Tests)" class="md-nav__link head-type"> Stats (Tests) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class="md-nav__link head-type" for=nav-10> Implementation </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-10> Implementation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Implementation/Apps/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class=md-nav__item> <a href=../../Implementation/Setup/ title=Setup class="md-nav__link head-type"> Setup </a> </li> <li class=md-nav__item> <a href=../../Implementation/Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Implementation/Display/ title=Display class="md-nav__link head-type"> Display </a> </li> <li class=md-nav__item> <a href=../../Implementation/Highlight/ title=Highlight class="md-nav__link head-type"> Highlight </a> </li> <li class=md-nav__item> <a href=../../Implementation/Links/ title=Links class="md-nav__link head-type"> Links </a> </li> <li class=md-nav__item> <a href=../../Implementation/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Implementation/Tables/ title=Tables class="md-nav__link head-type"> Tables </a> </li> <li class=md-nav__item> <a href=../../Implementation/Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class="md-nav__title head-type" for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#assumptions title=Assumptions class="md-nav__link head-type"> Assumptions </a> </li> <li class=md-nav__item> <a href=#step-by-step title="Step by step" class="md-nav__link head-type"> Step by step </a> </li> <li class=md-nav__item> <a href=#use-data title="Use data" class="md-nav__link head-type"> Use data </a> </li> <li class=md-nav__item> <a href=#exercise title=Exercise class="md-nav__link head-type"> Exercise </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/annotation/text-fabric/edit/master/docs/Api/Data.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=adding-data-modules>Adding data modules<a class=headerlink href=#adding-data-modules title="Permanent link">&para;</a></h1> <p>Text-Fabric supports the flow of creating research data, packaging it, distributing it, and importing in apps.</p> <h2 id=assumptions>Assumptions<a class=headerlink href=#assumptions title="Permanent link">&para;</a></h2> <p>The data sharing workflow is built around the following assumptions:</p> <details class=note><summary>main corpus app</summary><p>You work with a main corpus for which a text-fabric app is available. See <a href=../../About/Corpora/ >Corpora</a></p> </details> <details class=note><summary>versioned tf data</summary><p>The data you share consists of a set of TF features, tied to a specific <em>version</em> of the main corpus, preferably the most recent version. The new features must sit in a directory named after the version of the main corpus they correspond to.</p> </details> <details class=note><summary>local github</summary><p>The data you share must reside in a directory on your hard drive. The convention is, that you have a directory <code>github</code> under your home directory. And inside <code>github</code>, you have directories for organizations or people first, and then repositories, exactly as the online GitHub is organized. </p> <p>Your own data should be in such a repo as well, e.g.</p> <p><code>ch-jensen/Semantic-mapping-of-participants/actor/tf</code></p> <p>or</p> <p><code>etcbc/lingo/heads/tf</code></p> <p>or</p> <p><code>annotation/banks/sim/tf</code></p> </details> <details class=note><summary>synchronized with GitHub</summary><p>You must have your local repo contents synchronized with that on GitHub.</p> <p>Now other people can use your data. Whenever you push updates, users may fetch the updated data, depending on how they call up your data, see below.</p> </details> <details class=note><summary>release on GitHub</summary><p>If your data is reasonably stable, consider making an official <em>release</em> on GitHub. Then you must attach your features as a zip file to that release. Text-Fabric has a command to produce a zip file with exactly the right structure and name.</p> <p>Consider to connect your repo with <a href=https://zenodo.org>Zenodo</a>. Then every time to make a release, your repo will be archived for the long term, and you get a DOI pointing to the released version. </p> </details> <details class=note><summary>get data</summary><p>In order to get data, the only thing Text-Fabric needs to know, is a string with the organisation or person, the repository, and the path within the repository.</p> <p>Based on the string <code>{org}/{repo}/{path}</code> it will find the online repository, check the latest release, find the zip file, download and expand it to your local <code>~/text-fabric/data/{org}/{repo}/{path}</code></p> <p>If there are no releases, it will find the latest commit and use the data from there.</p> <p>But you may go back in the history, see below.</p> </details> <details class=note><summary>everywhere</summary><p>The extra data is accessible whether you work in a Jupyter notebook, or in the Text-Fabric browser. The extra features are clearly listed after the incantation in a notebook, and they show up in the pretty displays in the TF browser. And when you export data from the TF browser, all data modules are reported in the provenance section.</p> </details> <h2 id=step-by-step>Step by step<a class=headerlink href=#step-by-step title="Permanent link">&para;</a></h2> <p>When you develop your own data features, you'll probably make many changes before you take the trouble of publishing them as a zip file attached to a release/ Here we describe the easiest workflow to work with your developing data with a view to share it much less often than you modify it.</p> <details class=abstract><summary>Produce in your local GitHub folder</summary><p>You probably have a program or notebook that synthesizes a bunch of new features. It is a good idea to have that program in a version control system, and publish it on GitHub, in a repository of your choice.</p> <p>Set up that program in such a way, that your features end up in the same repository, in a folder of your choosing, but directly under a folder that corresponds with the version of the main data source against which you are building your data.</p> <p>Currently, your features only live on your computer, in your local github folder. You may or may not commit your local changes to the online GitHub. But you do not want to create a new release and attach your zipped feature data to it yet.</p> <p>We use the existing <a href=https://nbviewer.jupyter.org/github/annotation/banks/blob/master/programs/convert.ipynb>annotation/banks/tf</a> data as an example.</p> <p>We assume you have this data locally, in </p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>~/github/annotation/banks/tf
</pre></div> </td></tr></table> <p>under which there are versions such as <code>0.2</code>, which contain the actual <code>.tf</code> files.</p> <p>We are going to develop the <code>sim</code> feature, in</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>~/github/annotation/banks/sim/tf
</pre></div> </td></tr></table> </details> <details class=abstract><summary>Test the features</summary><p>When you want to load the new features, you can use the <code>mod</code> parameter:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;banks&#39;</span><span class=p>,</span> <span class=n>mod</span><span class=o>=</span><span class=n>f</span><span class=s1>&#39;annotation/banks/sim/tf&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>But TF then tries to download it from GitHub, or look it up from your <code>~/text-fabric-data</code>. Both will fail, especially when you let TF manage your <code>~/text-fabric-data</code> directory.</p> <p>You have to pass 'clone' as the checkout option: </p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;banks&#39;</span><span class=p>,</span> <span class=n>mod</span><span class=o>=</span><span class=n>f</span><span class=s1>&#39;annotation/banks/sim/tf:clone&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>The <code>clone</code> option means: use local data under <code>~/github</code>. With this set, TF looks in the right place inside your <code>~/github</code> directory. It will not go online, and not look into <code>~/text-fabric-data</code>.</p> </details> <details class=abstract><summary>Commit and push your features</summary><p>When the time comes to share your new feature data, everything is already in place to do that.</p> <details class=caution><summary>Write access</summary><p>You can only do the following steps for repositories for which you have write access, so do not try to perform this on <code>annotation/banks</code> but use a repo of your own.**</p> </details> <p>On the command line, go to the directory of your repository, and say</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span>git add --all .
git commit -m <span class=s2>&quot;data update or whatever&quot;</span>
git push origin master
</pre></div> </td></tr></table> <p>and then your data is shared in the most basic way possible. But very effectively.</p> <p>From now on, other users (and you too) can use that data by passing just the switch</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;banks&#39;</span><span class=p>,</span> <span class=n>mod</span><span class=o>=</span><span class=n>f</span><span class=s1>&#39;annotation/banks/sim/tf&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>without the <code>clone</code> option. If you do this, you get a freshly downloaded copy of your features in your <code>~/text-fabric-data</code> directory. And every time you do this again, a check for updates will be performed.</p> </details> <details class=abstract><summary>Make a release</summary><p>If you want to single out a certain commit as stable data and give it a version number, go to your repo on GitHub, click the releases link, and make a new release.</p> <p><img alt=releases src=../../images/add-releases.png></p> <p>Then click <em>Draft a new release</em></p> <p><img alt=releases src=../../images/add-draft.png></p> <p>Fill in the details, especially the release version (something like <code>0.2</code>), although nothing in the workflow depends on the exact form of the version number; you will see the release version in the provenance, though.</p> <p>Click the button <em>Publish release</em>.</p> <p>Now your data is available to others.</p> <p>Now the users of your data can refer to that copy by means of the version number. By default, the data from the latest release will be downloaded, and subsequent unreleased commits will be ignored.</p> </details> <details class=abstract><summary>Package into zip files</summary><p>If you share many features, or a whole TF dataset, it is more economical to zip that data and attach it as a binary to the release.</p> <p>It is vitally important for the TF workflows that that zip file has the right name and the right structure.</p> <p>Text-Fabric comes with a command to create that zip file for you.</p> <p>Execute the following command in your terminal:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>text-fabric-zip annotation/banks/tf
</pre></div> </td></tr></table> <p>You'll see</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5</pre></div></td><td class=code><div class=codehilite><pre><span></span>Create release data for annotation/banks/tf
Found 2 versions
zip files end up in /Users/dirk/Downloads/annotation-release/banks
zipping annotation/banks           0.1 with  10 features ==&gt; tf-0.1.zip
zipping annotation/banks           0.2 with  10 features ==&gt; tf-0.2.zip
</pre></div> </td></tr></table> <p>and as a result you have this in your Downloads folder</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span>~/Downloads/annotation-release/banks:
  tf-0.1.zip
  tf-0.2.zip
</pre></div> </td></tr></table> <p>Attach these versions, or just the newest version, to the release and publish the release.</p> <p><img alt=releases src=../../images/add-attach.png></p> <p>Zip your data with the <code>text-fabric-zip</code> command as explained above. It will look into your local github directory, pickup the features from there, zip them, and put the zip files in your Downloads folder. Then you can pick that zip file up and attach it manually to a new release of your repository on the online GitHub.</p> </details> <details class=abstract><summary>Continue developing your features</summary><p>Probably you'll make changes to your features after having published them. Then you have the cutting edge version of your features in your local github directory, and the published version in your text-fabric-data directory.</p> <p>When you make new commits, users that call up your data in the standard way, will still get the latest stable release.</p> <p>But users that say </p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;banks&#39;</span><span class=p>,</span> <span class=n>mod</span><span class=o>=</span><span class=n>f</span><span class=s1>&#39;annotation/banks/sim/tf:hot&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>will get your cutting edge latest commit.</p> </details> <h2 id=use-data>Use data<a class=headerlink href=#use-data title="Permanent link">&para;</a></h2> <p>Now we are just reading data, so the following steps you can perform literally, without fear of overwriting data.</p> <details class=abstract><summary>Check it out!</summary><p>When calling up data and a TF-app, you can go back in history: to previous releases and previous commits, using a <code>checkout</code> parameter.</p> <p>You have already seen it, and here we spell them out in greater detail.</p> <p>You can specify the checkout parameter separately for </p> <ul> <li>the TF-app code (so you can go back to previous instantiations of the TF-app)</li> <li>the main data of the app plus its standard data modules</li> <li>every data-module that you include by means of the <code>--mod=</code> parameter.</li> </ul> <p>The values of the checkout parameters tell you to use data that is:</p> <ul> <li><code>clone</code>: locally present under <code>~/github</code> in the appropriate place</li> <li><code>local</code>: locally present under <code>~/text-fabric-data</code> in the appropriate place</li> <li><code>latest</code>: from the latest online release</li> <li><code>hot</code>: from the latest online commit</li> <li><code>''</code>: (default): from the latest online release, or if there are no releases, from the latest online commit</li> <li><code>2387abc78f9de...</code>: a concrete commit hash found on GitHub (under Commits)</li> <li><code>v1.3</code>: a release tag found on GitHub (under Releases)</li> </ul> <p>You pass the checkout values as follows:</p> <ul> <li>for the TF-app: <strong>after the app name</strong>: <code>bhsa:clone</code>, <code>oldbabylonian:local</code>, <code>quran</code>. If you leave it out, it defaults to the empty string: latest release or commit.</li> <li>for the main data and standard data modules of the app: <strong>in the <code>checkout</code> parameter</strong>: <code>checkout='clone'</code>, <code>checkout='local'</code>, <code>checkout=''</code>. If you omit <code>checkout</code> out, it defaults to the empty string: latest release or commit.</li> <li>for the data that you call up as a module: <strong>after the module name</strong>: <code>annotation/banks/sim/tf:clone</code>, <code>annotation/banks/sim/tf:local</code>, <code>annotation/banks/sim/tf</code>. If you leave it out, it defaults to the empty string: latest release or commit.</li> </ul> <p>The checkout parameter can be used in the <code>use()</code> function when you call up Text-Fabric in a program (or notebook) and when you call up the text-fabric browser on the command line:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>use</span><span class=p>(</span><span class=s1>&#39;banks:clone&#39;</span><span class=p>,</span> <span class=n>checkout</span><span class=o>=</span><span class=s1>&#39;latest&#39;</span><span class=p>,</span> <span class=n>mod</span><span class=o>=</span><span class=s1>&#39;annotation/banks/sim/tf:hot&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>text-fabric banks:clone --checkout<span class=o>=</span>latest --mod<span class=o>=</span>annotation/banks/sim/tf:hot
</pre></div> </td></tr></table> <p>Note that you can pass different specifiers for the distinct portions of data and code that you want to use.</p> <p>To see it in action, consult the <a href=https://nbviewer.jupyter.org/github/annotation/tutorials/blob/master/banks/repo.ipynb>repo</a> notebook.</p> </details> <details class=abstract><summary>More about using data modules</summary><p>Suppose you have called up a data module:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>A</span> <span class=o>=</span> <span class=n>use</span><span class=p>(</span><span class=s1>&#39;banks&#39;</span><span class=p>,</span> <span class=n>mod</span><span class=o>=</span><span class=s1>&#39;annotation/banks/sim/tf&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>or</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>text-fabric banks --mod<span class=o>=</span>annotation/banks/sim/tf
</pre></div> </td></tr></table> <p>You can then use the features of the module in everywhere.</p> <p>Fill out this query:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span>word letters~th
-sim=100&gt; word
</pre></div> </td></tr></table> <p>and expand the first result in Genesis 1:1.</p> <p>The display looks like this:</p> <p><img alt=sense src=../../images/add-sim.png></p> <p>And if you export the data, the extra module is listed in the provenance.</p> <p><img alt=sense src=../../images/add-sim-prov.png></p> <details class=hint><summary>Feature display in the TF browser</summary><p>You can use new features in queries. Pretty displays will show those features automatically, because all features used in a query are displayed in the expanded view.</p> <p>If you want to see a feature that is not used in the query you can add it as a trivial search criterion.</p> <p>For example, if you want to see the <code>sense</code> feature when looking for phrases, add it like this</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span>clause
  phrase sense*
</pre></div> </td></tr></table> <p>The <code>*</code> means: always true, so it will not influence the query result set, only its display;</p> <p>In fact, the feature sense is only present on nodes of type <code>word</code>. But mentioning a feature anywhere in the query will trigger the display wherever it occurs with a non-trivial values.</p> <p>The extra data modules are also shown in the provenance listings when you export data from the browser.</p> </details> <details class=hint><summary>Feature display in a Jupyter notebook</summary><p>After the incantation, you see an overview of all features per module where they come from, linked to their documentation or repository.</p> <p>You can use the new features exactly as you are used to, with <code>F</code> and <code>E</code> (for edge features).</p> <p>They will also automatically show up in <code>pretty</code> displays, provided you have run a query using them before.</p> <p>Alternatively, you can tell which features you want to add to the display. That can be done by <a href=../App/#display><code>displaySetup()</code> and <code>displayReset()</code></a>, using the parameter <code>extraFeatures</code>.</p> </details> </details> <details class=abstract><summary>More modules at the same time</summary><p>Now that we get the hang of it, we would like to use multiple modules added to a main data source.</p> <p>We go to the <code>bhsa</code> (Hebrew Bible) and use the <code>heads</code> feature that Cody Kingham prepared in <a href=https://github.com/etcbc/lingo/tree/master/heads>etcbc/lingo/heads</a> as well as the <code>actor</code> feature that Christian Høygaard-Jensen prepared in <a href=https://github.com/ch-jensen/Semantic-mapping-of-participants>ch-jensen/Semantic-mapping-of-participants</a> We'll include it next to the valence data, by calling the TF browser like this:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>text-fabric bhsa --mod<span class=o>=</span>etcbc/valence/tf,etcbc/lingo/heads/tf,ch-jensen/Semantic-mapping-of-participants/actor/tf
</pre></div> </td></tr></table> <p>Unsurprisingly: the <code>heads</code> and <code>actor</code> features and friends are downloaded and made ready for import.</p> <p>You can test it by means of this query</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4</pre></div></td><td class=code><div class=codehilite><pre><span></span>book book=Leviticus
  phrase sense*
    phrase_atom actor=KHN
  -heads&gt; word
</pre></div> </td></tr></table> <p>Note that <code>heads</code> is an edge feature.</p> <p><img alt=sense src=../../images/add-heads.png></p> <p>In a Jupyter notebook, it goes like this:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=kn>from</span> <span class=nn>tf.app</span> <span class=kn>import</span> <span class=n>use</span>
<span class=n>A</span> <span class=o>=</span> <span class=n>use</span><span class=p>(</span>
    <span class=s1>&#39;bhsa&#39;</span><span class=p>,</span>
    <span class=n>mod</span><span class=o>=</span><span class=p>(</span>
        <span class=s1>&#39;etcbc/valence/tf,&#39;</span>
        <span class=s1>&#39;etcbc/lingo/heads/tf,&#39;</span>
        <span class=s1>&#39;ch-jensen/Semantic-mapping-of-participants/actor/tf&#39;</span>
    <span class=p>),</span>
    <span class=n>hoist</span><span class=o>=</span><span class=nb>globals</span><span class=p>(),</span>
<span class=p>)</span>
</pre></div> </td></tr></table> <p><img alt=sense src=../../images/add-incantation.png></p> <p>Now you can run the same query as before:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3
4
5
6</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>results</span> <span class=o>=</span> <span class=n>A</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=s1>&#39;&#39;&#39;</span>
<span class=s1>book book=Leviticus</span>
<span class=s1>  phrase sense*</span>
<span class=s1>    phrase_atom actor=KHN</span>
<span class=s1>  -heads&gt; word</span>
<span class=s1>&#39;&#39;&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>And let's see results in pretty display. We have to manually declare that we want to see the <code>sense</code> and <code>actor</code> feature.</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2</pre></div></td><td class=code><div class=codehilite><pre><span></span>A.displaySetup(extraFeatures=&#39;sense actor&#39;)
A.show(results, start=8, end=8, condensed=True, condenseType=&#39;verse&#39;)
</pre></div> </td></tr></table> <p>See the <a href=https://nbviewer.jupyter.org/github/annotation/tutorials/blob/master/bhsa/share.ipynb>share</a> tutorial.</p> </details> <h2 id=exercise>Exercise<a class=headerlink href=#exercise title="Permanent link">&para;</a></h2> <p>See whether you can find the quote in the Easter egg that is in <code>etcbc/lingo/easter/tf</code> !</p> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../App/ title=Apps class="md-flex md-footer-nav__link md-footer-nav__link--prev head-type" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> Apps </span> </div> </a> <a href=../Repo/ title=Repo class="md-flex md-footer-nav__link md-footer-nav__link--next head-type" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> Repo </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-disclaimer> The content of this site is produced under responsibility of project <b>annotation/text-fabric</b> and is subject to change. </div> <div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> customised by <a href=https://github.com/Dans-labs>Dans-labs</a> </div> </div> <div class=md-footer-dans> <div>DANS is an institute of KNAW and NWO</div> <div> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)"><img class=md-footer-dans__img src=../../assets/images/DANS.gif height=50></a> <a target=_blank href=https://www.knaw.nl/en><img src=../../assets/images/knaw.png height=50></a> <a target=_blank href=https://www.nwo.nl/en><img src=../../assets/images/nwo.png height=50></a> </div> <div><i>Driven by data</i></div> </div> <link rel=stylesheet href=../../assets/fonts/font-awesome.css> <ul class=md-footer-social> <li class=md-footer-social__li> <a href=http://eepurl.com/dvnr8D class="md-footer-social__link fa fa-envelope-square"> <span class=md-footer-social__desc>Newsletter</span> </a> </li> <li class=md-footer-social__li> <a href=https://twitter.com/DANSKNAW class="md-footer-social__link fa fa-twitter-square"> <span class=md-footer-social__desc>Twitter</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.youtube.com/user/DANSDataArchiving class="md-footer-social__link fa fa-youtube-square"> <span class=md-footer-social__desc>YouTube</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.linkedin.com/company/dans class="md-footer-social__link fa fa-linkedin-square"> <span class=md-footer-social__desc>LinkedIn</span> </a> </li> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.f780ca69.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> </body> </html>