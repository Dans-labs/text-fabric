<!doctype html><html lang=en class=no-js> <head><link href=https://fonts.gstatic.com rel=preconnect crossorigin><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, a binary format, an API, and apps for (ancient) text plus (linguistic) annotations."><link href=https://annotation.github.io/text-fabric/Api/Text/ rel=canonical><meta name=author content="Dirk Roorda"><meta name=lang:clipboard.copy content="Copy to clipboard"><meta name=lang:clipboard.copied content="Copied to clipboard"><meta name=lang:search.language content=en><meta name=lang:search.pipeline.stopwords content=True><meta name=lang:search.pipeline.trimmer content=True><meta name=lang:search.result.none content="No matching documents"><meta name=lang:search.result.one content="1 matching document"><meta name=lang:search.result.other content="# matching documents"><meta name=lang:search.tokenizer content=[\s\-]+><link rel="shortcut icon" href=../../images/icon/favicon.ico><meta name=generator content="mkdocs-1.0.4, mkdocs-dans-4.4.1"><title>T - Text - Text-Fabric</title><link rel=stylesheet href=../../assets/stylesheets/application.27a306a7.css><script src=../../assets/javascripts/modernizr.74668098.js></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,700|Glegoo:300,400,400i,700|Ubuntu+Mono&display=swap"><style>.body-type,body,input{font-family:"Open Sans",sans-serif}.head-type,h1,h2,h3,h4,h5{font-family:"Glegoo",serif}.code-type,code,kbd,pre{font-family:"Ubuntu Mono",monospace}</style><link rel=stylesheet href=../../assets/fonts/material-icons.css></head> <body dir=ltr> <svg class=md-svg> <defs> <svg xmlns=http://www.w3.org/2000/svg width=416 height=448 viewbox="0 0 416 448" id=__github><path fill=currentColor d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg> </defs> </svg> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay data-md-component=overlay for=__drawer></label> <a href=#text tabindex=1 class=md-skip> Skip to content </a> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid"> <div class=md-flex> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)" class="md-header-nav__button md-logo"> <img src=../../assets/images/DANS.gif height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-header-nav__button md-logo"> <img src=../../images/tf-small.png height=50> </a> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--menu md-header-nav__button" for=__drawer></label> </div> <div class="md-flex__cell md-flex__cell--stretch"> <div class="md-flex__ellipsis md-header-nav__title head-type" data-md-component=title> <span class=md-header-nav__topic> Text-Fabric </span> <span class=md-header-nav__topic> T - Text </span> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <label class="md-icon md-icon--search md-header-nav__button" for=__search></label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=query data-md-state=active> <label class="md-icon md-search__icon" for=__search></label> <button type=reset class="md-icon md-search__icon" data-md-component=reset tabindex=-1> &#xE5CD; </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=result> <div class=md-search-result__meta> Type to start searching </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </div> <div class="md-flex__cell md-flex__cell--shrink"> <div class=md-header-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> </div> </div> </nav> </header> <div class=md-container> <nav class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. title=Home class="md-tabs__link head-type"> Home </a> </li> <li class=md-tabs__item> <a href=../../About/Install/ title=About class="md-tabs__link head-type"> About </a> </li> <li class=md-tabs__item> <a href=../../Use/Use/ title=Use class="md-tabs__link head-type"> Use </a> </li> <li class=md-tabs__item> <a href=../App/ title=Api class="md-tabs__link md-tabs__link--active head-type"> Api </a> </li> <li class=md-tabs__item> <a href=../../Writing/Arabic/ title=Writing class="md-tabs__link head-type"> Writing </a> </li> <li class=md-tabs__item> <a href=../../Model/Data-Model/ title=Model class="md-tabs__link head-type"> Model </a> </li> <li class=md-tabs__item> <a href=../../Create/Convert/ title=Create class="md-tabs__link head-type"> Create </a> </li> <li class=md-tabs__item> <a href=../../Server/Kernel/ title=Server class="md-tabs__link head-type"> Server </a> </li> <li class=md-tabs__item> <a href=../../Code/Overview/ title=Code class="md-tabs__link head-type"> Code </a> </li> <li class=md-tabs__item> <a href=../../Implementation/Apps/ title=Implementation class="md-tabs__link head-type"> Implementation </a> </li> </ul> </div> </nav> <main class=md-main> <div class="md-main__inner md-grid" data-md-component=container> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" data-md-level=0> <label class="md-nav__title head-type md-nav__title--site" for=__drawer> <a href=https://annotation.github.io/text-fabric/ title=Text-Fabric class="md-nav__button md-logo"> <img src=../../images/tf-small.png width=48 height=48> </a> Text-Fabric </label> <div class=md-nav__source> <a href=https://github.com/annotation/text-fabric/ title="Go to repository" class=md-source data-md-source=github> <div class=md-source__icon> <svg viewbox="0 0 24 24" width=24 height=24> <use xlink:href=#__github width=24 height=24></use> </svg> </div> <div class=md-source__repository> annotation/text-fabric </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Home class="md-nav__link head-type"> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class="md-nav__link head-type" for=nav-2> About </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-2> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../About/Install/ title=Install class="md-nav__link head-type"> Install </a> </li> <li class=md-nav__item> <a href=../../About/Corpora/ title=Corpora class="md-nav__link head-type"> Corpora </a> </li> <li class=md-nav__item> <a href=../../About/Faq/ title=Faq class="md-nav__link head-type"> Faq </a> </li> <li class=md-nav__item> <a href=../../About/News/ title=News class="md-nav__link head-type"> News </a> </li> <li class=md-nav__item> <a href=../../About/Older/ title=Older class="md-nav__link head-type"> Older </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class="md-nav__link head-type" for=nav-3> Use </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-3> Use </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Use/Use/ title=Use class="md-nav__link head-type"> Use </a> </li> <li class=md-nav__item> <a href=../../Use/Browser/ title=Browser class="md-nav__link head-type"> Browser </a> </li> <li class=md-nav__item> <a href=../../Use/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Use/UseX/ title=Advanced class="md-nav__link head-type"> Advanced </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class="md-nav__link head-type" for=nav-4> Api </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-4> Api </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../App/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-2 type=checkbox id=nav-4-2> <label class="md-nav__link head-type" for=nav-4-2> Data flow </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-2> Data flow </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../Repo/ title=Repo class="md-nav__link head-type"> Repo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3 checked> <label class="md-nav__link head-type" for=nav-4-3> Core </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-3> Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Fabric/ title=TF class="md-nav__link head-type"> TF </a> </li> <li class=md-nav__item> <a href=../Features/ title="E/F - (Edge-)Features" class="md-nav__link head-type"> E/F - (Edge-)Features </a> </li> <li class=md-nav__item> <a href=../Nodes/ title="N - Nodes" class="md-nav__link head-type"> N - Nodes </a> </li> <li class=md-nav__item> <a href=../Locality/ title="L - Locality" class="md-nav__link head-type"> L - Locality </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-toggle md-nav__toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active head-type" for=__toc> T - Text </label> <a href=./ title="T - Text" class="md-nav__link md-nav__link--active head-type"> T - Text </a> <nav class="md-nav md-nav--secondary"> <label class="md-nav__title head-type" for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#structure title=Structure class="md-nav__link head-type"> Structure </a> </li> <li class=md-nav__item> <a href=#sections title=Sections class="md-nav__link head-type"> Sections </a> </li> <li class=md-nav__item> <a href=#book-names-and-languages title="Book names and languages" class="md-nav__link head-type"> Book names and languages </a> </li> <li class=md-nav__item> <a href=#text-representation title="Text representation" class="md-nav__link head-type"> Text representation </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Search/ title="S - Search" class="md-nav__link head-type"> S - Search </a> </li> <li class=md-nav__item> <a href=../Computed/ title="C - Computed" class="md-nav__link head-type"> C - Computed </a> </li> <li class=md-nav__item> <a href=../Misc/ title=Miscellaneous class="md-nav__link head-type"> Miscellaneous </a> </li> <li class=md-nav__item> <a href=../Lib/ title=Lib class="md-nav__link head-type"> Lib </a> </li> <li class=md-nav__item> <a href=../Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class="md-nav__link head-type" for=nav-4-4> Compose </label> <nav class=md-nav data-md-component=collapsible data-md-level=2> <label class="md-nav__title head-type" for=nav-4-4> Compose </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Compose/ title=Combining class="md-nav__link head-type"> Combining </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class="md-nav__link head-type" for=nav-5> Writing </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-5> Writing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Writing/Arabic/ title=Arabic class="md-nav__link head-type"> Arabic </a> </li> <li class=md-nav__item> <a href=../../Writing/Hebrew/ title=Hebrew class="md-nav__link head-type"> Hebrew </a> </li> <li class=md-nav__item> <a href=../../Writing/Syriac/ title=Syriac class="md-nav__link head-type"> Syriac </a> </li> <li class=md-nav__item> <a href=../../Writing/Transcription/ title=Transcription class="md-nav__link head-type"> Transcription </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class="md-nav__link head-type" for=nav-6> Model </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-6> Model </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Model/Data-Model/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Model/File-formats/ title=Format class="md-nav__link head-type"> Format </a> </li> <li class=md-nav__item> <a href=../../Model/Optimizations/ title=Tweaks class="md-nav__link head-type"> Tweaks </a> </li> <li class=md-nav__item> <a href=../../Model/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-7 type=checkbox id=nav-7> <label class="md-nav__link head-type" for=nav-7> Create </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-7> Create </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Create/Convert/ title=Convert class="md-nav__link head-type"> Convert </a> </li> <li class=md-nav__item> <a href=../../Create/CreateTF/ title=Pattern class="md-nav__link head-type"> Pattern </a> </li> <li class=md-nav__item> <a href=../../Create/ExampleText/ title="Example data" class="md-nav__link head-type"> Example data </a> </li> <li class=md-nav__item> <a href=../../Create/MQL/ title=MQL class="md-nav__link head-type"> MQL </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-8 type=checkbox id=nav-8> <label class="md-nav__link head-type" for=nav-8> Server </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-8> Server </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Server/Kernel/ title=Kernel class="md-nav__link head-type"> Kernel </a> </li> <li class=md-nav__item> <a href=../../Server/Web/ title=Web class="md-nav__link head-type"> Web </a> </li> <li class=md-nav__item> <a href=../../Server/Common/ title=Common class="md-nav__link head-type"> Common </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-9 type=checkbox id=nav-9> <label class="md-nav__link head-type" for=nav-9> Code </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-9> Code </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Code/Overview/ title=Overview class="md-nav__link head-type"> Overview </a> </li> <li class=md-nav__item> <a href=../../Code/Tests/ title=Tests class="md-nav__link head-type"> Tests </a> </li> <li class=md-nav__item> <a href=../../Code/Stats/ title="Stats (overall)" class="md-nav__link head-type"> Stats (overall) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsToplevel/ title="Stats (TF-toplevel)" class="md-nav__link head-type"> Stats (TF-toplevel) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCore/ title="Stats (TF-core)" class="md-nav__link head-type"> Stats (TF-core) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsSearch/ title="Stats (TF-search)" class="md-nav__link head-type"> Stats (TF-search) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsConvert/ title="Stats (TF-convert)" class="md-nav__link head-type"> Stats (TF-convert) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsCompose/ title="Stats (TF-compose)" class="md-nav__link head-type"> Stats (TF-compose) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsWriting/ title="Stats (TF-writing)" class="md-nav__link head-type"> Stats (TF-writing) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsServer/ title="Stats (TF-server)" class="md-nav__link head-type"> Stats (TF-server) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApplib/ title="Stats (TF-app support)" class="md-nav__link head-type"> Stats (TF-app support) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsApps/ title="Stats (TF-apps)" class="md-nav__link head-type"> Stats (TF-apps) </a> </li> <li class=md-nav__item> <a href=../../Code/StatsTest/ title="Stats (Tests)" class="md-nav__link head-type"> Stats (Tests) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-toggle md-nav__toggle" data-md-toggle=nav-10 type=checkbox id=nav-10> <label class="md-nav__link head-type" for=nav-10> Implementation </label> <nav class=md-nav data-md-component=collapsible data-md-level=1> <label class="md-nav__title head-type" for=nav-10> Implementation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Implementation/Apps/ title=Apps class="md-nav__link head-type"> Apps </a> </li> <li class=md-nav__item> <a href=../../Implementation/Setup/ title=Setup class="md-nav__link head-type"> Setup </a> </li> <li class=md-nav__item> <a href=../../Implementation/Data/ title=Data class="md-nav__link head-type"> Data </a> </li> <li class=md-nav__item> <a href=../../Implementation/Display/ title=Display class="md-nav__link head-type"> Display </a> </li> <li class=md-nav__item> <a href=../../Implementation/Highlight/ title=Highlight class="md-nav__link head-type"> Highlight </a> </li> <li class=md-nav__item> <a href=../../Implementation/Links/ title=Links class="md-nav__link head-type"> Links </a> </li> <li class=md-nav__item> <a href=../../Implementation/Search/ title=Search class="md-nav__link head-type"> Search </a> </li> <li class=md-nav__item> <a href=../../Implementation/Tables/ title=Tables class="md-nav__link head-type"> Tables </a> </li> <li class=md-nav__item> <a href=../../Implementation/Helpers/ title=Helpers class="md-nav__link head-type"> Helpers </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary"> <label class="md-nav__title head-type" for=__toc>Table of contents</label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#structure title=Structure class="md-nav__link head-type"> Structure </a> </li> <li class=md-nav__item> <a href=#sections title=Sections class="md-nav__link head-type"> Sections </a> </li> <li class=md-nav__item> <a href=#book-names-and-languages title="Book names and languages" class="md-nav__link head-type"> Book names and languages </a> </li> <li class=md-nav__item> <a href=#text-representation title="Text representation" class="md-nav__link head-type"> Text representation </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/annotation/text-fabric/edit/master/docs/Api/Text.md title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a> <h1 id=text>Text<a class=headerlink href=#text title="Permanent link">&para;</a></h1> <details class=info><summary>Overview</summary><p>Here are the functions that enable you to get the actual text in the dataset. There are several things to accomplish here, such as</p> <ul> <li>support the structure of the corpus</li> <li>support a rigid section system usable by the TF browser</li> <li>handle multilingual section labels;</li> <li>switch between various text representations.</li> </ul> <p>The details of the Text API are dependent on the <em>warp</em> feature <code>otext</code>, which is a config feature.</p> </details> <details class=info open=open><summary>T</summary><p>The Text API is exposed as <code>T</code> or <code>Text</code>.</p> </details> <details class=note><summary>otext is optional</summary><p>If <code>otext</code> is missing, the Text API will not be build. If it exists, but does not specify structure or sections, those parts of the Text API will not be built. Likewise for text representations.</p> </details> <h2 id=structure>Structure<a class=headerlink href=#structure title="Permanent link">&para;</a></h2> <details class=explanation><summary>Structure types</summary><p>If a corpus has sectional elements, such as series, volume, book, part, document, chapter, fragment, verse, halfverse, line, etc, then you can configure those elements as structural types.</p> <p>If your TF dataset designer has done that, the <code>T.api</code> will provide a number of handy functions to navigate your corpus along its structure, programmatically.</p> <p>The <a href=https://nbviewer.jupyter.org/github/annotation/banks/blob/master/programs/structure.ipynb>banks</a> example corpus shows a full example.</p> <p>Structure is defined in the <code>otext</code> feature, by means of the keys <code>structureTypes</code> and <code>structureFeatures</code>. These are comma-separated lists of equal length.</p> <p><code>structureTypes</code> specifies the node types that act as structural types, in the order from biggest to smallest.</p> <p><code>structureFeatures</code> specifies a feature that corresponds to each structural type. This feature must contain the label of the structural element, e.g. the title of a book, the number of a verse, etc.</p> <p>The order of the section types is significant. Suppose you have a book with a single chapter. Is the chapter part of the book, or is the book part of the chapter? The order decides. If <code>book</code> is mentioned in <code>structureTypes</code> before <code>chapter</code> then the chapter is part of the book, and not the other way around.</p> <p>However, it is allowed to have nesting of elements of the same kind.</p> </details> <details class=caution><summary>Proper embedding not required</summary><p>There are no assumptions on how exactly the structural elements lie embedded in each other, and whether they consist of uninterrupted stretches of material or not.</p> <p>Suppose a we have a book with two disjoint chapters and there is a verse that has material in both chapters. Then that verse is part of neither chapter, but it is still part of the book. If you go down from that book to its substructural elements, you find not only its chapters, but also that verse. </p> <p>So the great freedom with respect to structural elements also brings greater responsibility when using that structure.</p> </details> <details class=abstract><summary>T.structureInfo()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>structureInfo</span><span class=p>()</span>
</pre></div> </td></tr></table> <p>Gives a summary of how structure has bee configured in the dataset. If there are headings that are the same for multiple structural nodes, you'll get a warning here, and you are told how you can get all of those.</p> <p>It also shows a short description of all structure-related methods of the <code>T</code> API.</p> </details> <details class=abstract><summary>T.structure()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>structure</span><span class=p>(</span><span class=n>node</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Gives the structure of <code>node</code> and everything below it as a tuple. If <code>node</code> is None, it gives the complete structure of the whole dataset.</p> </details> <details class=abstract><summary>T.structurePretty()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>structure</span><span class=p>(</span><span class=n>node</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>fullHeading</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Gives the structure of <code>node</code> and everything below it as a string with pretty indentation.. If <code>node</code> is None, it gives the complete structure of the whole dataset.</p> <p>For each structural element, only its own heading is added.</p> <p>But if you want to see the full heading, consisting of the headings of a node and all of its parents, you can get that if you pass <code>fullHeading=True</code>.</p> </details> <details class=abstract><summary>T.top()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>top</span><span class=p>()</span>
</pre></div> </td></tr></table> <p>Gives all top-level structural nodes in the dataset. These are the nodes that are not embedded in a structural node of the same or a higher level.</p> </details> <details class=abstract><summary>T.up()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>up</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Gives the parent of <code>node</code>, provided <code>node</code> is structural. The parent is that structural node that has the heading you get from <code>node</code> minus the last element.</p> <p>E.g., the parent of <code>((book, Genesis), (chapter, 3), (verse, 16))</code> is the node that has heading <code>((book, Genesis), (chapter, 3))</code>.</p> </details> <details class=abstract><summary>T.down()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>down</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Gives the children of <code>node</code>, provided <code>node</code> is structural. The children are those structural nodes that have headings that are one longer than the one you get from <code>node</code>.</p> <p>E.g., the children of <code>((book, Genesis), (chapter, 3))</code> are the nodes with heading <code>((book, Genesis), (chapter, 3), (verse, 1))</code>, etc.</p> </details> <details class=abstract><summary>T.headingFromNode()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>headingFromNode</span><span class=p>(</span><span class=n>node</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Gives the full heading of <code>node</code>, provided <code>node</code> is structural.</p> <p>The heading is defined of the tuple of pairs (node type, feature value) for all ancestors of that node. </p> <p>E.g., the heading of the verse node corresponding to Genesis 3:16 is <code>((book, Genesis), (chapter, 3), (verse, 16))</code>.</p> <p>If you are interested in the complete mapping: it is stored in the dictionary <code>T.hdFromNd</code>.</p> </details> <details class=abstract><summary>T.nodeFromHeading()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>nodeFromHeading</span><span class=p>(</span><span class=n>heading</span><span class=p>)</span>
</pre></div> </td></tr></table> <p>Gives the full node corresponding to a heading, provided it exists. It is the inverse of <code>T.headingFromNode()</code>.</p> <p>If you are interested in the complete mapping: it is stored in the dictionary <code>T.ndFromHd</code>.</p> <p>If there is more than one node that corresponds to the heading, only the last one in the corpus will be returned.</p> <p><code>T.hdMult</code> contains all such cases.</p> </details> <h2 id=sections>Sections<a class=headerlink href=#sections title="Permanent link">&para;</a></h2> <details class=explanation><summary>Section levels</summary><p>In <code>otext</code> the main section levels (usually <code>book</code>, <code>chapter</code>, <code>verse</code>) can be defined. It loads the features it needs (so you do not have to specify those features, unless you want to use them via <code>F</code>). And finally, it makes some functions available by which you can make handy use of that information.</p> <details class=note><summary>Section levels from a limited, rigid system</summary><p>There are up to three section levels, and this is a hard coded boundary. That makes this section system unsuitable to faithfully reflect the rich sectioning that may be present in a corpus.</p> <p>On the other hand, applications (such as TF apps) can access a predictable sectioning system by which they can chunk the material in practical portions.</p> <p>The rule of thumb is:</p> <p>Level 1 divides the corpus into top level units, of which there might be (very) many. The TF browser has a control that can deal with long lists.</p> <p>Level 2 divides a level 1 section into a chunk that can be loaded into a webpage, without overwhelming the browser. Even better, it should be just one or a few screenfuls of text, when represented in <code>plain</code> view.</p> <p>Level 3 divides a level 2 section into chunks that roughly corresponds to lines. Such lines typically take up one screenful if represented in <code>pretty</code> view.</p> </details> <details class=note><summary>Section levels are generic</summary><p>In this documentation, we call the main section level <code>book</code>, the second level <code>chapter</code>, and the third level <code>verse</code>. Text-Fabric, however, is completely agnostic about how these levels are called. It is prepared to distinguish three section levels, but how they are called, must be configured in the dataset. The task of the <code>otext</code> feature is to declare which node type and feature correspond with which section level. Text-Fabric assumes that the first section level may have multilingual headings, but that section levels two and three have single language headings (numbers of some kind).</p> </details> <details class=note><summary>String versus number</summary><p>Chapter and verse numbers will be considered to be strings or integers, depending on whether your dataset has declared the corresponding feature <em>valueType</em> as <code>str</code> or as <code>int</code>.</p> <p>Conceivably, other works might have chapter and verse numbers like <code>XIV</code>, '3A', '4.5', and in those cases these numbers are obviously not <code>int</code>s.</p> </details> <details class=caution><summary>levels of node types</summary><p>Usually, Text-Fabric computes the hierarchy of node types correctly, in the sense that node types that act as containers have a lower level than node types that act as containees. So books have the lowest level, words the highest. See <a href=#levels>levels</a>. However, if this level assignment turns out to be wrong for your dataset, you can configure the right order in the <em>otext</em> feature, by means of a key <code>levels</code> with value a comma separated list of levels. Example:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>@levels=tablet,face,column,line,case,cluster,quad,comment,sign
</pre></div> </td></tr></table> </details> </details> <details class=abstract><summary>T.sectionTuple()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>sectionTuple</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>lastSlot</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span> <span class=n>fillup</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Returns a tuple of nodes that correspond to the sections of level 0, 1 and 2 (e.g. book, chapter, verse). that include a node. More precisely, we retrieve the sections that contain a reference node, which is either the first slot or the last slot of the node in question.</p> </details> <details class=info><summary>node</summary><p>The node whose containing section we want to get.</p> </details> <details class=info><summary>lastSlot</summary><p>Whether the reference node will be the last slot contained by the <code>node</code> argument or the first node.</p> </details> <details class=info><summary>fillup</summary><p>If <code>False</code>, and node is a level 0 section node, a 1-element tuple of this node is returned. And if node is a level 1 section node, a 2-element tuple is returned: the enclosing level 0 section node and node itself.</p> <p>If <code>True</code>, always a complete 3-tuple of a level 0, 1, and 2 section node is returned.</p> </details> </details> <details class=abstract><summary>T.sectionFromNode()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>sectionFromNode</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>lastSlot</span><span class=o>=</span><span class=bp>False</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s1>&#39;en&#39;</span><span class=p>,</span> <span class=n>fillup</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Returns the book/chapter/verse indications that correspond to the reference node, which is the first or last slot belonging <code>node</code>, dependent on <code>lastSlot</code>. The result is a tuple, consisting of the book name (in language <code>lang</code>), the chapter number, and the verse number. But see the <code>fillup</code> parameter.</p> </details> <details class=info><summary>node</summary><p>The node from which we obtain a section specification.</p> </details> <details class=info><summary>lastSlot</summary><p>Whether the reference node will be the last slot contained by the <code>node</code> argument or the first node.</p> </details> <details class=info><summary>lang</summary><p>The language to be used for the section parts, as far as they are language dependent.</p> </details> <details class=info><summary>fillup</summary><p>Same as for <code>sectionTuple()</code></p> </details> <details class=note><summary>crossing verse boundaries</summary><p>Sometimes a sentence or clause in a verse continue into the next verse. In those cases, this function will return a different results for <code>lastSlot=False</code> and <code>lastSlot=True</code>.</p> </details> <details class=caution><summary>nodes outside sections</summary><p>Nodes that lie outside any book, chapter, verse will get a <code>None</code> in the corresponding members of the returned tuple.</p> </details> </details> <details class=abstract><summary>T.nodeFromSection()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>nodeFromSection</span><span class=p>(</span><span class=n>section</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s1>&#39;en&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Given a <code>section</code> tuple, return the node of it.</p> </details> <details class=info><summary>section</summary><p><code>section</code> consists of a book name (in language <code>lang</code>), and a chapter number and a verse number (both as strings or number depending on the value type of the corresponding feature). The verse number may be left out, the result is then a chapter node. Both verse and chapter numbers may be left out, the result is then a book node. If all three are present, de result is a verse node.</p> </details> <details class=info><summary>lang</summary><p>The language assumed for the section parts, as far as they are language dependent.</p> </details> </details> <h2 id=book-names-and-languages>Book names and languages<a class=headerlink href=#book-names-and-languages title="Permanent link">&para;</a></h2> <details class=explanation><summary>Book names and nodes</summary><p>The names of the books may be available in multiple languages. The book names are stored in node features with names of the form <code>book@</code><em>la</em>, where <em>la</em> is the <a href=https://en.wikipedia.org/wiki/ISO_639>ISO 639</a> two-letter code for that language. Text-Fabric will always load these features.</p> </details> <details class=abstract><summary>T.languages</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>languages</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>A dictionary of the languages that are available for book names.</p> </details> </details> <details class=abstract><summary>T.bookName()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>bookName</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s1>&#39;en&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>gives the name of the book in which a node occurs.</p> </details> <details class=info><summary>node</summary><p>The node in question.</p> </details> <details class=info><summary>lang</summary><p>The <code>lang</code> parameter is a two letter language code. The default is <code>en</code> (English).</p> <p>If there is no feature data for the language chosen, the value of the ordinary <code>book</code> feature of the dataset will be returned.</p> </details> <details class=note><summary>Works for all nodes</summary><p><code>n</code> may or may not be a book node. If not, <code>bookName()</code> retrieves the embedding book node first.</p> </details> </details> <details class=abstract><summary>T.bookNode()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>bookNode</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s1>&#39;en&#39;</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>gives the node of the book identified by its name</p> </details> <details class=info><summary>name</summary><p>The name of the book.</p> </details> <details class=info><summary>lang</summary><p>The language in which the book name is supplied by the <code>name</code> parameter.</p> <p>If <code>lang</code> can not be found, the value of the ordinary <code>book</code> feature of the dataset will be used.</p> <p>If <code>name</code> cannot be found in the specified language, <code>None</code> will be returned.</p> </details> <details class=caution><summary>Function name follows configured section level</summary><p>If your dataset has configured section level one under an other name, say <code>tablet</code>, then these two methods follow that name. Instead of <code>T.bookName()</code> and <code>T.bookNode()</code> we have then <code>T.tabletName()</code> and <code>T.tabletNode()</code>.</p> </details> </details> <h2 id=text-representation>Text representation<a class=headerlink href=#text-representation title="Permanent link">&para;</a></h2> <details class=explanation><summary>Text formats</summary><p>Text can be represented in multiple ways. We provide a number of formats with structured names.</p> <details><summary>format names</summary><p>A format name is a string of keywords separated by <code>-</code>:</p> <p><em>what</em><code>-</code><em>how</em><code>-</code><em>fullness</em><code>-</code><em>modifier</em></p> <p>For Hebrew any combination of the follwoing could be useful formats:</p> <table> <thead> <tr> <th>keyword</th> <th>value</th> <th>meaning</th> </tr> </thead> <tbody> <tr> <td><em>what</em></td> <td><code>text</code></td> <td>words as they belong to the text</td> </tr> <tr> <td><em>what</em></td> <td><code>lex</code></td> <td>lexemes of the words</td> </tr> <tr> <td><em>how</em></td> <td><code>orig</code></td> <td>in the original script (Hebrew, Greek, Syriac) (all Unicode)</td> </tr> <tr> <td><em>how</em></td> <td><code>trans</code></td> <td>in (latin) transliteration</td> </tr> <tr> <td><em>how</em></td> <td><code>phono</code></td> <td>in phonetic/phonological transcription</td> </tr> <tr> <td><em>fullness</em></td> <td><code>full</code></td> <td>complete with accents and all diacritical marks</td> </tr> <tr> <td><em>fullness</em></td> <td><code>plain</code></td> <td>with accents and diacritical marks stripped, in Hebrew only the consonants are left</td> </tr> <tr> <td><em>modifier</em></td> <td><code>ketiv</code></td> <td>(Hebrew): where there is ketiv/qere, follow ketiv instead of qere (default);</td> </tr> </tbody> </table> <p>The default format is <code>text-orig-full</code>, we assume that every TF dataset defines this format.</p> </details> <details><summary>format content</summary><p>A format is a template string, with fixed text and variable text. The variable text comes from features. You specify the interpolation of features by surrounding the feature name by <code>{ }</code>.</p> <p>For example, if <code>letters</code> and <code>after</code> are features, this is a text format:</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>{letters}{after}
</pre></div> </td></tr></table> <p>If you need tabs and newlines in a format, specify them by \t and \n.</p> <p>You can also conditionally choose between features, to substitute the value of another feature in case of empty values.</p> <p>For example, if you want to use the <code>normal</code> feature to represent a word, but if there is also a rare feature <code>special</code> that you want to use if it is defined for that word, you can make a format</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>{special/normal}
</pre></div> </td></tr></table> <p>This tries the feature <code>special</code> first, and if that is empty, it takes <code>normal</code>.</p> <p>You can also add a fixed default. If you want to display a <code>.</code> if neither <code>special</code> nor <code>normal</code> exist, you can say</p> <table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span>{special/normal:.}
</pre></div> </td></tr></table> </details> <details open=open><summary>formats specialized to a node type</summary><p>TF datasets may also define formats of the form</p> <p><em>nodetype</em><code>-default</code></p> <p>where <em>nodetype</em> is a valid type of node in the dataset.</p> <p>These formats will be invoked in cases where no explicit format is specified as a fall back for some kind of nodes. See <code>T.text()</code> below.</p> </details> <details open=open><summary>target node types for formats</summary><p>A node type may also be prepended to a format, with <code>#</code> as separator:</p> <p><em>nodetype</em><code>#</code><em>textformat</em></p> <p>In general, a format can be applied to any kind of node, and it will lookup the features defined in its template for that node. But some features have meaningful values for particular node types only.</p> <p>So formats may indicate that they should be applied to nodes of a specific type. See <code>T.text()</code> below.</p> </details> <p>Remember that the formats are defined in the <code>otext</code> warp config feature of your set, not by Text-Fabric.</p> <details class=note><summary>Freedom of names for formats</summary><p>There is complete freedom of choosing names for text formats. They do not have to complied with the above-mentioned scheme.</p> </details> <details open=open><summary>layout in formats</summary><p>So far, text formats only result in plain text. A <a href=../../Implementation/Apps/ >TF-app</a> may define and implement extra text formats which may invoke all HTML+CSS styling that you can think of.</p> </details> </details> <details class=abstract><summary>T.formats</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>formats</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Show the text representation formats that have been defined in your dataset.</p> </details> </details> <details class=abstract><summary>T.text()</summary><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span></span>1
2
3</pre></div></td><td class=code><div class=codehilite><pre><span></span><span class=n>T</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>nodes</span><span class=p>,</span> <span class=n>fmt</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
<span class=n>T</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>fmt</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>descend</span><span class=o>=</span><span class=bp>None</span><span class=p>)</span>
<span class=n>T</span><span class=o>.</span><span class=n>text</span><span class=p>(</span><span class=n>node</span><span class=p>,</span> <span class=n>fmt</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>descend</span><span class=o>=</span><span class=bp>None</span><span class=p>,</span> <span class=n>explain</span><span class=o>=</span><span class=bp>False</span><span class=p>)</span>
</pre></div> </td></tr></table> <details class=info open=open><summary>Description</summary><p>Gives the text that corresponds to a bunch of nodes. The <a href=https://nbviewer.jupyter.org/github/annotation/banks/blob/master/programs/formats.ipynb>banks</a> example corpus shows examples.</p> </details> <details class=info><summary>nodes</summary><p><code>nodes</code> can be a single node or an arbitrary iterable of nodes of arbitrary types. No attempt will be made to sort the nodes. If you need order, it is better to order the nodes before you feed them to <code>T.text()</code>.</p> </details> <details class=info><summary>fmt</summary><p>The format of the text representation is given with <code>fmt</code>.</p> <p>If it is not specified or None, each node will be formatted with a node type specific format, defined as <em>nodeType</em><code>-default</code>, if it exists.</p> <p>If there is no node specific format, the default format <code>text-orig-full</code> will be used.</p> <p>If <code>text-orig-full</code> is not defined, an error message will be issued, and the nodes will be represented by their types and numbers.</p> <p>If a value for <em>fmt</em> is passed, but it is not a format defined in the <em>otext.tf</em> feature, there will be an error message and <code>None</code> is returned.</p> </details> <details class=info><summary>descend</summary><p>Whether to descend to constituent nodes.</p> <p>If True, nodes will be replaced by a sequence of their consituent nodes, which have a type specified by the format chosen, or, if the format does not specify such a type, the node will be replaced by the slots contained in it.</p> <p>If False, nodes will not be replaced.</p> <p>If <em>descend</em> is not specified or None, a node will be replaced by its constituent nodes, unless its type is associated with the given format or, if no format is given, by the default format of its type, or, if there is no such format, by its slots.</p> <details class=caution><summary>no nodes to descend to</summary><p>If you call <code>T.text(n, fmt=myfmt)</code> and <code>myfmt</code> is targeted to a node type that is bigger than the node type of <code>n</code>, then the so-called descending leads to an empty sequence of nodes and hence to an empty string.</p> </details> </details> <details class=info><summary>explain</summary><p>The logic of this function is subtle. If you call it and the results baffles you, pass <code>explain=True</code> and it will explain what it is doing.</p> </details> <details class=hint><summary>The default is sensible</summary><p>Consider the simplest call to this function: <code>T.text(node)</code>. This will apply the default format to <code>node</code>. If <code>node</code> is non-slot, then in most cases the default format will be applied to the slots contained in <code>node</code>.</p> <p>But for special node types, where the best representation is not obtained by descending down to the contained slot nodes, the dataset may define special default types that use other features to furnish a decent representation.</p> <details class=example><summary>lexemes</summary><p>In some corpora case this happens for the type of lexemes: <code>lex</code>. Lexemes contain their occurrences as slots, but the representation of a lexeme is not the string of its occurrences, but resides in a feature such as <code>voc_lex_utf8</code> (vocalized lexeme in Unicode).</p> <p>If the dataset defines the format <code>lex-default={lex}</code>, this is the only thing needed to regulate the representation of a lexeme.</p> <p>Hence, <code>T.text(lx)</code> results in the lexeme representation of <code>lx</code>.</p> <p>But if you really want to print out all occurrences of lexeme <code>lx</code>, you can say <code>T.text(lx, descend=True)</code>.</p> </details> <details class=example><summary>words and signs</summary><p>In some corpora the characters or signs are the slot level, and there is a non slot level of words. Some text formats are best defined on signs, others best on words.</p> <p>For example, if words are associated with lexemes, stored in a word feature <code>lex</code>, we can define a text format</p> <p><code>lex-orig-full=word#{lex}</code></p> <p>When you call <code>T.text(n)</code> for a non-slot, non-word node, normally the node will be replaced by the slot nodes it contains, before applying the template in the format. But if you pass a format that specifies a different node type, nodes will be replaced by contained nodes of that type. So </p> <p><code>T.text(n, fmt='lex-orig-full')</code></p> <p>will lookup all word nodes under n and apply the template <code>{lex}</code> to them.</p> </details> </details> <details class=caution open=open><summary>same and different behaviours</summary><p>The consequences of the rules might be unexpected in some cases. Here are a few observations:</p> <ul> <li>formats like <code>phrase-default</code> can be implicitly invoked for phrase nodes, but <code>descend=True</code> prevents that;</li> <li>when a format targeted at phrases is invoked for phrase nodes, <code>descend=True</code> will not cause the expansion of those nodes to slot nodes, because the phrase node is already expanded to the target type of the format;</li> </ul> </details> <details class=hint open=open><summary>memory aid</summary><ul> <li>If <em>fmt</em> is explicitly passed, it will be the format used no matter what, and it determines the level of the nodes to descend to;</li> <li>Descending is the norm, it can only be prevented by setting default formats for node types or by passing <code>descend=False</code> to <code>T.text()</code>;</li> <li><code>descend=True</code> is stronger than type-specific default formats, but weaker than explicitly passed formats;</li> <li><strong>Pass <code>explain=True</code> for a dynamic explanation.</strong></li> </ul> </details> <details class=note><summary>Non slot nodes allowed</summary><p>In most cases, the nodes fed to <code>T.text()</code> are slots, and the formats are templates that use features that are defined for slots.</p> <p>But nothing prevents you to define a format for non-slot nodes, and use features defined for a non-slot node type.</p> <p>If, for example, your slot type is <em>glyph</em>, and you want a format that renders lexemes, which are not defined for glyphs but for words, you can just define a format in terms of word features.</p> <p>It is your responsibility to take care to use the formats for node types for which they make sense.</p> </details> <details class=caution><summary>Escape whitespace in formats</summary><p>When defining formats in <code>otext.tf</code>, if you need a newline or tab in the format, specify it as <code>\n</code> and <code>\t</code>.</p> </details> </details> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid"> <a href=../Locality/ title="L - Locality" class="md-flex md-footer-nav__link md-footer-nav__link--prev head-type" rel=prev> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i> </div> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> L - Locality </span> </div> </a> <a href=../Search/ title="S - Search" class="md-flex md-footer-nav__link md-footer-nav__link--next head-type" rel=next> <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"> <span class=md-flex__ellipsis> S - Search </span> </div> <div class="md-flex__cell md-flex__cell--shrink"> <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-disclaimer> The content of this site is produced under responsibility of project <b>annotation/text-fabric</b> and is subject to change. </div> <div> powered by <a href=https://www.mkdocs.org>MkDocs</a> and <a href=https://squidfunk.github.io/mkdocs-material/ > Material for MkDocs</a> customised by <a href=https://github.com/Dans-labs>Dans-labs</a> </div> </div> <div class=md-footer-dans> <div>DANS is an institute of KNAW and NWO</div> <div> <a href=https://dans.knaw.nl/en title="Data Archiving and Networked Services (DANS)"><img class=md-footer-dans__img src=../../assets/images/DANS.gif height=50></a> <a target=_blank href=https://www.knaw.nl/en><img src=../../assets/images/knaw.png height=50></a> <a target=_blank href=https://www.nwo.nl/en><img src=../../assets/images/nwo.png height=50></a> </div> <div><i>Driven by data</i></div> </div> <link rel=stylesheet href=../../assets/fonts/font-awesome.css> <ul class=md-footer-social> <li class=md-footer-social__li> <a href=http://eepurl.com/dvnr8D class="md-footer-social__link fa fa-envelope-square"> <span class=md-footer-social__desc>Newsletter</span> </a> </li> <li class=md-footer-social__li> <a href=https://twitter.com/DANSKNAW class="md-footer-social__link fa fa-twitter-square"> <span class=md-footer-social__desc>Twitter</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.youtube.com/user/DANSDataArchiving class="md-footer-social__link fa fa-youtube-square"> <span class=md-footer-social__desc>YouTube</span> </a> </li> <li class=md-footer-social__li> <a href=https://www.linkedin.com/company/dans class="md-footer-social__link fa fa-linkedin-square"> <span class=md-footer-social__desc>LinkedIn</span> </a> </li> </div> </div> </footer> </div> <script src=../../assets/javascripts/application.f780ca69.js></script> <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script> </body> </html>