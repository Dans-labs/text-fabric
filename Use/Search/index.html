



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, a binary format, an API, and apps for (ancient) text plus (linguistic) annotations.">
      
      
        <link rel="canonical" href="https://dans-labs.github.io/text-fabric/Use/Search/">
      
      
        <meta name="author" content="Dirk Roorda">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/icon/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>Search - Text-Fabric</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#search" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://dans-labs.github.io/text-fabric/" title="Text-Fabric" class="md-header-nav__button md-logo">
          
            <img src="../../images/tficon-small.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Text-Fabric
              </span>
              <span class="md-header-nav__topic">
                Search
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://dans-labs.github.io/text-fabric/" title="Text-Fabric" class="md-nav__button md-logo">
      
        <img src="../../images/tficon-small.png" width="48" height="48">
      
    </a>
    Text-Fabric
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../About/Install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../About/Corpora/" title="Corpora" class="md-nav__link">
      Corpora
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../About/Faq/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../About/News/" title="News" class="md-nav__link">
      News
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../About/Older/" title="Older" class="md-nav__link">
      Older
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Apps/Bhsa/" title="Hebrew Bible" class="md-nav__link">
      Hebrew Bible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Apps/Peshitta/" title="Peshitta" class="md-nav__link">
      Peshitta
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Apps/Syrnt/" title="Syriac New Testament" class="md-nav__link">
      Syriac New Testament
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Apps/Uruk/" title="Cuneiform Tablets" class="md-nav__link">
      Cuneiform Tablets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Use
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Use
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Browser/" title="Browser" class="md-nav__link">
      Browser
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Search
      </label>
    
    <a href="./" title="Search" class="md-nav__link md-nav__link--active">
      Search
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#search-template-reference" title="Search template reference" class="md-nav__link">
    Search template reference
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-specifications" title="Feature specifications" class="md-nav__link">
    Feature specifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relational-operators" title="Relational operators" class="md-nav__link">
    Relational operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quantifiers" title="Quantifiers" class="md-nav__link">
    Quantifiers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Use7/" title="v7-Guide" class="md-nav__link">
      v7-Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Api
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Api
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/App/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Data/" title="Data" class="md-nav__link">
      Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/General/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Writing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Writing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Writing/Hebrew.html" title="Hebrew" class="md-nav__link">
      Hebrew
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Writing/Syriac.html" title="Syriac" class="md-nav__link">
      Syriac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Writing/Transcription/" title="Transcription" class="md-nav__link">
      Transcription
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Model
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Model
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Data-Model/" title="Data" class="md-nav__link">
      Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/File-formats/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Optimizations/" title="Tweaks" class="md-nav__link">
      Tweaks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Model/Search/" title="Search" class="md-nav__link">
      Search
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Create
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Create
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Create/CreateTF/" title="Make TF" class="md-nav__link">
      Make TF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Create/ExampleText/" title="Example data" class="md-nav__link">
      Example data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Kernel/" title="Kernel" class="md-nav__link">
      Kernel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Common/" title="Common" class="md-nav__link">
      Common
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Tests/" title="Tests" class="md-nav__link">
      Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Stats/" title="Stats (overall)" class="md-nav__link">
      Stats (overall)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsToplevel/" title="Stats (TF-toplevel)" class="md-nav__link">
      Stats (TF-toplevel)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsCore/" title="Stats (TF-core)" class="md-nav__link">
      Stats (TF-core)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsSearch/" title="Stats (TF-search)" class="md-nav__link">
      Stats (TF-search)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsConvert/" title="Stats (TF-convert)" class="md-nav__link">
      Stats (TF-convert)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsWriting/" title="Stats (TF-writing)" class="md-nav__link">
      Stats (TF-writing)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsServer/" title="Stats (TF-server)" class="md-nav__link">
      Stats (TF-server)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsApplib/" title="Stats (TF-app support)" class="md-nav__link">
      Stats (TF-app support)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsApps/" title="Stats (TF-apps)" class="md-nav__link">
      Stats (TF-apps)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsTest/" title="Stats (Tests)" class="md-nav__link">
      Stats (Tests)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Implementation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Implementation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Implementation/Apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Implementation/Highlight/" title="Highlight" class="md-nav__link">
      Highlight
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#search-template-reference" title="Search template reference" class="md-nav__link">
    Search template reference
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-specifications" title="Feature specifications" class="md-nav__link">
    Feature specifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relational-operators" title="Relational operators" class="md-nav__link">
    Relational operators
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quantifiers" title="Quantifiers" class="md-nav__link">
    Quantifiers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dans-labs/text-fabric/edit/master/docs/Use/Search.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="search">Search<a class="headerlink" href="#search" title="Permanent link">&para;</a></h1>
<details class="info"><summary>What is Text-Fabric Search?</summary><p>You can query for graph like structures
in your data set. The structure you are interested in has to be written as a
<em>search template</em>.</p>
<p>A search template expresses a pattern of nodes and edges with additional conditions
also known as <em>quantifiers</em>.</p>
<p>You can query a TF corpus in the TF browser, if your main corpus
has been wrapped in a Text-Fabric <a href="../../About/Corpora/">app</a>.</p>
<p>You can also run queries on arbitrary TF corpora programmatically, e.g. in a Jupyter
notebook, by using the <a href="../../Api/General/#search"><code>S</code> API</a>.</p>
</details>
<details class="info"><summary>Search primer</summary><p>A search template consists of a bunch of lines,
possibly indented, that specify objects to look for. Here is a simple example:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        word pos=verb gender=feminine number=plural
        word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>

<p>This template looks for word combinations within a sentence within chapter 2 of
either Genesis or Exodus, where one of the words is a verb and the other is a
noun. Both have a feminine inflection, but the verb is plural and the noun is
singular.</p>
<p>The indentation signifies embedding, i.e. containment. The two words are
contained in the same sentence, the sentence is contained in the chapter, the
chapter in the book.</p>
<p>The conditions you specify on book, chapter, word are all conditions in terms of
<a href="#feature-specifications">node features</a>.
You can use all features in the corpus for this.</p>
<p>The order of the two words is immaterial. If there are cases where the verb
follows the noun, they will be included in the results.</p>
<p>Also, the words do not have to be adjacent. If there are cases with words
intervening between the noun and the verb, they will be included in the results.</p>
<p>Speaking of results: the <code>S.search()</code> function returns its results as tuples of
nodes:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">chapter</span><span class="p">,</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">word1</span><span class="p">,</span> <span class="n">word2</span><span class="p">)</span>
</pre></div>
</td></tr></table>

<p>With these nodes in hand, you can programmatically gather all information about
the results that the corpus provides.</p>
<p>If the order between the verb and the noun is important, you can specify that as
an additional constraint. You can give the words a name, and state a relational
condition. Here we state that the noun precedes the verb.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        vb:word pos=verb gender=feminine number=plural
        nn:word pos=noun gender=feminine number=singular
nn &lt; vb
</pre></div>
</td></tr></table>

<p>This can be written a bit more economically as:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        word pos=verb gender=feminine number=plural
        &gt; word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>

<p>If you insist that the noun immediately precedes the verb, you can use a
different relational operator:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        word pos=verb gender=feminine number=plural
        :&gt; word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>

<p>There are more kinds of
<a href="#relational-operators">relational operators</a>.</p>
<p>If the noun must be the first word in the sentence, you can specify it as</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      s:sentence
        w:word pos=noun gender=feminine number=singular
        &lt;: word pos=verb gender=feminine number=plural
s =: w
</pre></div>
</td></tr></table>

<p>or a bit more economically:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      sentence
        =: word pos=noun gender=feminine number=singular
        &lt;: word pos=verb gender=feminine number=plural
</pre></div>
</td></tr></table>

<p>If the verb must be the last word in the sentence, you can specify it as</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      s:sentence
        word pos=noun gender=feminine number=singular
        &lt;: w:word pos=verb gender=feminine number=plural
s := w
</pre></div>
</td></tr></table>

<p>or a bit more economically:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      s:sentence
        word pos=noun gender=feminine number=singular
        &lt;: word pos=verb gender=feminine number=plural
        :=
</pre></div>
</td></tr></table>

<p>You can also use the <a href="#relational-operators">edge features</a> in the corpus as
relational operators as well.</p>
<p>Suppose we have an edge feature <code>sub</code> between clauses, such that if main clause
<em>m</em> has subordinate clauses <em>s1</em>, <em>s2</em> and <em>s3</em>, then</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>E.sub.f(m) = (s1, s2, s3)
</pre></div>
</td></tr></table>

<p>You can use this relation in search. Suppose we want to find the noun verb pair
in subordinate clauses only. We can use this template:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
   chapter number=2
      m:clause
        s:clause
          word pos=verb gender=feminine number=plural
          :&gt; word pos=noun gender=feminine number=singular
m -sub&gt; s
</pre></div>
</td></tr></table>

<p>or a bit more economically:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book name=Genesis|Exodus
  chapter number=2
    clause
      -sub&gt; clause
        word    pos=verb gender=feminine number=plural
        :&gt; word pos=noun gender=feminine number=singular
</pre></div>
</td></tr></table>

<p>Read <code>m -sub&gt; s</code> as: there is a <code>sub</code>-arrow from <code>m</code> to <code>s</code>.</p>
<p>Edge features may have values.
For example, the
<a href="https://github.com/etcbc/parallels">crossref feature</a>
is a set of edges between parallel verses, with the levels of confidence
as values. This number is an integer between 0 and 100.
We can ask for parallel verses in an unqualified way:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref&gt; verse
</pre></div>
</td></tr></table>

<p>But we can also ask for the cases with a specific confidence:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref=90&gt; verse
</pre></div>
</td></tr></table>

<p>or cases with a high confidence:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref&gt;95&gt; verse
</pre></div>
</td></tr></table>

<p>or cases with a low confidence:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref&lt;80&gt; verse
</pre></div>
</td></tr></table>

<p>All feature conditions that you can assert on node features, you can also
assert for edge features. If an edge feature is integer valued, such as <code>crossref</code>
you can use comparisons; if it is string valued, you can use regular expressions.
In both cases you can also use the other constructs, such as</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>verse
-crossref=66|77&gt; verse
</pre></div>
</td></tr></table>

<p>To get a more specific introduction to search, consult the search tutorials for
<a href="https://nbviewer.jupyter.org/github/etcbc/bhsa/blob/master/tutorial/search.ipynb">BHSA</a>,
<a href="https://nbviewer.jupyter.org/github/etcbc/peshitta/blob/master/tutorial/search.ipynb">Peshitta</a>,
<a href="https://nbviewer.jupyter.org/github/etcbc/syrnt/blob/master/tutorial/search.ipynb">SyrNT</a>,
and
<a href="https://nbviewer.jupyter.org/github/Nino-cunei/uruk/blob/master/tutorial/search.ipynb">Uruk</a>.</p>
<p>Finally an example with quantifiers. We want all clauses where Pred-phrases
consist of verbs only:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  clause
  /where/
    phrase function=Pred
  /have/
    /without/
      word sp#verb
    /-/
  /-/
</pre></div>
</td></tr></table>

</details>
<h2 id="search-template-reference">Search template reference<a class="headerlink" href="#search-template-reference" title="Permanent link">&para;</a></h2>
<details class="info"><summary>Template lines</summary><p>We have these kinds of lines in a template:</p>
<ul>
<li>
<p><em>comment</em> lines</p>
<ul>
<li>if a line starts with <code>%</code> it is a comment line;</li>
<li>you cannot comment out parts of lines, only whole lines;</li>
<li>if a line is empty or has whitespace only, it is a comment line;</li>
<li>comment lines are allowed everywhere;</li>
<li>comment lines are ignored.</li>
</ul>
</li>
<li>
<p><em>atom</em> lines</p>
<ul>
<li>
<p>(simple): <strong>indent name:otype-or-set features</strong></p>
<ul>
<li>
<p>Examples</p>
<ol>
<li><code>word pos=verb gender=feminine</code></li>
<li><code>vb:word pos=verb gender=feminine</code></li>
<li><code>vb pos=verb gender=feminine</code></li>
</ol>
</li>
<li>
<p>The indent is significant. Indent is counted as the number of white space
    characters, where tabs count for just 1. <strong>Avoid tabs!</strong>.</p>
</li>
<li>The <strong>name:</strong> part is optional.
    If present, it defines a name for this atom that can be used
    in relational comparisons and other atoms.</li>
<li>
<p>The <strong>otype-or-set</strong> part is optional.
    If it is absent, the <strong>name</strong> part must be present.
    The meaning of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>p:phrase sp=verb
p vs=qal
</pre></div>
</td></tr></table>

<p>is identical to the meaning of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>p:phrase sp=verb
pnew:phrase vs=qal
p = pnew
</pre></div>
</td></tr></table>

</li>
</ul>
</li>
<li>
<p>(with relop): <strong>indent op name:otype-or-set features</strong></p>
<ul>
<li><code>&lt;: word pos=verb gender=feminine</code></li>
<li>The relation operator specifies an extra constraint between a preceding atom
    and this atom.</li>
<li>The preceding atom may be the parent, provided we are at its first child, or
    it may the preceding sibling.</li>
<li>You can leave out the <strong>name:otype-or-set features</strong> bit. In that case, the
    relation holds between the preceding atom and its parent.</li>
<li>The <strong>name:</strong> part is optional. Exactly as in the case without relop.</li>
<li>The <strong>otype-or-set</strong> part is optional. Exactly as in the case without relop.</li>
</ul>
</li>
</ul>
<p>The otype-or-set is either a node type that exists in your TF data set,
or it is the name of a set that you have passed in the <code>sets</code> parameter alongside
the query itself when you call <code>S.search()</code> or <code>S.study()</code>.</p>
<p>See <a href="#feature-specifications"><em>feature specifications</em></a> below for all
full variety of feature constraints on nodes and edges.</p>
</li>
<li>
<p><em>feature</em> lines: <strong>features</strong></p>
<ul>
<li>Indent is not significant. Continuation of feature constraints after a
    preceding atom line or other feature line. This way you can divide lengthy
    feature constraints over multiple lines.</li>
</ul>
<p>See
<a href="#feature-specifications"><em>feature specifications</em></a>
below for the
full variety of feature constraints on nodes and edges.</p>
</li>
<li>
<p><em>relation</em> lines: <strong>name operator name</strong></p>
<ul>
<li><code>s := w</code></li>
<li><code>m -sub&gt; s</code></li>
<li><code>m &lt;sub- s</code></li>
<li>Indents and spacing are ignored.</li>
<li>There must be white-space around the operator.</li>
<li>Operators that come from edge features may be enriched with values.</li>
</ul>
<p>See
<a href="#relational-operators"><em>relational operators</em></a>
below for the
whole spectrum of relational constraints on nodes.</p>
</li>
<li>
<p><em>quantifier</em> sub-templates:
    Atom lines that contain an otype or set may be followed by
    Quantifiers consist of search templates themselves, demarcated by some
    special keywords:</p>
<ul>
<li><code>/without/</code></li>
<li><code>/where/</code> and <code>/have/</code></li>
<li><code>/with/</code> and <code>/or/</code></li>
<li><code>/-/</code></li>
</ul>
<p>See <a href="#quantifiers"><em>quantifiers</em></a> below for all the syntax and semantics.</p>
</li>
</ul>
</details>
<h3 id="feature-specifications">Feature specifications<a class="headerlink" href="#feature-specifications" title="Permanent link">&para;</a></h3>
<details class="info"><summary>About</summary><p>The <strong>features</strong> above is a specification of what features with
which values to search for. This specification must be written as a white-space
separated list of <strong>feature specs</strong>.</p>
<p>A <strong>feature spec</strong> has the form <em>name</em> <em>valueSpec</em>, with no space between the <em>name</em>
and the <em>valueSpec</em>.</p>
</details>
<details class="info"><summary>Value specifications</summary><p>The <em>valueSpec</em> may have the following forms and
meanings:</p>
<table>
<thead>
<tr>
<th>form</th>
<th>evaluates to <code>True</code> the feature <em>name</em> ...</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>has any value except <code>None</code></td>
</tr>
<tr>
<td><code>#</code></td>
<td>has value <code>None</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>has arbitrary value</td>
</tr>
<tr>
<td><code>=</code><em>values</em></td>
<td>has one of the values specified</td>
</tr>
<tr>
<td><code>#</code><em>values</em></td>
<td>has none of the values specified</td>
</tr>
<tr>
<td><code>&gt;</code><em>value</em></td>
<td>is greater than <em>value</em></td>
</tr>
<tr>
<td><code>&lt;</code><em>value</em></td>
<td>is less than <em>value</em></td>
</tr>
<tr>
<td><code>~</code><em>regular expression</em></td>
<td>has a value and it matches <em>regular expression</em></td>
</tr>
</tbody>
</table>
<details class="hint"><summary>Why <code>*</code> ?</summary><p>The operator <code>*</code> after a feature name does not pose any restriction at all.
It will not influence the search results.</p>
<p><em>Why would you want to include such a "criterion"?</em></p>
<p>Some applications, such as the Text-Fabric browser collect the features used in a query
to retrieve result information to be presented to the user. So if you want to include
the values of a particular feature, mention that feature with a <code>*</code>.</p>
</details>
<p>All these forms are also valid as <code>-</code><em>name</em> <em>form</em><code>&gt;</code> and <code>&lt;</code><em>name</em> <em>form</em><code>-</code>, in which case
they specify value constraints on edge features.
This is only meaningful if the edge feature is declared to have values (most edge features
do not have values).</p>
</details>
<details class="info"><summary>Additional constraints</summary><ul>
<li>There may be no space around the <code>=#&lt;&gt;~</code>. </li>
<li><em>name</em> must be a feature name that exists in the dataset. If it references a
    feature that is not yet loaded, the feature will be loaded automatically.</li>
<li><em>values</em> must be a <code>|</code> separated list of feature values, no quotes. No spaces
    around the <code>|</code>. If you need a space or <code>|</code> or <code>\</code> in a value, escape it by a
    <code>\</code>. Escape tabs and newlines as <code>\t</code> and <code>\n</code>.</li>
<li>When comparing values with <code>&lt;</code> and <code>&gt;</code>:<ul>
<li><em>value</em> must be an integer (negative values allowed);</li>
<li>You can do numeric comparisons only on number-valued features,
    not on string-valued features.</li>
</ul>
</li>
<li><em>regular expression</em> must be a string that conforms to the Python
    <a href="https://docs.python.org/3/library/re.html#regular-expression-syntax">regular axpression syntax</a><ul>
<li>If you need a space in your regular expression, you have to escape it with a
    <code>\</code>.</li>
<li>You can do regular expressions only on string-valued features, not on
    number-valued features.</li>
</ul>
</li>
</ul>
</details>
<h3 id="relational-operators">Relational operators<a class="headerlink" href="#relational-operators" title="Permanent link">&para;</a></h3>
<details class="info"><summary>Node comparison</summary><ul>
<li><code>=</code>: is equal (meaning the same node, a clause and a verse that occupy the
    same slots are still unequal)
    <img alt="op" src="../../images/Spatial/Spatial.001.png" /></li>
<li><code>#</code>: is unequal (meaning a different node, a clause and a verse that occupy
    the same slots are still unequal)
    <img alt="op" src="../../images/Spatial/Spatial.002.png" /></li>
<li><code>&lt;</code> <code>&gt;</code>: before and after (in the <em>canonical ordering</em>)
    <img alt="op" src="../../images/Spatial/Spatial.003.png" /></li>
</ul>
</details>
<details class="info"><summary>Slot comparison</summary><ul>
<li><code>==</code>: occupy the same slots (identical slot sets)
    <img alt="op" src="../../images/Spatial/Spatial.004.png" /></li>
<li><code>&amp;&amp;</code>: overlap (the intersection of both slot sets is not empty)
    <img alt="op" src="../../images/Spatial/Spatial.006.png" /></li>
<li><code>##</code>: occupy different slots (but they may overlap, the set of slots of the
    two are different as sets)
    <img alt="op" src="../../images/Spatial/Spatial.005.png" /></li>
<li><code>||</code>: occupy disjoint slots (no slot occupied by the one is also occupied by
    the other)
    <img alt="op" src="../../images/Spatial/Spatial.007.png" /></li>
<li><code>[[ ]]</code>: embeds and contains (slot set inclusion, in both directions)
    <img alt="op" src="../../images/Spatial/Spatial.008.png" />
    Never holds between the same nodes. But it holds between different nodes
    with the same slots. But a slot can never embed an other node.</li>
<li><code>&lt;&lt;</code> <code>&gt;&gt;</code>: before and after (with respect to the slots occupied: left ends
    before right starts and vice versa)
    <img alt="op" src="../../images/Spatial/Spatial.009.png" /></li>
<li><code>&lt;:</code> <code>:&gt;</code>: <em>adjacent</em> before and after (with respect to the slots occupied:
    left ends immediately before right starts and vice versa)
    <img alt="op" src="../../images/Spatial/Spatial.013.png" /></li>
<li><code>=:</code> left and right start at the same slot
    <img alt="op" src="../../images/Spatial/Spatial.010.png" /></li>
<li><code>:=</code> left and right end at the same slot
    <img alt="op" src="../../images/Spatial/Spatial.011.png" /></li>
<li><code>::</code> left and right start and end at the same slot
    <img alt="op" src="../../images/Spatial/Spatial.012.png" /></li>
</ul>
</details>
<details class="info"><summary>Nearness comparison</summary><p>Some of the adjacency relations can actually be weakened. Instead of requiring
that one slot is equal to an other slot, you can require that they are <em>k-near</em>,
i.e. they are at most <em>k</em> apart. Here are the relationships where you can do
that. Instead of typing the letter <code>k</code>, provide the actual number you want.</p>
<ul>
<li><code>&lt;k:</code> <code>:k&gt;</code>: <code>k</code>-<em>adjacent</em> before and after (with respect to the slots
    occupied: left ends <code>k</code>-near where right starts and vice versa)
    <img alt="op" src="../../images/Spatial/Spatial.017.png" /></li>
<li><code>=k:</code> left and right start at <code>k</code>-near slots
    <img alt="op" src="../../images/Spatial/Spatial.014.png" /></li>
<li><code>:k=</code> left and right end at <code>k</code>-near slots
    <img alt="op" src="../../images/Spatial/Spatial.015.png" /></li>
<li><code>:k:</code> left and right start and end at <code>k</code>-near slots
    <img alt="op" src="../../images/Spatial/Spatial.016.png" /></li>
</ul>
</details>
<details class="info"><summary>Based on edge features</summary><ul>
<li>
<p><code>-</code><em>name</em><code>&gt;</code> <code>&lt;</code><em>name</em><code>-</code>: connected by the edge feature <em>name</em></p>
<ul>
<li>in both directions;</li>
<li>these forms work for edges that do and do not have values;</li>
</ul>
<p><img alt="op" src="../../images/Spatial/Spatial.018.png" /></p>
</li>
<li>
<p><code>-</code><em>name</em> <em>valueSpec</em><code>&gt;</code> <code>&lt;</code><em>name</em> <em>valueSpec</em><code>-</code>: connected by the edge feature <em>name</em></p>
<ul>
<li>in both directions;</li>
<li>these forms work only for edges that do have values.</li>
</ul>
<p><img alt="op" src="../../images/Spatial/Spatial.019.png" /></p>
</li>
</ul>
</details>
<h3 id="quantifiers">Quantifiers<a class="headerlink" href="#quantifiers" title="Permanent link">&para;</a></h3>
<details class="info"><summary>What is a quantifier?</summary><p>Quantifiers are powerful expressions in templates.</p>
<p>They state conditions on a given atom in your template.
The atom in question is called the <em>parent</em> atom.
The conditions may involve <em>many</em> nodes that are related to the parent,
as in:</p>
<p><em>all embedded words are a verb</em>;</p>
<p><em>without a following predicate phrase</em>;</p>
<p><em>with a mother clause or a mother phrase</em>.</p>
<p>That is where the term <em>quantifier</em> comes from.</p>
<p>A quantifier <em>quantifies</em> its parent atom.</p>
</details>
<details class="abstract"><summary>/without/</summary><p>Syntax:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
/without/
templateN
/-/
</pre></div>
</td></tr></table>

<p>Meaning:</p>
<p>node <em>r</em> is a result of this template if and only if <em>r</em> is a result of <code>atom</code> and
there is no tuple <em>RN</em> such that (<em>r</em>, <em>RN</em>) is a result of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
templateN
</pre></div>
</td></tr></table>

</details>
<details class="abstract"><summary>/where/</summary><p>Syntax:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
/where/
templateA
/have/
templateH
/-/
</pre></div>
</td></tr></table>

<p>Meaning:</p>
<p>node <em>r</em> is a result of this template if and only if <em>r</em> is a result of <code>atom</code> and
for all tuples (<em>RA</em>) such that (<em>r</em>, <em>RA</em>) is a result of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
templateA
</pre></div>
</td></tr></table>

<p>there is a tuple <em>RH</em> such that (<em>r</em>, <em>RA</em>, <em>RH</em>)  is a result of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
templateA
templateH
</pre></div>
</td></tr></table>

</details>
<details class="abstract"><summary>/with/</summary><p>Syntax:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
/with/
templateO1
/or/
templateO2
/or/
templateO3
/-/
</pre></div>
</td></tr></table>

<p>Meaning:</p>
<p>node <em>r</em> is a result of this template if and only if:
there is a tuple <em>R1</em> such that (<em>r</em>, <em>R1</em>) is a result of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
templateO1
</pre></div>
</td></tr></table>

<p>or there is a tuple <em>R2</em> such that (<em>r</em>, <em>R2</em>) is a result of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
templateO2
</pre></div>
</td></tr></table>

<p>or there is a tuple <em>R3</em> such that (<em>r</em>, <em>R3</em>) is a result of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
templateO3
</pre></div>
</td></tr></table>

<details class="note" open="open"><summary>1 or more alternatives</summary><p>This quantifier can be used with any number of <code>/or/</code> keywords, including
none at all. If there is no <code>/or/</code>, there is just one alternative.
The only difference between</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
/with/
template
/-/
</pre></div>
</td></tr></table>

<p>and</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>atom
template
</pre></div>
</td></tr></table>

<p>is that the results of the first query contain tuples with only one
element, corresponding to the <code>atom</code>.
The second query contains tuples of which the first element
corresponds to the <code>atom</code>, and the remaining members correspond to
the <code>template</code>.</p>
</details>
</details>
<details class="note"><summary>Parent</summary><p>The <code>atom</code> bit is an atom line, it acts as the <em>parent</em> of the
quantifier. Inside a quantifier, you may refer to the parent by the special name
<code>..</code>. So you do not have to give a name to the parent.</p>
</details>
<details class="note"><summary>Multiple quantifiers</summary><p>You may have multiple quantifiers for one parent.</p>
</details>
<details class="note"><summary>Not in result tuples</summary><p>Whereas a the search for a normal template proceeds by finding a tuple
that instantiates all its nodes in such a way that
all relationships expressed in the template hold, a quantifier template is not
instantiated. It asserts a condition that has to be tested for all nodes
relative its parent. None of the atoms in a template of a quantifier corresponds
to a node in a final result tuple.</p>
</details>
<details class="note"><summary>May be nested</summary><p>Templates within a quantifier may contain other
quantifiers. The idea is, that whenever a search template is evaluated,
quantifiers at the outer level of get interpreted. This interpretation gives
rise to one or more templates to be constructed and run. Those new templates
have been stripped of the outer layer of quantifiers, and when these templates
are executed, the quantifiers at the next level have become outer. And so on.</p>
</details>
<details class="caution"><summary>Restrictions</summary><p>Due to the implementation of quantifiers there are certain restrictions.</p>
<ul>
<li>Quantifiers must be put immediately below their parents or below
    preceding quantifiers of the same parent.</li>
<li>The keywords of a quantifier must appear on lines with exactly the same indentation
    as the atom they quantify.</li>
<li>The templates of a quantifier must have equal or greater indent than its keywords;</li>
<li>
<p>The names accessible to the templates inside a quantifier are:</p>
<ul>
<li>the name <code>..</code>, which is the name of the atom that is quantified;
    this name is automagically valid in quantifier templates;</li>
<li>the name of the atom that is quantified (if that atom has a given name);</li>
<li>names defined in the template itself;</li>
<li>in <code>/where/</code>, <code>templateH</code> may use names defined in <code>templateA</code>;
    but only if these names are defined outside any quantifier of
    <code>templateA</code>.</li>
</ul>
</li>
<li>
<p>The following situations block the visibility of names:</p>
<ul>
<li>in <code>/with/</code>, <code>templateO</code><em>i</em> may not use names defined in <code>templateO</code><em>j</em> for <em>j</em> other than <em>i</em>;</li>
<li>names defined outer quantifiers are not accessible in inner quantifiers;</li>
<li>names defined inner quantifiers are not accessible in outer quantifiers.</li>
</ul>
</li>
</ul>
<p>When you nest quantifiers, think of the way they will be recomposed into
ordinary templates. This dictates whether your quantifier is syntactically valid or not.</p>
</details>
<details class="note"><summary>Indentation</summary><p>The indentation in quantifiers relative to their parent atom will be preserved.  </p>
<details class="example"><summary>Nested quantifiers</summary><p>Consider</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>clause
/where/
  phrase function=Pred
/have/
  /without/
    word sp#verb
  /-/
/-/
  phrase function=Subj
</pre></div>
</td></tr></table>

<p>The auxiliary templates that will be run are:</p>
<p>For the outer quantifier:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>clause
  phrase function=Pred
</pre></div>
</td></tr></table>

<p>and</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>clause
  phrase function=Pred
  /without/
    word sp#verb
  /-/
</pre></div>
</td></tr></table>

<p>For the inner quantifier:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>phrase function=Pred
  word sp#verb
</pre></div>
</td></tr></table>

<p>Note that the auxiliary template for the inner quantifier
is shifted in its entirety to the left, but that the
relative indentation is exactly as it shows in the original template.</p>
</details>
</details>
<details class="info"><summary>Implementation</summary><p>Here is a description of the implementation of the
quantifiers. It is not the real implementation, but it makes clear what is going
on, and why the quantifiers have certain limitations, and how indentation works.</p>
<p>The basic idea is:</p>
<ul>
<li>a quantifier leads to the execution of one or more separate searche templates;</li>
<li>the results of these searches are combined by means of set operations:
    <em>difference</em>, <em>intersection</em>, <em>union</em>, dependent on the nature of the quantifier;</li>
<li>the end result of this combination will fed as a custom set to
    the original template after
    stripping the whole quantifier from that template.
    So we replace a quantifier by a custom set.</li>
</ul>
<p>Suppose we have</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>clause typ=Wx0
QUANTIFIER1
QUANTIFIER2
...
QUANTIFIERn
  rest-of-template
</pre></div>
</td></tr></table>

<p>We compute a set of clauses <code>filteredClauses1</code> based on</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>clause typ=Wx0
QUANTIFIER1
</pre></div>
</td></tr></table>

<p>and then compute a new set <code>filteredClauses2</code> based on</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>S.search(&#39;&#39;&#39;
fclause typ=Wx0
QUANTIFIER2
&#39;&#39;&#39;,
    customSets=dict(fclause=filteredClauses1)
</pre></div>
</td></tr></table>

<p>and so on until we have had QUANTIFIERn,
leading to a set <code>filteredClausesN</code> of clauses
that pass all filters set by the quantifiers.</p>
<p>Finally, we deliver the results of</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>S.search(&#39;&#39;&#39;
fclause
  rest-of-template
&#39;&#39;&#39;,
    customSets=dict(fclause=filteredClausesN)
</pre></div>
</td></tr></table>

</details>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Browser/" title="Browser" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Browser
              </span>
            </div>
          </a>
        
        
          <a href="../Use7/" title="v7-Guide" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                v7-Guide
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>