



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Text-Fabric is a Python3 package for Text plus Annotations. It provides a data model, a text file format, and a binary format for (ancient) text plus (linguistic) annotations.">
      
      
      
        <meta name="author" content="Dirk Roorda">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/icon/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.6">
    
    
      
        <title>Data - Text-Fabric</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#text-fabric-data-model" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Text-Fabric" class="md-header-nav__button md-logo">
          
            <img src="../../images/tficon-small.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Text-Fabric
              </span>
              <span class="md-header-nav__topic">
                Data
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Text-Fabric" class="md-nav__button md-logo">
      
        <img src="../../images/tficon-small.png" width="48" height="48">
      
    </a>
    Text-Fabric
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/dans-labs/text-fabric/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../News/" title="News" class="md-nav__link">
      News
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Install/" title="Install" class="md-nav__link">
      Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Use/" title="Use" class="md-nav__link">
      Use
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Corpora/" title="Corpora" class="md-nav__link">
      Corpora
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../Faq/" title="Faq" class="md-nav__link">
      Faq
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Code
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Code
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/Stats/" title="Stats (overall)" class="md-nav__link">
      Stats (overall)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsBase/" title="Stats (TF-base)" class="md-nav__link">
      Stats (TF-base)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsSearch/" title="Stats (TF-search)" class="md-nav__link">
      Stats (TF-search)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsApps/" title="Stats (TF-apps)" class="md-nav__link">
      Stats (TF-apps)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Code/StatsServer/" title="Stats (TF-server)" class="md-nav__link">
      Stats (TF-server)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Model
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Model
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Data
      </label>
    
    <a href="./" title="Data" class="md-nav__link md-nav__link--active">
      Data
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#at-a-glance" title="At a glance" class="md-nav__link">
    At a glance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fabric-metaphor" title="Fabric metaphor" class="md-nav__link">
    Fabric metaphor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" title="Model" class="md-nav__link">
    Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#representation" title="Representation" class="md-nav__link">
    Representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-about-the-warp" title="More about the warp" class="md-nav__link">
    More about the warp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otype-node-feature" title="otype: node feature" class="md-nav__link">
    otype: node feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oslots-edge-feature" title="oslots: edge feature" class="md-nav__link">
    oslots: edge feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otext-config-feature-optional" title="otext: config feature (optional)" class="md-nav__link">
    otext: config feature (optional)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serializing-and-precomputing" title="Serializing and precomputing" class="md-nav__link">
    Serializing and precomputing
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../File-formats/" title="Format" class="md-nav__link">
      Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Optimizations/" title="Tweaks" class="md-nav__link">
      Tweaks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Search/" title="Search" class="md-nav__link">
      Search
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Writing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Writing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Writing/Hebrew.html" title="Hebrew" class="md-nav__link">
      Hebrew
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Writing/Syriac.html" title="Syriac" class="md-nav__link">
      Syriac
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Api
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Api
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/General/" title="General" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Apps/" title="Apps" class="md-nav__link">
      Apps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Bhsa/" title="Hebrew Bible" class="md-nav__link">
      Hebrew Bible
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Peshitta/" title="Peshitta" class="md-nav__link">
      Peshitta
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Syrnt/" title="Syriac New Testament" class="md-nav__link">
      Syriac New Testament
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Cunei/" title="Cuneiform Tablets" class="md-nav__link">
      Cuneiform Tablets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Api/Transcription/" title="Auxiliary" class="md-nav__link">
      Auxiliary
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Kernel/" title="Kernel" class="md-nav__link">
      Kernel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Web/" title="Web" class="md-nav__link">
      Web
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Server/Common/" title="Common" class="md-nav__link">
      Common
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Create
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Create
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Create/CreateTF/" title="Make TF" class="md-nav__link">
      Make TF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Create/ExampleText/" title="Example data" class="md-nav__link">
      Example data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#at-a-glance" title="At a glance" class="md-nav__link">
    At a glance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fabric-metaphor" title="Fabric metaphor" class="md-nav__link">
    Fabric metaphor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#model" title="Model" class="md-nav__link">
    Model
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#representation" title="Representation" class="md-nav__link">
    Representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#more-about-the-warp" title="More about the warp" class="md-nav__link">
    More about the warp
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otype-node-feature" title="otype: node feature" class="md-nav__link">
    otype: node feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#oslots-edge-feature" title="oslots: edge feature" class="md-nav__link">
    oslots: edge feature
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otext-config-feature-optional" title="otext: config feature (optional)" class="md-nav__link">
    otext: config feature (optional)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serializing-and-precomputing" title="Serializing and precomputing" class="md-nav__link">
    Serializing and precomputing
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/dans-labs/text-fabric/edit/master/docs/Model/Data-Model.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="text-fabric-data-model">Text-Fabric Data Model<a class="headerlink" href="#text-fabric-data-model" title="Permanent link">&para;</a></h1>
<blockquote>
<p>Everything about us, everything around us, everything we know and can know of
is composed ultimately of patterns of nothing;
that’s the bottom line, the final truth.
So where we find we have any control over those patterns,
why not make the most elegant ones, the most enjoyable and good ones,
in our own terms?"</p>
<p>-- <strong>Iain M. Banks</strong>.
"<a href="https://read.amazon.com/kp/kshare?asin=B002TXZRQI&amp;id=NpPGzf_HT5aADabyiDDSIQ&amp;reshareId=RZ91SGMZJPWK9S1Y4EZX&amp;reshareChannel=system">Consider Phlebas</a>:
A Culture Novel (Culture series)"</p>
</blockquote>
<h2 id="at-a-glance">At a glance<a class="headerlink" href="#at-a-glance" title="Permanent link">&para;</a></h2>
<p>Take a text, put a grid around the words, and then leave out the words. What is
left, are the textual positions, or <em>slots</em>.</p>
<p><img alt="Slots" src="/images/DataModel/DataModel.001.png" /></p>
<p>Pieces of text correspond to phrases, clauses, sentences, verses, chapters,
books. Draw circles around those pieces, and then leave out their contents. What
is left, are the textual objects, or <em>nodes</em>.</p>
<p><img alt="Nodes" src="/images/DataModel/DataModel.002.png" /></p>
<p>Nodes can be connected to other nodes by <em>edges</em>. A basic function of edges is
to indicate <em>containment</em>: <em>this</em> node corresponds to a set of slots that is
contained in the slots of <em>that</em> node. But edges can also denote more abstract,
linguistic relations between nodes.</p>
<p>Nodes have types. Types are just a label that we use to make distinctions
between word nodes, phrase nodes, ..., book nodes. The type assignment is an
example of a <em>feature</em> of nodes: a mapping that assigns a piece of information
to each node. This type assignment has a name: <strong>otype</strong>, and every Text-Fabric
dataset has such a feature.</p>
<p>Nodes may be linked to textual positions or <em>slots</em>. Some nodes are linked to a
single slot, others to a set of slots, and yet others to no slots at all.</p>
<p>Nodes of the first kind are identified with their slots, they have the same
number as slot as they have as node.</p>
<p>Nodes of the second kind have an edge to every slot (which is also a node) that
they are linked to. The collection of these edges from nodes of the second kind
to nodes of the first kind, is an example of a <em>feature</em> of edges: a mapping
that assigns to each pair of nodes a boolean value: is this pair a link or not?
This particular edge feature is called <strong>oslots</strong>, and every Text-Fabric dataset
has such a feature.</p>
<p>Nodes of the third kind represent information that is not part of the main body
of text. We could represent the lexicon in this way. However, it is also
possible to consider <em>lexeme</em> as a node type, where every lexeme node is linked
to the set of slots that have an occurrence of that lexeme.</p>
<h2 id="fabric-metaphor">Fabric metaphor<a class="headerlink" href="#fabric-metaphor" title="Permanent link">&para;</a></h2>
<p><img alt="Loom" src="/images/loom.png" />
<a href="http://www.nuernberger-hausbuecher.de/75-Amb-2-317-4-v/data">AD 1425 Hausbücher der Nürnberger Zwölfbrüderstiftungen</a></p>
<p>Before we go on, we invite you to look at a few basic terms in the craft of
<a href="https://en.wikipedia.org/wiki/Weaving">weaving</a>.</p>
<p>A weaver sets up a set of fixed, parallel threads, the <em>warp</em>. He then picks a
thread, usually a colourful one, and sends it in a perpendicular way through the
warp. This thread is called the <em>weft</em>.</p>
<p><img alt="Warp" src="/images/warp.png" /></p>
<p>The instrument that carries the wefts through the warp is called the <em>loom</em>. The
weaver continues operating the loom, back and forth, occasionally selecting new
wefts, until he has completed a rectangular piece of fabric, the <em>weave</em>.</p>
<p><img alt="Weave" src="/images/weave.png" />
<a href="https://sew4home.com/tips-resources/buying-guide/all-about-fabric-weaves-tutorial">source</a></p>
<p>Now Text-Fabric, the tool, can be seen as the loom that sends features (the
wefts) through a warp (the system of nodes and edges).</p>
<p>The features <strong>otype</strong> and <strong>oslots</strong> are the ones that set up the system of
nodes and edges. That's why we call them <em>warp</em> features. Every Text-Fabric
dataset contains these two warp features. (Later on we'll see a third member of
the warp, <strong>otext</strong>). They provide the structure of a text and its annotations,
without any content. Even the text itself is left out!</p>
<p><img alt="Warp" src="/images/DataModel/DataModel.003.png" /></p>
<p>All other information is added to the warp as <em>features</em> (the wefts): node
features and edge features. A feature is a special aspect of the textual
information, isolated as a kind of module. It is a collection of values which
can be woven as a weft into the warp.</p>
<p>One of the more basic things to add to the warp is the text itself. Ancient
texts often have several text representations, like original (Unicode)
characters or transliterated characters, with or without the complete set of
diacritical marks. In Text-Fabric we do not have to choose between them: we can
package each representation into a feature, and add it to the fabric.</p>
<p>A Text-Fabric data set is a warp (<em>otype</em>, <em>oslots</em>) plus a collection of wefts
(all other features). We may add other features to the same warp. Data sets with
only wefts, but no warps, are called modules. When you use modules with a
dataset, the modules must have been constructed around the warp of the dataset.</p>
<p>Whenever you use Text-Fabric to generate new data, you are weaving a weave. The
resulting dataset is a tight fabric of individual features (wefts), whose values
are taken for a set of nodes (warp).</p>
<p><img alt="Fabric" src="/images/DataModel/DataModel.004.png" /></p>
<p>Some features deserve a privileged place. After all, we are dealing with <em>text</em>,
so we need a bit of information about which features carry textual
representations and sectioning information (e.g. books, chapters, verses).</p>
<p>This information is not hard-wired into Text-Fabric, but it is given in the form
of a <em>config</em> feature. A config feature has no data, only metadata. Every
Text-Fabric dataset may contain a config feature called <strong>otext</strong>, which
specifies which node types and features correspond to sectional units such as
books, chapters, and verses. It also contains templates for generating text
representations for the slots.</p>
<p>The <strong>otext</strong> feature is optional, because not all Text-Fabric datasets are
expected to have extensive sectioning and text representation definitions.
Especially when you are in the process of converting a data source (such as a
treebanks set) into a Text-Fabric dataset, it is handy that Text-Fabric can load
the data without bothering about these matters.</p>
<p><img alt="Text" src="/images/DataModel/DataModel.005.png" /></p>
<h2 id="model">Model<a class="headerlink" href="#model" title="Permanent link">&para;</a></h2>
<p>We summarize in brief statements our data model, including ways to represent the
data, serialize it, and compute with it.</p>
<p>Text objects:</p>
<ul>
<li>occupy arbitrary compositions of slots;</li>
<li>carry a <em>type</em> (just a label); all <em>slots</em> carry the same type, the <em>slot
    type</em>; e.g. <em>word</em> or <em>character</em>;</li>
<li>can be annotated by <em>features</em> (key-value pairs)</li>
<li>can be connected by directed, labelled links to other text objects.</li>
</ul>
<p>The model knows which feature assigned values to nodes and edges. If two
different features assign a value to an edge or node, both values can be read
off later; one through the one feature, and one through the other.</p>
<p>The data in Text-Fabric is organized as an annotated directed graph with a bit
of additional structure. The correspondence is</p>
<ul>
<li>text positions =&gt; the first so many slot numbers</li>
<li>text objects =&gt; nodes</li>
<li>links between text objects =&gt; edges</li>
<li>information associated with text objects =&gt; node features</li>
<li>labels on links between text objects =&gt; edge features</li>
<li><strong>NB:</strong> since every link is specified by an edge feature, every link is
    implicitly labelled by the name of the edge feature. If the edge feature
    assigns values to edges, those values come on top of the implicit label.</li>
<li>types of text objects =&gt; a special node feature called <code>otype</code> (read: object
    type)</li>
<li>extent of text objects in terms of slots =&gt; a special edge feature called
    <code>oslots</code> (read: object slots)</li>
<li>optional specifications for sectioning and representing text =&gt; a special
    config feature called <code>otext</code> (read: object text)</li>
</ul>
<p>Together, the <code>otype</code>, <code>oslots</code>, and the optional <code>otext</code> features are called
the <strong>warp</strong> of a Text-Fabric dataset.</p>
<h2 id="representation">Representation<a class="headerlink" href="#representation" title="Permanent link">&para;</a></h2>
<p>We represent the elements that make up such a graph as follows:</p>
<ul>
<li>nodes are integers, starting with 1, without gaps;</li>
<li>the first <code>maxSlot</code> nodes correspond exactly with the slots, in the same
    order, where <code>maxSlot</code> is the number of slots;</li>
<li>nodes greater than <code>maxSlot</code> correspond to general text objects;</li>
<li>node features are mappings of integers to values;</li>
<li>edge features are mappings of pairs of integers to values; i.e. edges are
    ordered pairs of integers; labelled edges are ordered tuples of two nodes and
    a value;</li>
<li>values (for nodes and for edges) are strings (Unicode, utf8) or numbers;</li>
<li>the <code>otype</code> feature maps<ul>
<li>the integers <code>1..maxSlot</code> (including) to the <em>slot type</em>, where <code>maxSlot</code> is
    the last <em>slot</em>,</li>
<li>the integers <code>maxSlot+1..maxNode</code> (including) to the relevant text object
    types;</li>
</ul>
</li>
<li>the <code>oslots</code> feature is an valueless edge feature, mapping all non-slot nodes
    to sets of slots; so there is an <code>oslots</code> edge between each non-slot node and
    each slot <em>contained</em> by that node;</li>
<li>a Text-Fabric dataset is a collection of node features and edge features
    containing at least the <em>warp</em> features <code>otype</code>, <code>oslots</code>, and, optionally
    <code>otext</code>.</li>
</ul>
<h2 id="more-about-the-warp">More about the warp<a class="headerlink" href="#more-about-the-warp" title="Permanent link">&para;</a></h2>
<p>The warp/weft distinction is a handy way of separating textual organisation from
textual content. Let us discuss the warp features a bit more.</p>
<h3 id="otype-node-feature">otype: node feature<a class="headerlink" href="#otype-node-feature" title="Permanent link">&para;</a></h3>
<p>Maps each node to a label. The label typically is the kind of object that the
node represents, with values such as</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>book
chapter
verse
sentence
clause
phrase
word
</pre></div>
</td></tr></table>

<p>There is a special kind of object type, the <em>slot type</em>, which is the atomic
building block of the text objects. It is assumed that the complete text is
built from a sequence of <em>slots</em>, from slot <code>1</code> till slot <code>maxSlot</code> (including),
where the slots are numbered consecutively. There must be at least one slot.</p>
<p>All other objects are defined with respect to the <em>slots</em> they contain.</p>
<p>The <em>slot type</em> does not have to be called <code>slot</code> literally. If your basic
entity is <code>word</code>, you may also call it <code>word</code>. Slots are then filled with
<em>words</em>. You can model text on the basis of another atomic entity, such as
<code>character</code>. In that case, slots are filled with <em>characters</em>. Other choices may
be equally viable.</p>
<p>The only requirement is that all slots correspond exactly with the first so many
nodes.</p>
<p>The <code>otype</code> feature will map node <code>1</code> to a node type, and this node type is the
type of all subsequent slots and also of the things that fill the slots.</p>
<p>Note also the sectional features <code>book chapter verse</code> here. They will play a
role in the third, optional, warp feature <code>otext</code>.</p>
<h3 id="oslots-edge-feature">oslots: edge feature<a class="headerlink" href="#oslots-edge-feature" title="Permanent link">&para;</a></h3>
<p>Defines which slots are occupied by which objects. It does so by specifying
edges from nodes to the slots they contain.</p>
<p>From the information in <code>oslots</code> we can compute the embedding relationships
between all nodes.</p>
<p>It gives also rise to a canonical <a href="Api#sorting-nodes">ordering</a> of nodes.</p>
<h3 id="otext-config-feature-optional">otext: config feature (optional)<a class="headerlink" href="#otext-config-feature-optional" title="Permanent link">&para;</a></h3>
<p>Declares which node types correspond to the first three levels of sectioning,
usually <em>book</em>, <em>chapter</em>, <em>verse</em>. Also declares the corresponding features to
get the names or numbers of the sections in those levels. Text-Fabric uses this
information to construct the so-called Text-API, with functions to</p>
<ul>
<li>convert nodes to section labels and vice versa,</li>
<li>represent section names in multiple languages,</li>
<li>print formatted text for node sets.</li>
</ul>
<p>If information about sections or text representations are missing, Text-Fabric
will build a reduced Text-API for you, but it will continue.</p>
<h2 id="serializing-and-precomputing">Serializing and precomputing<a class="headerlink" href="#serializing-and-precomputing" title="Permanent link">&para;</a></h2>
<p>When Text-Fabric works with a dataset, it reads feature data files, and offers
an API to process that data. The main task of Text-Fabric is to make processing
efficient, so that it can be done in interactive ways, such as in a Jupyter
notebook. To that end, Text-Fabric</p>
<ul>
<li>optimizes feature data after reading it for the first time and stores it in
    binary form for fast loading in next invocations;</li>
<li>precomputes additional data from the warp features in order to provide
    convenient API functions.</li>
</ul>
<p>In Text-Fabric, we have various ways of encoding this model:</p>
<ul>
<li>as plain text in <code>.tf</code> feature files,</li>
<li>as Python data structures in memory,</li>
<li>as compressed serializations of the same data structures inside <code>.tfx</code> files
    in <code>.tf</code> cache directories.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../Code/StatsServer/" title="Stats (TF-server)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Stats (TF-server)
              </span>
            </div>
          </a>
        
        
          <a href="../File-formats/" title="Format" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Format
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.5e60981f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>